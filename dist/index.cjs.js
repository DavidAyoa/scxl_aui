"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const R=require("react"),Sp=require("react-dom");function _p(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const n in e)if(n!=="default"){const r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:()=>e[n]})}}return t.default=e,Object.freeze(t)}const A=_p(R),kp=_p(Sp),ge={primary:"scxl:text-indigo-500",primaryHover:"hover:scxl:text-indigo-600",primaryLight:"scxl:text-indigo-300",background:"scxl:bg-white",cardBackground:"scxl:bg-white",inputBackground:"scxl:bg-white",border:"scxl:border-gray-200",inputBorder:"scxl:border-indigo-500",inputBorderFocus:"focus:scxl:border-indigo-600",textPrimary:"scxl:text-gray-900",textSecondary:"scxl:text-gray-500",textMuted:"scxl:text-gray-400",success:"scxl:text-emerald-500",successLight:"scxl:bg-emerald-100",error:"scxl:text-red-500",errorLight:"scxl:bg-red-200",warning:"scxl:text-amber-500",warningLight:"scxl:bg-amber-100",userBubble:"scxl:bg-indigo-500",userBubbleText:"scxl:text-white",botBubble:"scxl:bg-gray-100",botBubbleText:"scxl:text-gray-900",connected:"scxl:bg-emerald-500",connecting:"scxl:bg-indigo-500",disconnected:"scxl:bg-red-500",ready:"scxl:bg-emerald-500"},vb={sm:{container:"scxl:max-w-md",text:"scxl:text-sm",padding:"scxl:p-3",button:"scxl:px-3 scxl:py-1.5 scxl:text-xs",input:"scxl:p-3 scxl:text-sm",title:"scxl:text-lg"},md:{container:"scxl:max-w-2xl",text:"scxl:text-base",padding:"scxl:p-4",button:"scxl:px-4 scxl:py-2 scxl:text-sm",input:"scxl:p-4 scxl:text-sm",title:"scxl:text-xl"},lg:{container:"scxl:max-w-4xl",text:"scxl:text-lg",padding:"scxl:p-6",button:"scxl:px-6 scxl:py-3 scxl:text-base",input:"scxl:p-6 scxl:text-base",title:"scxl:text-2xl"}},Cp=(e={})=>{const t={...ge,...e};return{primary:t.primary||ge.primary,primaryHover:t.primaryHover||ge.primaryHover,primaryLight:t.primaryLight||ge.primaryLight,background:t.background||ge.background,cardBackground:t.cardBackground||ge.cardBackground,inputBackground:t.inputBackground||ge.inputBackground,border:t.border||ge.border,inputBorder:t.inputBorder||ge.inputBorder,inputBorderFocus:t.inputBorderFocus||ge.inputBorderFocus,textPrimary:t.textPrimary||ge.textPrimary,textSecondary:t.textSecondary||ge.textSecondary,textMuted:t.textMuted||ge.textMuted,success:t.success||ge.success,successLight:t.successLight||ge.successLight,error:t.error||ge.error,errorLight:t.errorLight||ge.errorLight,warning:t.warning||ge.warning,warningLight:t.warningLight||ge.warningLight,userBubble:t.userBubble||ge.userBubble,userBubbleText:t.userBubbleText||ge.userBubbleText,botBubble:t.botBubble||ge.botBubble,botBubbleText:t.botBubbleText||ge.botBubbleText,connected:t.connected||ge.connected,connecting:t.connecting||ge.connecting,disconnected:t.disconnected||ge.disconnected,ready:t.ready||ge.ready}},Ep=(e="md")=>vb[e],Tp={title:"Voice Chat",subtitle:"Connect to start your conversation",connectButton:"Connect",disconnectButton:"Disconnect",inputPlaceholder:"Ask anything...",voiceTooltip:"Switch to voice mode",textTooltip:"Switch to text mode",loadingText:"Initializing...",errorTitle:"Connection Error",botReadyText:"Bot Ready",connectedText:"Connected",connectingText:"Connecting..."};function yb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ls={exports:{}},Wr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eu;function bb(){if(eu)return Wr;eu=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,s,i){var o=null;if(i!==void 0&&(o=""+i),s.key!==void 0&&(o=""+s.key),"key"in s){i={};for(var a in s)a!=="key"&&(i[a]=s[a])}else i=s;return s=i.ref,{$$typeof:e,type:r,key:o,ref:s!==void 0?s:null,props:i}}return Wr.Fragment=t,Wr.jsx=n,Wr.jsxs=n,Wr}var qr={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tu;function wb(){return tu||(tu=1,process.env.NODE_ENV!=="production"&&function(){function e(F){if(F==null)return null;if(typeof F=="function")return F.$$typeof===j?null:F.displayName||F.name||null;if(typeof F=="string")return F;switch(F){case y:return"Fragment";case w:return"Profiler";case b:return"StrictMode";case _:return"Suspense";case O:return"SuspenseList";case L:return"Activity"}if(typeof F=="object")switch(typeof F.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),F.$$typeof){case g:return"Portal";case C:return(F.displayName||"Context")+".Provider";case M:return(F._context.displayName||"Context")+".Consumer";case S:var te=F.render;return F=F.displayName,F||(F=te.displayName||te.name||"",F=F!==""?"ForwardRef("+F+")":"ForwardRef"),F;case k:return te=F.displayName||null,te!==null?te:e(F.type)||"Memo";case P:te=F._payload,F=F._init;try{return e(F(te))}catch{}}return null}function t(F){return""+F}function n(F){try{t(F);var te=!1}catch{te=!0}if(te){te=console;var fe=te.error,d=typeof Symbol=="function"&&Symbol.toStringTag&&F[Symbol.toStringTag]||F.constructor.name||"Object";return fe.call(te,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",d),t(F)}}function r(F){if(F===y)return"<>";if(typeof F=="object"&&F!==null&&F.$$typeof===P)return"<...>";try{var te=e(F);return te?"<"+te+">":"<...>"}catch{return"<...>"}}function s(){var F=N.A;return F===null?null:F.getOwner()}function i(){return Error("react-stack-top-frame")}function o(F){if(U.call(F,"key")){var te=Object.getOwnPropertyDescriptor(F,"key").get;if(te&&te.isReactWarning)return!1}return F.key!==void 0}function a(F,te){function fe(){G||(G=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",te))}fe.isReactWarning=!0,Object.defineProperty(F,"key",{get:fe,configurable:!0})}function c(){var F=e(this.type);return X[F]||(X[F]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),F=this.props.ref,F!==void 0?F:null}function l(F,te,fe,d,v,m,E,T){return fe=m.ref,F={$$typeof:p,type:F,key:te,props:m,_owner:v},(fe!==void 0?fe:null)!==null?Object.defineProperty(F,"ref",{enumerable:!1,get:c}):Object.defineProperty(F,"ref",{enumerable:!1,value:null}),F._store={},Object.defineProperty(F._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(F,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(F,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:E}),Object.defineProperty(F,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:T}),Object.freeze&&(Object.freeze(F.props),Object.freeze(F)),F}function u(F,te,fe,d,v,m,E,T){var D=te.children;if(D!==void 0)if(d)if(H(D)){for(d=0;d<D.length;d++)f(D[d]);Object.freeze&&Object.freeze(D)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else f(D);if(U.call(te,"key")){D=e(F);var z=Object.keys(te).filter(function(J){return J!=="key"});d=0<z.length?"{key: someKey, "+z.join(": ..., ")+": ...}":"{key: someKey}",ne[D+d]||(z=0<z.length?"{"+z.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,d,D,z,D),ne[D+d]=!0)}if(D=null,fe!==void 0&&(n(fe),D=""+fe),o(te)&&(n(te.key),D=""+te.key),"key"in te){fe={};for(var W in te)W!=="key"&&(fe[W]=te[W])}else fe=te;return D&&a(fe,typeof F=="function"?F.displayName||F.name||"Unknown":F),l(F,D,m,v,s(),fe,E,T)}function f(F){typeof F=="object"&&F!==null&&F.$$typeof===p&&F._store&&(F._store.validated=1)}var h=R,p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),M=Symbol.for("react.consumer"),C=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),j=Symbol.for("react.client.reference"),N=h.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=Object.prototype.hasOwnProperty,H=Array.isArray,V=console.createTask?console.createTask:function(){return null};h={"react-stack-bottom-frame":function(F){return F()}};var G,X={},q=h["react-stack-bottom-frame"].bind(h,i)(),I=V(r(i)),ne={};qr.Fragment=y,qr.jsx=function(F,te,fe,d,v){var m=1e4>N.recentlyCreatedOwnerStacks++;return u(F,te,fe,!1,d,v,m?Error("react-stack-top-frame"):q,m?V(r(F)):I)},qr.jsxs=function(F,te,fe,d,v){var m=1e4>N.recentlyCreatedOwnerStacks++;return u(F,te,fe,!0,d,v,m?Error("react-stack-top-frame"):q,m?V(r(F)):I)}}()),qr}var nu;function xb(){return nu||(nu=1,process.env.NODE_ENV==="production"?Ls.exports=bb():Ls.exports=wb()),Ls.exports}var x=xb();const Sb=({text:e,speed:t=20,onComplete:n})=>{const[r,s]=R.useState(""),[i,o]=R.useState(0),[a,c]=R.useState("");return R.useEffect(()=>{c(e),s(""),o(0)},[e]),R.useEffect(()=>{if(i>=a.length){n?.();return}const l=setTimeout(()=>{s(u=>u+a[i]),o(u=>u+1)},t);return()=>clearTimeout(l)},[i,a,t,n]),x.jsx("span",{children:r})};function Mp(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=Mp(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function _e(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=Mp(e))&&(r&&(r+=" "),r+=t);return r}var js={exports:{}},ru;function _b(){if(ru)return js.exports;ru=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(_,O,k){return Function.prototype.apply.call(_,O,k)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(_){return Object.getOwnPropertyNames(_).concat(Object.getOwnPropertySymbols(_))}:n=function(_){return Object.getOwnPropertyNames(_)};function r(S){console&&console.warn&&console.warn(S)}var s=Number.isNaN||function(_){return _!==_};function i(){i.init.call(this)}js.exports=i,js.exports.once=w,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function a(S){if(typeof S!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof S)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(S){if(typeof S!="number"||S<0||s(S))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+S+".");o=S}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(_){if(typeof _!="number"||_<0||s(_))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+_+".");return this._maxListeners=_,this};function c(S){return S._maxListeners===void 0?i.defaultMaxListeners:S._maxListeners}i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(_){for(var O=[],k=1;k<arguments.length;k++)O.push(arguments[k]);var P=_==="error",L=this._events;if(L!==void 0)P=P&&L.error===void 0;else if(!P)return!1;if(P){var j;if(O.length>0&&(j=O[0]),j instanceof Error)throw j;var N=new Error("Unhandled error."+(j?" ("+j.message+")":""));throw N.context=j,N}var U=L[_];if(U===void 0)return!1;if(typeof U=="function")t(U,this,O);else for(var H=U.length,V=g(U,H),k=0;k<H;++k)t(V[k],this,O);return!0};function l(S,_,O,k){var P,L,j;if(a(O),L=S._events,L===void 0?(L=S._events=Object.create(null),S._eventsCount=0):(L.newListener!==void 0&&(S.emit("newListener",_,O.listener?O.listener:O),L=S._events),j=L[_]),j===void 0)j=L[_]=O,++S._eventsCount;else if(typeof j=="function"?j=L[_]=k?[O,j]:[j,O]:k?j.unshift(O):j.push(O),P=c(S),P>0&&j.length>P&&!j.warned){j.warned=!0;var N=new Error("Possible EventEmitter memory leak detected. "+j.length+" "+String(_)+" listeners added. Use emitter.setMaxListeners() to increase limit");N.name="MaxListenersExceededWarning",N.emitter=S,N.type=_,N.count=j.length,r(N)}return S}i.prototype.addListener=function(_,O){return l(this,_,O,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(_,O){return l(this,_,O,!0)};function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(S,_,O){var k={fired:!1,wrapFn:void 0,target:S,type:_,listener:O},P=u.bind(k);return P.listener=O,k.wrapFn=P,P}i.prototype.once=function(_,O){return a(O),this.on(_,f(this,_,O)),this},i.prototype.prependOnceListener=function(_,O){return a(O),this.prependListener(_,f(this,_,O)),this},i.prototype.removeListener=function(_,O){var k,P,L,j,N;if(a(O),P=this._events,P===void 0)return this;if(k=P[_],k===void 0)return this;if(k===O||k.listener===O)--this._eventsCount===0?this._events=Object.create(null):(delete P[_],P.removeListener&&this.emit("removeListener",_,k.listener||O));else if(typeof k!="function"){for(L=-1,j=k.length-1;j>=0;j--)if(k[j]===O||k[j].listener===O){N=k[j].listener,L=j;break}if(L<0)return this;L===0?k.shift():y(k,L),k.length===1&&(P[_]=k[0]),P.removeListener!==void 0&&this.emit("removeListener",_,N||O)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(_){var O,k,P;if(k=this._events,k===void 0)return this;if(k.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):k[_]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete k[_]),this;if(arguments.length===0){var L=Object.keys(k),j;for(P=0;P<L.length;++P)j=L[P],j!=="removeListener"&&this.removeAllListeners(j);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(O=k[_],typeof O=="function")this.removeListener(_,O);else if(O!==void 0)for(P=O.length-1;P>=0;P--)this.removeListener(_,O[P]);return this};function h(S,_,O){var k=S._events;if(k===void 0)return[];var P=k[_];return P===void 0?[]:typeof P=="function"?O?[P.listener||P]:[P]:O?b(P):g(P,P.length)}i.prototype.listeners=function(_){return h(this,_,!0)},i.prototype.rawListeners=function(_){return h(this,_,!1)},i.listenerCount=function(S,_){return typeof S.listenerCount=="function"?S.listenerCount(_):p.call(S,_)},i.prototype.listenerCount=p;function p(S){var _=this._events;if(_!==void 0){var O=_[S];if(typeof O=="function")return 1;if(O!==void 0)return O.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function g(S,_){for(var O=new Array(_),k=0;k<_;++k)O[k]=S[k];return O}function y(S,_){for(;_+1<S.length;_++)S[_]=S[_+1];S.pop()}function b(S){for(var _=new Array(S.length),O=0;O<_.length;++O)_[O]=S[O].listener||S[O];return _}function w(S,_){return new Promise(function(O,k){function P(j){S.removeListener(_,L),k(j)}function L(){typeof S.removeListener=="function"&&S.removeListener("error",P),O([].slice.call(arguments))}C(S,_,L,{once:!0}),_!=="error"&&M(S,P,{once:!0})})}function M(S,_,O){typeof S.on=="function"&&C(S,"error",_,O)}function C(S,_,O,k){if(typeof S.on=="function")k.once?S.once(_,O):S.on(_,O);else if(typeof S.addEventListener=="function")S.addEventListener(_,function P(L){k.once&&S.removeEventListener(_,P),O(L)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof S)}return js.exports}var kb=_b();const Cb=yb(kb);var Fe=[];for(var yo=0;yo<256;++yo)Fe.push((yo+256).toString(16).slice(1));function Eb(e,t=0){return(Fe[e[t+0]]+Fe[e[t+1]]+Fe[e[t+2]]+Fe[e[t+3]]+"-"+Fe[e[t+4]]+Fe[e[t+5]]+"-"+Fe[e[t+6]]+Fe[e[t+7]]+"-"+Fe[e[t+8]]+Fe[e[t+9]]+"-"+Fe[e[t+10]]+Fe[e[t+11]]+Fe[e[t+12]]+Fe[e[t+13]]+Fe[e[t+14]]+Fe[e[t+15]]).toLowerCase()}var Ds,Tb=new Uint8Array(16);function Mb(){if(!Ds&&(Ds=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ds))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ds(Tb)}var Pb=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const su={randomUUID:Pb};function Ab(e,t,n){if(su.randomUUID&&!t&&!e)return su.randomUUID();e=e||{};var r=e.random||(e.rng||Mb)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(var s=0;s<16;++s)t[n+s]=r[s];return t}return Eb(r)}const Ob={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},Pp={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},Te={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},qe={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},en={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class B{static getFirstMatch(t,n){const r=n.match(t);return r&&r.length>0&&r[1]||""}static getSecondMatch(t,n){const r=n.match(t);return r&&r.length>1&&r[2]||""}static matchAndReturnConst(t,n,r){if(t.test(n))return r}static getWindowsVersionName(t){switch(t){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(t){const n=t.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),n[0]===10)switch(n[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(t){const n=t.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),!(n[0]===1&&n[1]<5)){if(n[0]===1&&n[1]<6)return"Cupcake";if(n[0]===1&&n[1]>=6)return"Donut";if(n[0]===2&&n[1]<2)return"Eclair";if(n[0]===2&&n[1]===2)return"Froyo";if(n[0]===2&&n[1]>2)return"Gingerbread";if(n[0]===3)return"Honeycomb";if(n[0]===4&&n[1]<1)return"Ice Cream Sandwich";if(n[0]===4&&n[1]<4)return"Jelly Bean";if(n[0]===4&&n[1]>=4)return"KitKat";if(n[0]===5)return"Lollipop";if(n[0]===6)return"Marshmallow";if(n[0]===7)return"Nougat";if(n[0]===8)return"Oreo";if(n[0]===9)return"Pie"}}static getVersionPrecision(t){return t.split(".").length}static compareVersions(t,n,r=!1){const s=B.getVersionPrecision(t),i=B.getVersionPrecision(n);let o=Math.max(s,i),a=0;const c=B.map([t,n],l=>{const u=o-B.getVersionPrecision(l),f=l+new Array(u+1).join(".0");return B.map(f.split("."),h=>new Array(20-h.length).join("0")+h).reverse()});for(r&&(a=o-Math.min(s,i)),o-=1;o>=a;){if(c[0][o]>c[1][o])return 1;if(c[0][o]===c[1][o]){if(o===a)return 0;o-=1}else if(c[0][o]<c[1][o])return-1}}static map(t,n){const r=[];let s;if(Array.prototype.map)return Array.prototype.map.call(t,n);for(s=0;s<t.length;s+=1)r.push(n(t[s]));return r}static find(t,n){let r,s;if(Array.prototype.find)return Array.prototype.find.call(t,n);for(r=0,s=t.length;r<s;r+=1){const i=t[r];if(n(i,r))return i}}static assign(t,...n){const r=t;let s,i;if(Object.assign)return Object.assign(t,...n);for(s=0,i=n.length;s<i;s+=1){const o=n[s];typeof o=="object"&&o!==null&&Object.keys(o).forEach(c=>{r[c]=o[c]})}return t}static getBrowserAlias(t){return Ob[t]}static getBrowserTypeByAlias(t){return Pp[t]||""}}const ye=/version\/(\d+(\.?_?\d+)+)/i,Rb=[{test:[/googlebot/i],describe(e){const t={name:"Googlebot"},n=B.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||B.getFirstMatch(ye,e);return n&&(t.version=n),t}},{test:[/opera/i],describe(e){const t={name:"Opera"},n=B.getFirstMatch(ye,e)||B.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe(e){const t={name:"Opera"},n=B.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||B.getFirstMatch(ye,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe(e){const t={name:"Samsung Internet for Android"},n=B.getFirstMatch(ye,e)||B.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe(e){const t={name:"NAVER Whale Browser"},n=B.getFirstMatch(ye,e)||B.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe(e){const t={name:"MZ Browser"},n=B.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||B.getFirstMatch(ye,e);return n&&(t.version=n),t}},{test:[/focus/i],describe(e){const t={name:"Focus"},n=B.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||B.getFirstMatch(ye,e);return n&&(t.version=n),t}},{test:[/swing/i],describe(e){const t={name:"Swing"},n=B.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||B.getFirstMatch(ye,e);return n&&(t.version=n),t}},{test:[/coast/i],describe(e){const t={name:"Opera Coast"},n=B.getFirstMatch(ye,e)||B.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(e){const t={name:"Opera Touch"},n=B.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||B.getFirstMatch(ye,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe(e){const t={name:"Yandex Browser"},n=B.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||B.getFirstMatch(ye,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe(e){const t={name:"UC Browser"},n=B.getFirstMatch(ye,e)||B.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe(e){const t={name:"Maxthon"},n=B.getFirstMatch(ye,e)||B.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe(e){const t={name:"Epiphany"},n=B.getFirstMatch(ye,e)||B.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe(e){const t={name:"Puffin"},n=B.getFirstMatch(ye,e)||B.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe(e){const t={name:"Sleipnir"},n=B.getFirstMatch(ye,e)||B.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe(e){const t={name:"K-Meleon"},n=B.getFirstMatch(ye,e)||B.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe(e){const t={name:"WeChat"},n=B.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||B.getFirstMatch(ye,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe(e){const t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=B.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||B.getFirstMatch(ye,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe(e){const t={name:"Internet Explorer"},n=B.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe(e){const t={name:"Microsoft Edge"},n=B.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe(e){const t={name:"Microsoft Edge"},n=B.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe(e){const t={name:"Vivaldi"},n=B.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe(e){const t={name:"SeaMonkey"},n=B.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe(e){const t={name:"Sailfish"},n=B.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe(e){const t={name:"Amazon Silk"},n=B.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe(e){const t={name:"PhantomJS"},n=B.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe(e){const t={name:"SlimerJS"},n=B.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t={name:"BlackBerry"},n=B.getFirstMatch(ye,e)||B.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe(e){const t={name:"WebOS Browser"},n=B.getFirstMatch(ye,e)||B.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe(e){const t={name:"Bada"},n=B.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe(e){const t={name:"Tizen"},n=B.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||B.getFirstMatch(ye,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe(e){const t={name:"QupZilla"},n=B.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||B.getFirstMatch(ye,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe(e){const t={name:"Firefox"},n=B.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe(e){const t={name:"Electron"},n=B.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MiuiBrowser/i],describe(e){const t={name:"Miui"},n=B.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe(e){const t={name:"Chromium"},n=B.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||B.getFirstMatch(ye,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe(e){const t={name:"Chrome"},n=B.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe(e){const t={name:"Google Search"},n=B.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test(e){const t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe(e){const t={name:"Android Browser"},n=B.getFirstMatch(ye,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe(e){const t={name:"PlayStation 4"},n=B.getFirstMatch(ye,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe(e){const t={name:"Safari"},n=B.getFirstMatch(ye,e);return n&&(t.version=n),t}},{test:[/.*/i],describe(e){const t=/^(.*)\/(.*) /,n=/^(.*)\/(.*)[ \t]\((.*)/,s=e.search("\\(")!==-1?n:t;return{name:B.getFirstMatch(s,e),version:B.getSecondMatch(s,e)}}}],Lb=[{test:[/Roku\/DVP/],describe(e){const t=B.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:qe.Roku,version:t}}},{test:[/windows phone/i],describe(e){const t=B.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:qe.WindowsPhone,version:t}}},{test:[/windows /i],describe(e){const t=B.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=B.getWindowsVersionName(t);return{name:qe.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(e){const t={name:qe.iOS},n=B.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe(e){const t=B.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=B.getMacOSVersionName(t),r={name:qe.MacOS,version:t};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe(e){const t=B.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:qe.iOS,version:t}}},{test(e){const t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe(e){const t=B.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=B.getAndroidVersionName(t),r={name:qe.Android,version:t};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe(e){const t=B.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:qe.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t=B.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||B.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||B.getFirstMatch(/\bbb(\d+)/i,e);return{name:qe.BlackBerry,version:t}}},{test:[/bada/i],describe(e){const t=B.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:qe.Bada,version:t}}},{test:[/tizen/i],describe(e){const t=B.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:qe.Tizen,version:t}}},{test:[/linux/i],describe(){return{name:qe.Linux}}},{test:[/CrOS/],describe(){return{name:qe.ChromeOS}}},{test:[/PlayStation 4/],describe(e){const t=B.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:qe.PlayStation4,version:t}}}],jb=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(e){const t=B.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:Te.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:Te.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:Te.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:Te.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:Te.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:Te.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:Te.tablet}}},{test(e){const t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe(e){const t=B.getFirstMatch(/(ipod|iphone)/i,e);return{type:Te.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:Te.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:Te.mobile}}},{test(e){return e.getBrowserName(!0)==="blackberry"},describe(){return{type:Te.mobile,vendor:"BlackBerry"}}},{test(e){return e.getBrowserName(!0)==="bada"},describe(){return{type:Te.mobile}}},{test(e){return e.getBrowserName()==="windows phone"},describe(){return{type:Te.mobile,vendor:"Microsoft"}}},{test(e){const t=Number(String(e.getOSVersion()).split(".")[0]);return e.getOSName(!0)==="android"&&t>=3},describe(){return{type:Te.tablet}}},{test(e){return e.getOSName(!0)==="android"},describe(){return{type:Te.mobile}}},{test(e){return e.getOSName(!0)==="macos"},describe(){return{type:Te.desktop,vendor:"Apple"}}},{test(e){return e.getOSName(!0)==="windows"},describe(){return{type:Te.desktop}}},{test(e){return e.getOSName(!0)==="linux"},describe(){return{type:Te.desktop}}},{test(e){return e.getOSName(!0)==="playstation 4"},describe(){return{type:Te.tv}}},{test(e){return e.getOSName(!0)==="roku"},describe(){return{type:Te.tv}}}],Db=[{test(e){return e.getBrowserName(!0)==="microsoft edge"},describe(e){if(/\sedg\//i.test(e))return{name:en.Blink};const n=B.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:en.EdgeHTML,version:n}}},{test:[/trident/i],describe(e){const t={name:en.Trident},n=B.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test(e){return e.test(/presto/i)},describe(e){const t={name:en.Presto},n=B.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test(e){const t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe(e){const t={name:en.Gecko},n=B.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:en.Blink}}},{test:[/(apple)?webkit/i],describe(e){const t={name:en.WebKit},n=B.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}];class iu{constructor(t,n=!1){if(t==null||t==="")throw new Error("UserAgent parameter can't be empty");this._ua=t,this.parsedResult={},n!==!0&&this.parse()}getUA(){return this._ua}test(t){return t.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const t=B.find(Rb,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(t){return t?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const t=B.find(Lb,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os}getOSName(t){const{name:n}=this.getOS();return t?String(n).toLowerCase()||"":n||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(t=!1){const{type:n}=this.getPlatform();return t?String(n).toLowerCase()||"":n||""}parsePlatform(){this.parsedResult.platform={};const t=B.find(jb,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(t){return t?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const t=B.find(Db,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return B.assign({},this.parsedResult)}satisfies(t){const n={};let r=0;const s={};let i=0;if(Object.keys(t).forEach(a=>{const c=t[a];typeof c=="string"?(s[a]=c,i+=1):typeof c=="object"&&(n[a]=c,r+=1)}),r>0){const a=Object.keys(n),c=B.find(a,u=>this.isOS(u));if(c){const u=this.satisfies(n[c]);if(u!==void 0)return u}const l=B.find(a,u=>this.isPlatform(u));if(l){const u=this.satisfies(n[l]);if(u!==void 0)return u}}if(i>0){const a=Object.keys(s),c=B.find(a,l=>this.isBrowser(l,!0));if(c!==void 0)return this.compareVersion(s[c])}}isBrowser(t,n=!1){const r=this.getBrowserName().toLowerCase();let s=t.toLowerCase();const i=B.getBrowserTypeByAlias(s);return n&&i&&(s=i.toLowerCase()),s===r}compareVersion(t){let n=[0],r=t,s=!1;const i=this.getBrowserVersion();if(typeof i=="string")return t[0]===">"||t[0]==="<"?(r=t.substr(1),t[1]==="="?(s=!0,r=t.substr(2)):n=[],t[0]===">"?n.push(1):n.push(-1)):t[0]==="="?r=t.substr(1):t[0]==="~"&&(s=!0,r=t.substr(1)),n.indexOf(B.compareVersions(i,r,s))>-1}isOS(t){return this.getOSName(!0)===String(t).toLowerCase()}isPlatform(t){return this.getPlatformType(!0)===String(t).toLowerCase()}isEngine(t){return this.getEngineName(!0)===String(t).toLowerCase()}is(t,n=!1){return this.isBrowser(t,n)||this.isOS(t)||this.isPlatform(t)}some(t=[]){return t.some(n=>this.is(n))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class Ib{static getParser(t,n=!1){if(typeof t!="string")throw new Error("UserAgent should be a string");return new iu(t,n)}static parse(t){return new iu(t).getResult()}static get BROWSER_MAP(){return Pp}static get ENGINE_MAP(){return en}static get OS_MAP(){return qe}static get PLATFORMS_MAP(){return Te}}function mn(e,t){return Object.keys(t).forEach(function(n){n==="default"||n==="__esModule"||Object.prototype.hasOwnProperty.call(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})}),e}function Nb(e){return e&&e.__esModule?e.default:e}function De(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var Wi={},Ap={};De(Ap,"PipecatClient",()=>Mr);var gr={};gr=JSON.parse('{"name":"@pipecat-ai/client-js","version":"1.0.0","license":"BSD-2-Clause","main":"dist/index.js","module":"dist/index.module.js","types":"dist/index.d.ts","source":"index.ts","repository":{"type":"git","url":"git+https://github.com/pipecat-ai/pipecat-client-web.git"},"files":["dist","package.json","README.md"],"scripts":{"build":"jest --silent --passWithNoTests && parcel build --no-cache","dev":"parcel watch","lint":"eslint . --report-unused-disable-directives --max-warnings 0","test":"jest"},"jest":{"preset":"ts-jest","testEnvironment":"jsdom"},"devDependencies":{"@jest/globals":"^29.7.0","@types/clone-deep":"^4.0.4","@types/jest":"^29.5.12","@types/uuid":"^10.0.0","eslint":"^9.11.1","eslint-config-prettier":"^9.1.0","eslint-plugin-simple-import-sort":"^12.1.1","jest":"^29.7.0","jest-environment-jsdom":"^30.0.2","ts-jest":"^29.2.5"},"dependencies":{"@types/events":"^3.0.3","bowser":"^2.11.0","clone-deep":"^4.0.1","events":"^3.3.0","typed-emitter":"^2.1.0","uuid":"^10.0.0"}}');var qi={},Fb={},qn={};De(qn,"RTVIError",()=>bt);De(qn,"ConnectionTimeoutError",()=>Bb);De(qn,"StartBotError",()=>_a);De(qn,"TransportStartError",()=>Op);De(qn,"BotNotReadyError",()=>Rp);De(qn,"UnsupportedFeatureError",()=>$b);class bt extends Error{constructor(t,n){super(t),this.status=n}}class Bb extends bt{constructor(t){super(t??"Bot did not enter ready state within the specified timeout period.")}}class _a extends bt{constructor(t,n){super(t??"Failed to connect / invalid auth bundle from base url",n??500),this.error="invalid-request-error"}}class Op extends bt{constructor(t){super(t??"Unable to connect to transport")}}class Rp extends bt{constructor(t){super(t??"Attempt to call action on transport when not in 'ready' state.")}}class $b extends bt{constructor(t,n,r){let s=`${t} not supported${r?`: ${r}`:""}`;n&&(s=`${n} does not support ${t}${r?`: ${r}`:""}`),super(s),this.feature=t}}var Lp={};De(Lp,"RTVIEvent",()=>Q);var Q;(function(e){e.Connected="connected",e.Disconnected="disconnected",e.TransportStateChanged="transportStateChanged",e.BotConnected="botConnected",e.BotReady="botReady",e.BotDisconnected="botDisconnected",e.Error="error",e.ServerMessage="serverMessage",e.ServerResponse="serverResponse",e.MessageError="messageError",e.Metrics="metrics",e.BotStartedSpeaking="botStartedSpeaking",e.BotStoppedSpeaking="botStoppedSpeaking",e.UserStartedSpeaking="userStartedSpeaking",e.UserStoppedSpeaking="userStoppedSpeaking",e.UserTranscript="userTranscript",e.BotTranscript="botTranscript",e.BotLlmText="botLlmText",e.BotLlmStarted="botLlmStarted",e.BotLlmStopped="botLlmStopped",e.LLMFunctionCall="llmFunctionCall",e.BotLlmSearchResponse="botLlmSearchResponse",e.BotTtsText="botTtsText",e.BotTtsStarted="botTtsStarted",e.BotTtsStopped="botTtsStopped",e.ParticipantConnected="participantConnected",e.ParticipantLeft="participantLeft",e.TrackStarted="trackStarted",e.TrackStopped="trackStopped",e.ScreenTrackStarted="screenTrackStarted",e.ScreenTrackStopped="screenTrackStopped",e.ScreenShareError="screenShareError",e.LocalAudioLevel="localAudioLevel",e.RemoteAudioLevel="remoteAudioLevel",e.AvailableCamsUpdated="availableCamsUpdated",e.AvailableMicsUpdated="availableMicsUpdated",e.AvailableSpeakersUpdated="availableSpeakersUpdated",e.CamUpdated="camUpdated",e.MicUpdated="micUpdated",e.SpeakerUpdated="speakerUpdated"})(Q||(Q={}));var Tr={};De(Tr,"RTVI_PROTOCOL_VERSION",()=>jp);De(Tr,"RTVI_MESSAGE_LABEL",()=>Dp);De(Tr,"RTVIMessageType",()=>ue);De(Tr,"setAboutClient",()=>Oc);De(Tr,"RTVIMessage",()=>wt);const jp="1.0.0",Dp="rtvi-ai";var ue;(function(e){e.CLIENT_READY="client-ready",e.DISCONNECT_BOT="disconnect-bot",e.CLIENT_MESSAGE="client-message",e.APPEND_TO_CONTEXT="append-to-context",e.BOT_READY="bot-ready",e.ERROR="error",e.METRICS="metrics",e.SERVER_MESSAGE="server-message",e.SERVER_RESPONSE="server-response",e.ERROR_RESPONSE="error-response",e.APPEND_TO_CONTEXT_RESULT="append-to-context-result",e.USER_TRANSCRIPTION="user-transcription",e.BOT_TRANSCRIPTION="bot-transcription",e.USER_STARTED_SPEAKING="user-started-speaking",e.USER_STOPPED_SPEAKING="user-stopped-speaking",e.BOT_STARTED_SPEAKING="bot-started-speaking",e.BOT_STOPPED_SPEAKING="bot-stopped-speaking",e.USER_LLM_TEXT="user-llm-text",e.BOT_LLM_TEXT="bot-llm-text",e.BOT_LLM_STARTED="bot-llm-started",e.BOT_LLM_STOPPED="bot-llm-stopped",e.LLM_FUNCTION_CALL="llm-function-call",e.LLM_FUNCTION_CALL_RESULT="llm-function-call-result",e.BOT_LLM_SEARCH_RESPONSE="bot-llm-search-response",e.BOT_TTS_TEXT="bot-tts-text",e.BOT_TTS_STARTED="bot-tts-started",e.BOT_TTS_STOPPED="bot-tts-stopped"})(ue||(ue={}));let Xr;function Oc(e){Xr?Xr={...Xr,...e}:Xr=e}class wt{constructor(t,n,r){this.label=Dp,this.type=t,this.data=n,this.id=r||Ab().slice(0,8)}static clientReady(){return new wt(ue.CLIENT_READY,{version:jp,about:Xr||{library:gr.name,library_version:gr.version}})}static disconnectBot(){return new wt(ue.DISCONNECT_BOT,{})}static error(t,n=!1){return new wt(ue.ERROR,{message:t,fatal:n})}}mn(qi,Fb);mn(qi,qn);mn(qi,Lp);mn(qi,Tr);function Hi(e,t,n){const r=n.value;return n.value=function(...s){if(this.state==="ready")return r.apply(this,s);throw new Rp(`Attempt to call ${t.toString()} when transport not in ready state. Await connect() first.`)},n}var Ip={};De(Ip,"MessageDispatcher",()=>Np);var Rc={};De(Rc,"LogLevel",()=>an);De(Rc,"logger",()=>ee);var an;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=1]="ERROR",e[e.WARN=2]="WARN",e[e.INFO=3]="INFO",e[e.DEBUG=4]="DEBUG"})(an||(an={}));class er{constructor(){this.level=an.DEBUG}static getInstance(){return er.instance||(er.instance=new er),er.instance}setLevel(t){this.level=t}debug(...t){this.level>=an.DEBUG&&console.debug(...t)}info(...t){this.level>=an.INFO&&console.info(...t)}warn(...t){this.level>=an.WARN&&console.warn(...t)}error(...t){this.level>=an.ERROR&&console.error(...t)}}const ee=er.getInstance();class Np{constructor(t){this._queue=new Array,this._gcInterval=void 0,this._queue=[],this._sendMethod=t}disconnect(){this.clearQueue(),clearInterval(this._gcInterval),this._gcInterval=void 0}dispatch(t,n=ue.CLIENT_MESSAGE,r=1e4){this._gcInterval||(this._gcInterval=setInterval(()=>{this._gc()},2e3));const s=new wt(n,t),i=new Promise((o,a)=>{this._queue.push({message:s,timestamp:Date.now(),timeout:r,resolve:o,reject:a})});ee.debug("[MessageDispatcher] dispatch",s);try{this._sendMethod(s)}catch(o){return ee.error("[MessageDispatcher] Error sending message",o),Promise.reject(o)}return this._gc(),i}clearQueue(){this._queue=[]}_resolveReject(t,n=!0){const r=this._queue.find(s=>s.message.id===t.id);return r&&(n?(ee.debug("[MessageDispatcher] Resolve",t),r.resolve(t)):(ee.debug("[MessageDispatcher] Reject",t),r.reject(t)),this._queue=this._queue.filter(s=>s.message.id!==t.id),ee.debug("[MessageDispatcher] Queue",this._queue)),t}resolve(t){return this._resolveReject(t,!0)}reject(t){return this._resolveReject(t,!1)}_gc(){const t=[];this._queue=this._queue.filter(n=>{const r=Date.now()-n.timestamp<n.timeout;return r||t.push(n),r}),t.forEach(n=>{n.message.type===ue.CLIENT_MESSAGE&&n.reject(new wt(ue.ERROR_RESPONSE,{error:"Timed out waiting for response",msgType:n.message.data.t,data:n.message.data.d,fatal:!1}))}),ee.debug("[MessageDispatcher] GC",this._queue)}}function Vb(e){return typeof e=="object"&&e!==null&&Object.keys(e).includes("endpoint")?typeof e.endpoint=="string":!1}async function Ub(e,t){t||(t=new AbortController);let n;return new Promise((r,s)=>{(async()=>(e.timeout&&(n=setTimeout(async()=>{t.abort(),s(new Error("Timed out"))},e.timeout)),ee.debug(`[Pipecat Client] Fetching connection params from ${e.endpoint}`),fetch(e.endpoint,{method:"POST",mode:"cors",headers:new Headers({"Content-Type":"application/json",...Object.fromEntries((e.headers??new Headers).entries())}),body:JSON.stringify(e.requestData),signal:t?.signal}).then(i=>{if(ee.debug(`[Pipecat Client] Received response from ${e.endpoint}`,i),!i.ok)throw i;i.json().then(o=>r(o))}).catch(i=>{ee.error(`[Pipecat Client] Error fetching connection params: ${i}`),i instanceof Response?i.json().then(o=>{s(new _a(o.info??o.detail??i.statusText,i.status))}):s(new _a)}).finally(()=>{n&&clearTimeout(n)})))()})}var Lc={};De(Lc,"Transport",()=>Fp);De(Lc,"TransportWrapper",()=>Bp);class Fp{constructor(){this._state="disconnected"}connect(t){this._abortController=new AbortController;let n=t;try{n=this._validateConnectionParams(t)}catch(r){throw new bt(`Invalid connection params: ${r.message}. Please check your connection params and try again.`)}return this._connect(n)}disconnect(){return this._abortController&&this._abortController.abort(),this._disconnect()}}class Bp{constructor(t){this._transport=t,this._proxy=new Proxy(this._transport,{get:(n,r,s)=>{if(typeof n[r]=="function"){let i;switch(String(r)){case"initialize":i="Direct calls to initialize() are disabled and used internally by the PipecatClient.";break;case"initDevices":i="Direct calls to initDevices() are disabled. Please use the PipecatClient.initDevices() wrapper or let PipecatClient.connect() call it for you.";break;case"sendReadyMessage":i="Direct calls to sendReadyMessage() are disabled and used internally by the PipecatClient.";break;case"connect":i="Direct calls to connect() are disabled. Please use the PipecatClient.connect() wrapper.";break;case"disconnect":i="Direct calls to disconnect() are disabled. Please use the PipecatClient.disconnect() wrapper.";break}return i?()=>{throw new Error(i)}:(...o)=>n[r](...o)}return Reflect.get(n,r,s)}})}get proxy(){return this._proxy}}function zb(){let e={library:gr.name,library_version:gr.version,platform_details:{}},t=null;if(window?.navigator?.userAgent)try{t=Ib.parse(window.navigator.userAgent)}catch{}return t?.browser?.name&&(e.platform_details.browser=t.browser.name),t?.browser?.name==="Safari"&&!t.browser.version?e.platform_details.browser_version="Web View":t?.browser?.version&&(e.platform_details.browser_version=t.browser.version),t?.platform?.type&&(e.platform_details.platform_type=t.platform.type),t?.engine?.name&&(e.platform_details.engine=t.engine.name),t?.os&&(e.platform=t.os.name,e.platform_version=t.os.version),e}var Gi=function(e,t,n,r){var s=arguments.length,i=s<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,n,i):o(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i};class Wb extends Cb{}class Mr extends Wb{constructor(t){super(),this._functionCallCallbacks={},Oc(zb()),this._transport=t.transport,this._transportWrapper=new Bp(this._transport);const n={...t.callbacks,onMessageError:r=>{t?.callbacks?.onMessageError?.(r),this.emit(Q.MessageError,r)},onError:r=>{t?.callbacks?.onError?.(r);try{this.emit(Q.Error,r)}catch{ee.debug("Could not emit error",r)}r.data?.fatal&&(ee.error("Fatal error reported. Disconnecting..."),this.disconnect())},onConnected:()=>{t?.callbacks?.onConnected?.(),this.emit(Q.Connected)},onDisconnected:()=>{t?.callbacks?.onDisconnected?.(),this.emit(Q.Disconnected)},onTransportStateChanged:r=>{t?.callbacks?.onTransportStateChanged?.(r),this.emit(Q.TransportStateChanged,r)},onParticipantJoined:r=>{t?.callbacks?.onParticipantJoined?.(r),this.emit(Q.ParticipantConnected,r)},onParticipantLeft:r=>{t?.callbacks?.onParticipantLeft?.(r),this.emit(Q.ParticipantLeft,r)},onTrackStarted:(r,s)=>{t?.callbacks?.onTrackStarted?.(r,s),this.emit(Q.TrackStarted,r,s)},onTrackStopped:(r,s)=>{t?.callbacks?.onTrackStopped?.(r,s),this.emit(Q.TrackStopped,r,s)},onScreenTrackStarted:(r,s)=>{t?.callbacks?.onScreenTrackStarted?.(r,s),this.emit(Q.ScreenTrackStarted,r,s)},onScreenTrackStopped:(r,s)=>{t?.callbacks?.onScreenTrackStopped?.(r,s),this.emit(Q.ScreenTrackStopped,r,s)},onScreenShareError:r=>{t?.callbacks?.onScreenShareError?.(r),this.emit(Q.ScreenShareError,r)},onAvailableCamsUpdated:r=>{t?.callbacks?.onAvailableCamsUpdated?.(r),this.emit(Q.AvailableCamsUpdated,r)},onAvailableMicsUpdated:r=>{t?.callbacks?.onAvailableMicsUpdated?.(r),this.emit(Q.AvailableMicsUpdated,r)},onAvailableSpeakersUpdated:r=>{t?.callbacks?.onAvailableSpeakersUpdated?.(r),this.emit(Q.AvailableSpeakersUpdated,r)},onCamUpdated:r=>{t?.callbacks?.onCamUpdated?.(r),this.emit(Q.CamUpdated,r)},onMicUpdated:r=>{t?.callbacks?.onMicUpdated?.(r),this.emit(Q.MicUpdated,r)},onSpeakerUpdated:r=>{t?.callbacks?.onSpeakerUpdated?.(r),this.emit(Q.SpeakerUpdated,r)},onBotConnected:r=>{t?.callbacks?.onBotConnected?.(r),this.emit(Q.BotConnected,r)},onBotReady:r=>{t?.callbacks?.onBotReady?.(r),this.emit(Q.BotReady,r)},onBotDisconnected:r=>{t?.callbacks?.onBotDisconnected?.(r),this.emit(Q.BotDisconnected,r)},onBotStartedSpeaking:()=>{t?.callbacks?.onBotStartedSpeaking?.(),this.emit(Q.BotStartedSpeaking)},onBotStoppedSpeaking:()=>{t?.callbacks?.onBotStoppedSpeaking?.(),this.emit(Q.BotStoppedSpeaking)},onRemoteAudioLevel:(r,s)=>{t?.callbacks?.onRemoteAudioLevel?.(r,s),this.emit(Q.RemoteAudioLevel,r,s)},onUserStartedSpeaking:()=>{t?.callbacks?.onUserStartedSpeaking?.(),this.emit(Q.UserStartedSpeaking)},onUserStoppedSpeaking:()=>{t?.callbacks?.onUserStoppedSpeaking?.(),this.emit(Q.UserStoppedSpeaking)},onLocalAudioLevel:r=>{t?.callbacks?.onLocalAudioLevel?.(r),this.emit(Q.LocalAudioLevel,r)},onUserTranscript:r=>{t?.callbacks?.onUserTranscript?.(r),this.emit(Q.UserTranscript,r)},onBotTranscript:r=>{t?.callbacks?.onBotTranscript?.(r),this.emit(Q.BotTranscript,r)},onBotLlmText:r=>{t?.callbacks?.onBotLlmText?.(r),this.emit(Q.BotLlmText,r)},onBotLlmStarted:()=>{t?.callbacks?.onBotLlmStarted?.(),this.emit(Q.BotLlmStarted)},onBotLlmStopped:()=>{t?.callbacks?.onBotLlmStopped?.(),this.emit(Q.BotLlmStopped)},onBotTtsText:r=>{t?.callbacks?.onBotTtsText?.(r),this.emit(Q.BotTtsText,r)},onBotTtsStarted:()=>{t?.callbacks?.onBotTtsStarted?.(),this.emit(Q.BotTtsStarted)},onBotTtsStopped:()=>{t?.callbacks?.onBotTtsStopped?.(),this.emit(Q.BotTtsStopped)}};this._options={...t,callbacks:n,enableMic:t.enableMic??!0,enableCam:t.enableCam??!1,enableScreenShare:t.enableScreenShare??!1},this._initialize(),ee.debug("[Pipecat Client] Initialized",this.version)}setLogLevel(t){ee.setLevel(t)}async initDevices(){ee.debug("[Pipecat Client] Initializing devices..."),await this._transport.initDevices()}async connect(t){if(["authenticating","connecting","connected","ready"].includes(this._transport.state))throw new bt("Voice client has already been started. Please call disconnect() before starting again.");return new Promise((n,r)=>{(async()=>{this._startResolve=n,this._transport.state==="disconnected"&&await this._transport.initDevices();try{let s;if(t)if(Vb(t)){if(this._transport.state="authenticating",this._abortController=new AbortController,s=await Ub(t,this._abortController),this._abortController?.signal.aborted)return;this._transport.state="authenticated"}else s=t;await this._transport.connect(s),await this._transport.sendReadyMessage()}catch(s){this.disconnect(),r(s);return}})()})}async disconnect(){await this._transport.disconnect(),this._messageDispatcher.disconnect()}_initialize(){this._transport.initialize(this._options,this.handleMessage.bind(this)),this._messageDispatcher=new Np(this._transport.sendMessage.bind(this._transport))}get connected(){return["connected","ready"].includes(this._transport.state)}get transport(){return this._transportWrapper.proxy}get state(){return this._transport.state}get version(){return Nb(gr).version}async getAllMics(){return await this._transport.getAllMics()}async getAllCams(){return await this._transport.getAllCams()}async getAllSpeakers(){return await this._transport.getAllSpeakers()}get selectedMic(){return this._transport.selectedMic}get selectedCam(){return this._transport.selectedCam}get selectedSpeaker(){return this._transport.selectedSpeaker}updateMic(t){this._transport.updateMic(t)}updateCam(t){this._transport.updateCam(t)}updateSpeaker(t){this._transport.updateSpeaker(t)}enableMic(t){this._transport.enableMic(t)}get isMicEnabled(){return this._transport.isMicEnabled}enableCam(t){this._transport.enableCam(t)}get isCamEnabled(){return this._transport.isCamEnabled}tracks(){return this._transport.tracks()}enableScreenShare(t){return this._transport.enableScreenShare(t)}get isSharingScreen(){return this._transport.isSharingScreen}sendClientMessage(t,n){this._transport.sendMessage(new wt(ue.CLIENT_MESSAGE,{t,d:n}))}async sendClientRequest(t,n,r){const s={t,d:n};return(await this._messageDispatcher.dispatch(s,ue.CLIENT_MESSAGE,r)).data.d}registerFunctionCallHandler(t,n){this._functionCallCallbacks[t]=n}async appendToContext(t){return!!(await this._messageDispatcher.dispatch({role:t.role,content:t.content,run_immediately:t.run_immediately},ue.APPEND_TO_CONTEXT)).data.result}disconnectBot(){this._transport.sendMessage(new wt(ue.DISCONNECT_BOT,{}))}handleMessage(t){switch(ee.debug("[RTVI Message]",t),t.type){case ue.BOT_READY:{const n=t.data,r=n.version?n.version.split(".").map(Number):[0,0,0];ee.debug(`[Pipecat Client] Bot is ready. Version: ${n.version}`),r[0]<1&&ee.warn("[Pipecat Client] Bot version is less than 1.0.0, which may not be compatible with this client."),this._startResolve?.(t.data),this._options.callbacks?.onBotReady?.(t.data);break}case ue.ERROR:this._options.callbacks?.onError?.(t);break;case ue.SERVER_RESPONSE:this._messageDispatcher.resolve(t);break;case ue.ERROR_RESPONSE:{const n=this._messageDispatcher.reject(t);this._options.callbacks?.onMessageError?.(n);break}case ue.USER_STARTED_SPEAKING:this._options.callbacks?.onUserStartedSpeaking?.();break;case ue.USER_STOPPED_SPEAKING:this._options.callbacks?.onUserStoppedSpeaking?.();break;case ue.BOT_STARTED_SPEAKING:this._options.callbacks?.onBotStartedSpeaking?.();break;case ue.BOT_STOPPED_SPEAKING:this._options.callbacks?.onBotStoppedSpeaking?.();break;case ue.USER_TRANSCRIPTION:{const n=t.data;this._options.callbacks?.onUserTranscript?.(n);break}case ue.BOT_TRANSCRIPTION:this._options.callbacks?.onBotTranscript?.(t.data);break;case ue.BOT_LLM_TEXT:this._options.callbacks?.onBotLlmText?.(t.data);break;case ue.BOT_LLM_STARTED:this._options.callbacks?.onBotLlmStarted?.();break;case ue.BOT_LLM_STOPPED:this._options.callbacks?.onBotLlmStopped?.();break;case ue.BOT_TTS_TEXT:this._options.callbacks?.onBotTtsText?.(t.data);break;case ue.BOT_TTS_STARTED:this._options.callbacks?.onBotTtsStarted?.();break;case ue.BOT_TTS_STOPPED:this._options.callbacks?.onBotTtsStopped?.();break;case ue.METRICS:this._options.callbacks?.onMetrics?.(t.data),this.emit(Q.Metrics,t.data);break;case ue.APPEND_TO_CONTEXT_RESULT:case ue.SERVER_MESSAGE:this._options.callbacks?.onServerMessage?.(t.data),this.emit(Q.ServerMessage,t.data);break;case ue.LLM_FUNCTION_CALL:{const n=t.data,r=this._functionCallCallbacks[n.function_name];if(r){const s={functionName:n.function_name,arguments:n.args};r(s).then(i=>{this._transport.sendMessage(new wt(ue.LLM_FUNCTION_CALL_RESULT,{function_name:n.function_name,tool_call_id:n.tool_call_id,arguments:n.args,result:i}))})}break}case ue.BOT_LLM_SEARCH_RESPONSE:{const n=t.data;this._options.callbacks?.onBotLlmSearchResponse?.(n),this.emit(Q.BotLlmSearchResponse,n);break}default:ee.debug("[Pipecat Client] Unrecognized message type",t.type);break}}}Gi([Hi],Mr.prototype,"sendClientMessage",null);Gi([Hi],Mr.prototype,"sendClientRequest",null);Gi([Hi],Mr.prototype,"appendToContext",null);Gi([Hi],Mr.prototype,"disconnectBot",null);mn(Wi,Ap);mn(Wi,Ip);mn(Wi,Rc);mn(Wi,Lc);const Qr={},ou=(e,t)=>e.unstable_is?e.unstable_is(t):t===e,au=e=>"init"in e,bo=e=>!!e.write,cu=e=>"v"in e||"e"in e,Is=e=>{if("e"in e)throw e.e;if((Qr?"production":void 0)!=="production"&&!("v"in e))throw new Error("[Bug] atom state is not initialized");return e.v},_i=new WeakMap,lu=e=>{var t;return ki(e)&&!!((t=_i.get(e))!=null&&t[0])},qb=e=>{const t=_i.get(e);t?.[0]&&(t[0]=!1,t[1].forEach(n=>n()))},$p=(e,t)=>{let n=_i.get(e);if(!n){n=[!0,new Set],_i.set(e,n);const r=()=>{n[0]=!1};e.then(r,r)}n[1].add(t)},ki=e=>typeof e?.then=="function",Vp=(e,t,n)=>{n.p.has(e)||(n.p.add(e),t.then(()=>{n.p.delete(e)},()=>{n.p.delete(e)}))},wo=(e,t,n)=>{const r=n(e),s="v"in r,i=r.v;if(ki(t))for(const o of r.d.keys())Vp(e,t,n(o));r.v=t,delete r.e,(!s||!Object.is(i,r.v))&&(++r.n,ki(i)&&qb(i))},uu=(e,t,n)=>{var r;const s=new Set;for(const i of((r=n.get(e))==null?void 0:r.t)||[])n.has(i)&&s.add(i);for(const i of t.p)s.add(i);return s},Hb=()=>{const e=new Set,t=()=>{e.forEach(n=>n())};return t.add=n=>(e.add(n),()=>{e.delete(n)}),t},xo=()=>{const e={},t=new WeakMap,n=r=>{var s,i;(s=t.get(e))==null||s.forEach(o=>o(r)),(i=t.get(r))==null||i.forEach(o=>o())};return n.add=(r,s)=>{const i=r||e,o=(t.has(i)?t:t.set(i,new Set)).get(i);return o.add(s),()=>{o?.delete(s),o.size||t.delete(i)}},n},Gb=e=>(e.c||(e.c=xo()),e.m||(e.m=xo()),e.u||(e.u=xo()),e.f||(e.f=Hb()),e),Jb=Symbol(),Kb=(e=new WeakMap,t=new WeakMap,n=new WeakMap,r=new Set,s=new Set,i=new Set,o={},a=(h,...p)=>h.read(...p),c=(h,...p)=>h.write(...p),l=(h,p)=>{var g;return(g=h.unstable_onInit)==null?void 0:g.call(h,p)},u=(h,p)=>{var g;return(g=h.onMount)==null?void 0:g.call(h,p)},...f)=>{const h=f[0]||(k=>{if((Qr?"production":void 0)!=="production"&&!k)throw new Error("Atom is undefined or null");let P=e.get(k);return P||(P={d:new Map,p:new Set,n:0},e.set(k,P),l?.(k,O)),P}),p=f[1]||(()=>{const k=[],P=L=>{try{L()}catch(j){k.push(j)}};do{o.f&&P(o.f);const L=new Set,j=L.add.bind(L);r.forEach(N=>{var U;return(U=t.get(N))==null?void 0:U.l.forEach(j)}),r.clear(),i.forEach(j),i.clear(),s.forEach(j),s.clear(),L.forEach(P),r.size&&g()}while(r.size||i.size||s.size);if(k.length)throw new AggregateError(k)}),g=f[2]||(()=>{const k=[],P=new WeakSet,L=new WeakSet,j=Array.from(r);for(;j.length;){const N=j[j.length-1],U=h(N);if(L.has(N)){j.pop();continue}if(P.has(N)){if(n.get(N)===U.n)k.push([N,U]);else if((Qr?"production":void 0)!=="production"&&n.has(N))throw new Error("[Bug] invalidated atom exists");L.add(N),j.pop();continue}P.add(N);for(const H of uu(N,U,t))P.has(H)||j.push(H)}for(let N=k.length-1;N>=0;--N){const[U,H]=k[N];let V=!1;for(const G of H.d.keys())if(G!==U&&r.has(G)){V=!0;break}V&&(y(U),M(U)),n.delete(U)}}),y=f[3]||(k=>{var P;const L=h(k);if(cu(L)&&(t.has(k)&&n.get(k)!==L.n||Array.from(L.d).every(([q,I])=>y(q).n===I)))return L;L.d.clear();let j=!0;const N=()=>{t.has(k)&&(M(k),g(),p())},U=q=>{var I;if(ou(k,q)){const F=h(q);if(!cu(F))if(au(q))wo(q,q.init,h);else throw new Error("no atom init");return Is(F)}const ne=y(q);try{return Is(ne)}finally{L.d.set(q,ne.n),lu(L.v)&&Vp(k,L.v,ne),(I=t.get(q))==null||I.t.add(k),j||N()}};let H,V;const G={get signal(){return H||(H=new AbortController),H.signal},get setSelf(){return(Qr?"production":void 0)!=="production"&&!bo(k)&&console.warn("setSelf function cannot be used with read-only atom"),!V&&bo(k)&&(V=(...q)=>{if((Qr?"production":void 0)!=="production"&&j&&console.warn("setSelf function cannot be called in sync"),!j)try{return w(k,...q)}finally{g(),p()}}),V}},X=L.n;try{const q=a(k,U,G);return wo(k,q,h),ki(q)&&($p(q,()=>H?.abort()),q.then(N,N)),L}catch(q){return delete L.v,L.e=q,++L.n,L}finally{j=!1,X!==L.n&&n.get(k)===X&&(n.set(k,L.n),r.add(k),(P=o.c)==null||P.call(o,k))}}),b=f[4]||(k=>{const P=[k];for(;P.length;){const L=P.pop(),j=h(L);for(const N of uu(L,j,t)){const U=h(N);n.set(N,U.n),P.push(N)}}}),w=f[5]||((k,...P)=>{let L=!0;const j=U=>Is(y(U)),N=(U,...H)=>{var V;const G=h(U);try{if(ou(k,U)){if(!au(U))throw new Error("atom not writable");const X=G.n,q=H[0];wo(U,q,h),M(U),X!==G.n&&(r.add(U),(V=o.c)==null||V.call(o,U),b(U));return}else return w(U,...H)}finally{L||(g(),p())}};try{return c(k,j,N,...P)}finally{L=!1}}),M=f[6]||(k=>{var P;const L=h(k),j=t.get(k);if(j&&!lu(L.v)){for(const[N,U]of L.d)if(!j.d.has(N)){const H=h(N);C(N).t.add(k),j.d.add(N),U!==H.n&&(r.add(N),(P=o.c)==null||P.call(o,N),b(N))}for(const N of j.d||[])if(!L.d.has(N)){j.d.delete(N);const U=S(N);U?.t.delete(k)}}}),C=f[7]||(k=>{var P;const L=h(k);let j=t.get(k);if(!j){y(k);for(const N of L.d.keys())C(N).t.add(k);if(j={l:new Set,d:new Set(L.d.keys()),t:new Set},t.set(k,j),(P=o.m)==null||P.call(o,k),bo(k)){const N=()=>{let U=!0;const H=(...V)=>{try{return w(k,...V)}finally{U||(g(),p())}};try{const V=u(k,H);V&&(j.u=()=>{U=!0;try{V()}finally{U=!1}})}finally{U=!1}};s.add(N)}}return j}),S=f[8]||(k=>{var P;const L=h(k);let j=t.get(k);if(j&&!j.l.size&&!Array.from(j.t).some(N=>{var U;return(U=t.get(N))==null?void 0:U.d.has(k)})){j.u&&i.add(j.u),j=void 0,t.delete(k),(P=o.u)==null||P.call(o,k);for(const N of L.d.keys()){const U=S(N);U?.t.delete(k)}return}return j}),_=[e,t,n,r,s,i,o,a,c,l,u,h,p,g,y,b,w,M,C,S],O={get:k=>Is(y(k)),set:(k,...P)=>{try{return w(k,...P)}finally{g(),p()}},sub:(k,P)=>{const j=C(k).l;return j.add(P),p(),()=>{j.delete(P),S(k),p()}}};return Object.defineProperty(O,Jb,{value:_}),O},Up=Kb,Yb=Gb,du=$p,jc={};let Xb=0;function nt(e,t){const n=`atom${++Xb}`,r={toString(){return(jc?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof e=="function"?r.read=e:(r.init=e,r.read=Qb,r.write=Zb),t&&(r.write=t),r}function Qb(e){return e(this)}function Zb(e,t,n){return t(this,typeof n=="function"?n(e(this)):n)}const ew=()=>{let e=0;const t=Yb({}),n=new WeakMap,r=new WeakMap,s=Up(n,r,void 0,void 0,void 0,void 0,t,void 0,(a,c,l,...u)=>e?l(a,...u):a.write(c,l,...u)),i=new Set;return t.m.add(void 0,a=>{i.add(a);const c=n.get(a);c.m=r.get(a)}),t.u.add(void 0,a=>{i.delete(a);const c=n.get(a);delete c.m}),Object.assign(s,{dev4_get_internal_weak_map:()=>(console.log("Deprecated: Use devstore from the devtools library"),n),dev4_get_mounted_atoms:()=>i,dev4_restore_atoms:a=>{const c={read:()=>null,write:(l,u)=>{++e;try{for(const[f,h]of a)"init"in f&&u(f,h)}finally{--e}}};s.set(c)}})};function Dc(){return(jc?"production":void 0)!=="production"?ew():Up()}let Hr;function tw(){return Hr||(Hr=Dc(),(jc?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=Hr),globalThis.__JOTAI_DEFAULT_STORE__!==Hr&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),Hr}const nw={},zp=R.createContext(void 0);function Wp(e){const t=R.useContext(zp);return e?.store||t||tw()}function rw({children:e,store:t}){const n=R.useRef(void 0);return!t&&!n.current&&(n.current=Dc()),R.createElement(zp.Provider,{value:t||n.current},e)}const ka=e=>typeof e?.then=="function",Ca=e=>{e.status||(e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}))},sw=R.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(Ca(e),e)}),So=new WeakMap,fu=(e,t)=>{let n=So.get(e);return n||(n=new Promise((r,s)=>{let i=e;const o=l=>u=>{i===l&&r(u)},a=l=>u=>{i===l&&s(u)},c=()=>{try{const l=t();ka(l)?(So.set(l,n),i=l,l.then(o(l),a(l)),du(l,c)):r(l)}catch(l){s(l)}};e.then(o(e),a(e)),du(e,c)}),So.set(e,n)),n};function Mn(e,t){const{delay:n,unstable_promiseStatus:r=!R.use}=t||{},s=Wp(t),[[i,o,a],c]=R.useReducer(u=>{const f=s.get(e);return Object.is(u[0],f)&&u[1]===s&&u[2]===e?u:[f,s,e]},void 0,()=>[s.get(e),s,e]);let l=i;if((o!==s||a!==e)&&(c(),l=s.get(e)),R.useEffect(()=>{const u=s.sub(e,()=>{if(r)try{const f=s.get(e);ka(f)&&Ca(fu(f,()=>s.get(e)))}catch{}if(typeof n=="number"){setTimeout(c,n);return}c()});return c(),u},[s,e,n,r]),R.useDebugValue(l),ka(l)){const u=fu(l,()=>s.get(e));return r&&Ca(u),sw(u)}return l}function iw(e,t){const n=Wp(t);return R.useCallback((...s)=>{if((nw?"production":void 0)!=="production"&&!("write"in e))throw new Error("not writable atom");return n.set(e,...s)},[n,e])}const ow={};function aw(e,t){let n=null;const r=new Map,s=new Set,i=a=>{let c;if(t===void 0)c=r.get(a);else for(const[u,f]of r)if(t(u,a)){c=f;break}if(c!==void 0)if(n?.(c[1],a))i.remove(a);else return c[0];const l=e(a);return r.set(a,[l,Date.now()]),o("CREATE",a,l),l},o=(a,c,l)=>{for(const u of s)u({type:a,param:c,atom:l})};return i.unstable_listen=a=>(s.add(a),()=>{s.delete(a)}),i.getParams=()=>r.keys(),i.remove=a=>{if(t===void 0){if(!r.has(a))return;const[c]=r.get(a);r.delete(a),o("REMOVE",a,c)}else for(const[c,[l]]of r)if(t(c,a)){r.delete(c),o("REMOVE",c,l);break}},i.setShouldRemove=a=>{if(n=a,!!n)for(const[c,[l,u]]of r)n(u,c)&&(r.delete(c),o("REMOVE",c,l))},i}const cw=e=>typeof e?.then=="function";function lw(e=()=>{try{return window.localStorage}catch(n){(ow?"production":void 0)!=="production"&&typeof window<"u"&&console.warn(n);return}},t){var n;let r,s;const i={getItem:(c,l)=>{var u,f;const h=g=>{if(g=g||"",r!==g){try{s=JSON.parse(g,t?.reviver)}catch{return l}r=g}return s},p=(f=(u=e())==null?void 0:u.getItem(c))!=null?f:null;return cw(p)?p.then(h):h(p)},setItem:(c,l)=>{var u;return(u=e())==null?void 0:u.setItem(c,JSON.stringify(l,void 0))},removeItem:c=>{var l;return(l=e())==null?void 0:l.removeItem(c)}},o=c=>(l,u,f)=>c(l,h=>{let p;try{p=JSON.parse(h||"")}catch{p=f}u(p)});let a;try{a=(n=e())==null?void 0:n.subscribe}catch{}return!a&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(a=(c,l)=>{if(!(e()instanceof window.Storage))return()=>{};const u=f=>{f.storageArea===e()&&f.key===c&&l(f.newValue)};return window.addEventListener("storage",u),()=>{window.removeEventListener("storage",u)}}),a&&(i.subscribe=o(a)),i}lw();function tn(e,t){const n=R.useMemo(()=>nt(null,(r,s,...i)=>e(r,s,...i)),[e]);return iw(n,t)}var Ea={};Ea=JSON.parse(`{"name":"@pipecat-ai/client-react","version":"1.0.1","license":"BSD-2-Clause","main":"dist/index.js","module":"dist/index.module.js","types":"dist/index.d.ts","source":"src/index.ts","repository":{"type":"git","url":"git+https://github.com/pipecat-ai/pipecat-client-web.git"},"files":["dist","package.json","README.md"],"scripts":{"build":"parcel build --no-cache","dev":"parcel watch","lint":"eslint . --report-unused-disable-directives --max-warnings 0 --ignore-pattern 'dist/'"},"devDependencies":{"@pipecat-ai/client-js":"*","@types/react":"^18.3.3","@types/react-dom":"^18.3.0","@typescript-eslint/eslint-plugin":"^8.32.0","eslint":"^9.11.1","eslint-config-prettier":"^9.1.0","eslint-plugin-react-hooks":"^5.2.0","eslint-plugin-simple-import-sort":"^12.1.1","parcel":"^2.12.0","react":"^18.3.1","react-dom":"^18.3.1","typescript":"^5.2.2"},"peerDependencies":{"@pipecat-ai/client-js":"*","react":">=18","react-dom":">=18"},"dependencies":{"jotai":"^2.9.0"}}`);const qp=R.createContext({on:()=>{},off:()=>{}}),$e=(e,t)=>{const{on:n,off:r}=R.useContext(qp);R.useEffect(()=>(n(e,t),()=>{r(e,t)}),[e,t,n,r])},uw=R.createContext({enableCam:()=>{throw new Error("PipecatClientCamStateContext: enableCam() called outside of provider")},isCamEnabled:!1}),Hp=R.createContext({enableMic:()=>{throw new Error("PipecatClientMicStateContext: enableMic() called outside of provider")},isMicEnabled:!1}),Gp=R.createContext("disconnected"),dw=({children:e})=>{const t=Ji(),[n,r]=R.useState(!1),[s,i]=R.useState(!1),[o,a]=R.useState("disconnected");$e(Q.TransportStateChanged,u=>{a(u),u==="initialized"&&t&&(r(t.isCamEnabled??!1),i(t.isMicEnabled??!1))});const c=R.useCallback(u=>{r(u),t?.enableCam?.(u)},[t]),l=R.useCallback(u=>{i(u),t?.enableMic?.(u)},[t]);return x.jsx(Gp.Provider,{value:o,children:x.jsx(uw.Provider,{value:{enableCam:c,isCamEnabled:n},children:x.jsx(Hp.Provider,{value:{enableMic:l,isMicEnabled:s},children:e})})})},fw=Dc(),Jp=R.createContext({}),Kp=({children:e,client:t,jotaiStore:n=fw})=>{R.useEffect(()=>{Oc({library:Ea.name,library_version:Ea.version})},[]);const r=R.useRef({});R.useEffect(()=>{if(!t)return;const o=Object.values(Q).filter(c=>isNaN(Number(c))),a={};return o.forEach(c=>{const l=(...u)=>{const f=r.current[c];f&&f.forEach(h=>{h(...u)})};a[c]=l,t.on(c,l)}),()=>{o.forEach(c=>{t.off(c,a[c])})}},[t]);const s=R.useCallback((o,a)=>{r.current[o]||(r.current[o]=new Set),r.current[o].add(a)},[]),i=R.useCallback((o,a)=>{r.current[o]?.delete(a)},[]);return x.jsx(rw,{store:n,children:x.jsx(Jp.Provider,{value:{client:t},children:x.jsx(qp.Provider,{value:{on:s,off:i},children:x.jsx(dw,{children:e})})})})};Kp.displayName="PipecatClientProvider";const Ji=()=>{const{client:e}=R.useContext(Jp);return e},hw=nt(null),pw=nt(null),mw=nt(null),gw=nt(null),vw=nt(null),yw=nt(null),hu=aw(({local:e,trackType:t})=>{if(e)switch(t){case"audio":return hw;case"screenAudio":return mw;case"screenVideo":return gw;case"video":return pw}return t==="audio"?vw:yw}),Ic=(e,t)=>{const n=Ji(),r=Mn(hu({local:t==="local",trackType:e})),s=tn(R.useCallback((i,o,a,c,l)=>{const u=hu({local:l,trackType:c});i(u)?.id!==a.id&&o(u,a)},[]));return $e(Q.TrackStarted,R.useCallback((i,o)=>{s(i,i.kind,!!o?.local)},[s])),$e(Q.ScreenTrackStarted,R.useCallback((i,o)=>{const a=i.kind==="audio"?"screenAudio":"screenVideo";s(i,a,!!o?.local)},[s])),R.useEffect(()=>{if(!n)return;const o=n.tracks()?.[t]?.[e];o&&s(o,e,t==="local")},[t,e,s,n]),r},Yp=()=>{const e=R.useRef(null),t=Ic("audio","bot");return R.useEffect(()=>{!e.current||!t||e.current.srcObject&&e.current.srcObject.getAudioTracks()[0].id===t.id||(e.current.srcObject=new MediaStream([t]))},[t]),$e(Q.SpeakerUpdated,R.useCallback(n=>{e.current&&typeof e.current.setSinkId=="function"&&e.current.setSinkId(n.deviceId)},[])),x.jsx(x.Fragment,{children:x.jsx("audio",{ref:e,autoPlay:!0})})};Yp.displayName="PipecatClientAudio";const bw=()=>R.useContext(Hp),ww=({onMicEnabledChanged:e,disabled:t=!1,children:n})=>{const{enableMic:r,isMicEnabled:s}=bw(),i=R.useCallback(()=>{if(t)return;const o=!s;r(o),e?.(o)},[t,r,s,e]);return x.jsx(x.Fragment,{children:n({isMicEnabled:s,onClick:i,disabled:t})})};function xw(...e){return R.useCallback(t=>{for(let n=0;n<e.length;n++){const r=e[n];typeof r=="function"?r(t):r&&typeof r=="object"&&(r.current=t)}},e)}var Sw=xw;const _w=R.forwardRef(function({participant:t="local",fit:n="contain",mirror:r,onResize:s,style:i={},trackType:o="video",...a},c){const l=Ic(o,t),u=R.useRef(null),f=Sw(u,c);return R.useEffect(function(){const p=u.current;if(!p)return;const g=()=>{const C=p.play();C!==void 0&&C.then(()=>{p.controls=!1}).catch(S=>{p.controls=!0,console.warn("Failed to play video",S)})},y=()=>{p.paused&&g()},b=()=>{p.style.transform="scale(1)"},w=()=>{p.style.transform="",setTimeout(()=>{p.paused&&g()},100)},M=()=>{document.visibilityState!=="hidden"&&p.paused&&g()};return p.addEventListener("canplay",y),p.addEventListener("enterpictureinpicture",b),p.addEventListener("leavepictureinpicture",w),document.addEventListener("visibilitychange",M),()=>{p.removeEventListener("canplay",y),p.removeEventListener("enterpictureinpicture",b),p.removeEventListener("leavepictureinpicture",w),document.removeEventListener("visibilitychange",M)}},[]),R.useEffect(function(){const p=u.current;if(!(!p||!l))return p.srcObject=new MediaStream([l]),p.load(),()=>{p.srcObject=null,p.load()}},[l,l?.id]),R.useEffect(function(){const p=u.current;if(!s||!p)return;let g;function y(){g&&cancelAnimationFrame(g),g=requestAnimationFrame(()=>{const b=u.current;if(!b||document.hidden)return;const w=b.videoWidth,M=b.videoHeight;w&&M&&s?.({aspectRatio:w/M,height:M,width:w})})}return y(),p.addEventListener("loadedmetadata",y),p.addEventListener("resize",y),()=>{g&&cancelAnimationFrame(g),p.removeEventListener("loadedmetadata",y),p.removeEventListener("resize",y)}},[s]),x.jsx("video",{autoPlay:!0,muted:!0,playsInline:!0,ref:f,style:{objectFit:n,transform:r?"scale(-1, 1)":"",...i},...a})});_w.displayName="PipecatClientVideo";const _o=nt([]),ko=nt([]),Co=nt([]),Eo=nt({}),To=nt({}),Mo=nt({}),kw=()=>{const e=Ji(),t=Mn(ko),n=Mn(_o),r=Mn(Co),s=Mn(To),i=Mn(Eo),o=Mn(Mo),a=tn(R.useCallback(async(f,h)=>{if(!e)return;const p=await e.getAllCams(),g=await e.getAllMics(),y=await e.getAllSpeakers();h(ko,p),h(_o,g),h(Co,y),h(To,e.selectedCam),h(Eo,e.selectedMic),h(Mo,e.selectedSpeaker)},[e]));R.useEffect(()=>{a()},[a]),$e(Q.AvailableCamsUpdated,tn(R.useCallback((f,h,p)=>{h(ko,p)},[]))),$e(Q.AvailableMicsUpdated,tn(R.useCallback((f,h,p)=>{h(_o,p)},[]))),$e(Q.AvailableSpeakersUpdated,tn(R.useCallback((f,h,p)=>{h(Co,p)},[]))),$e(Q.CamUpdated,tn(R.useCallback((f,h,p)=>{h(To,p)},[]))),$e(Q.MicUpdated,tn(R.useCallback((f,h,p)=>{h(Eo,p)},[]))),$e(Q.SpeakerUpdated,tn(R.useCallback((f,h,p)=>{h(Mo,p)},[])));const c=R.useCallback(f=>{e?.updateCam(f)},[e]),l=R.useCallback(f=>{e?.updateMic(f)},[e]),u=R.useCallback(f=>{e?.updateSpeaker(f)},[e]);return{availableCams:t,availableMics:n,availableSpeakers:r,selectedCam:s,selectedMic:i,selectedSpeaker:o,updateCam:c,updateMic:l,updateSpeaker:u}},Xp=()=>R.useContext(Gp),Qp=R.memo(({backgroundColor:e="transparent",barColor:t="black",barCount:n=5,barGap:r=12,barLineCap:s="round",barMaxHeight:i=120,barOrigin:o="center",barWidth:a=30,participantType:c})=>{const l=R.useRef(null),u=Ic("audio",c);return R.useEffect(()=>{if(!l.current)return;const f=n*a+(n-1)*r,h=i,p=l.current,g=2,y=()=>{p.width=f*g,p.height=h*g,p.style.width=`${f}px`,p.style.height=`${h}px`,b.lineCap=s,b.scale(g,g)},b=p.getContext("2d");if(y(),!u)return;const w=new AudioContext,M=w.createMediaStreamSource(new MediaStream([u])),C=w.createAnalyser();C.fftSize=1024,M.connect(C);const S=new Uint8Array(C.frequencyBinCount);b.lineCap=s;const _=Array.from({length:n},(j,N)=>{const U=n>20?200:80,H=1e4,V=2595*Math.log10(1+U/700),X=(2595*Math.log10(1+H/700)-V)/n,q=V+N*X,I=700*(Math.pow(10,q/2595)-1),ne=700*(Math.pow(10,(q+X)/2595)-1);return{startFreq:I,endFreq:ne,smoothValue:0}}),O=j=>{const N=w.sampleRate/2;return Math.round(j/N*(C.frequencyBinCount-1))};function k(){C.getByteFrequencyData(S),b.clearRect(0,0,p.width/g,p.height/g),b.fillStyle=e,b.fillRect(0,0,p.width/g,p.height/g);let j=!1;const N=_.length*a+(_.length-1)*r,U=(p.width/g-N)/2,H=a/2;_.forEach((V,G)=>{const X=O(V.startFreq),q=O(V.endFreq),I=S.slice(X,q),ne=I.reduce((T,D)=>T+D,0)/I.length,F=.2;ne<1?V.smoothValue=Math.max(V.smoothValue-F*5,0):(V.smoothValue=V.smoothValue+(ne-V.smoothValue)*F,j=!0);const te=U+G*(a+r),d=Math.max(0,Math.min(V.smoothValue/255*i,i));let v,m;const E=p.height/g;switch(o){case"top":v=H,m=Math.min(H+d,E-H);break;case"bottom":m=E-H,v=Math.max(m-d,H);break;case"center":default:v=Math.max(E/2-d/2,H),m=Math.min(E/2+d/2,E-H);break}V.smoothValue>0?(b.beginPath(),b.moveTo(te+a/2,v),b.lineTo(te+a/2,m),b.lineWidth=a,b.strokeStyle=t,b.stroke()):P(H,t,te,v)}),j||L(H,t),requestAnimationFrame(k)}function P(j,N,U,H){switch(s){case"square":b.fillStyle=N,b.fillRect(U+a/2-j,H-j,j*2,j*2);break;case"round":default:b.beginPath(),b.arc(U+a/2,H,j,0,2*Math.PI),b.fillStyle=N,b.fill(),b.closePath();break}}function L(j,N){const U=_.length*a+(_.length-1)*r,H=(p.width/g-U)/2,V=p.height/g;let G;switch(o){case"top":G=j;break;case"bottom":G=V-j;break;case"center":default:G=V/2;break}_.forEach((X,q)=>{const I=H+q*(a+r);P(j,N,I,G)})}return k(),window.addEventListener("resize",y),()=>{w.close(),window.removeEventListener("resize",y)}},[e,t,n,r,s,i,o,a,u]),x.jsx("canvas",{ref:l,style:{display:"block",width:"100%",height:"100%"}})});Qp.displayName="VoiceVisualizer";var Cw="1.3.8";function Zp(e,t,n){return Math.max(e,Math.min(t,n))}function Ew(e,t,n){return(1-n)*e+n*t}function Tw(e,t,n,r){return Ew(e,t,1-Math.exp(-n*r))}function Mw(e,t){return(e%t+t)%t}var Pw=class{isRunning=!1;value=0;from=0;to=0;currentTime=0;lerp;duration;easing;onUpdate;advance(e){if(!this.isRunning)return;let t=!1;if(this.duration&&this.easing){this.currentTime+=e;const n=Zp(0,this.currentTime/this.duration,1);t=n>=1;const r=t?1:this.easing(n);this.value=this.from+(this.to-this.from)*r}else this.lerp?(this.value=Tw(this.value,this.to,this.lerp*60,e),Math.round(this.value)===this.to&&(this.value=this.to,t=!0)):(this.value=this.to,t=!0);t&&this.stop(),this.onUpdate?.(this.value,t)}stop(){this.isRunning=!1}fromTo(e,t,{lerp:n,duration:r,easing:s,onStart:i,onUpdate:o}){this.from=this.value=e,this.to=t,this.lerp=n,this.duration=r,this.easing=s,this.currentTime=0,this.isRunning=!0,i?.(),this.onUpdate=o}};function Aw(e,t){let n;return function(...r){let s=this;clearTimeout(n),n=setTimeout(()=>{n=void 0,e.apply(s,r)},t)}}var Ow=class{constructor(e,t,{autoResize:n=!0,debounce:r=250}={}){this.wrapper=e,this.content=t,n&&(this.debouncedResize=Aw(this.resize,r),this.wrapper instanceof Window?window.addEventListener("resize",this.debouncedResize,!1):(this.wrapperResizeObserver=new ResizeObserver(this.debouncedResize),this.wrapperResizeObserver.observe(this.wrapper)),this.contentResizeObserver=new ResizeObserver(this.debouncedResize),this.contentResizeObserver.observe(this.content)),this.resize()}width=0;height=0;scrollHeight=0;scrollWidth=0;debouncedResize;wrapperResizeObserver;contentResizeObserver;destroy(){this.wrapperResizeObserver?.disconnect(),this.contentResizeObserver?.disconnect(),this.wrapper===window&&this.debouncedResize&&window.removeEventListener("resize",this.debouncedResize,!1)}resize=()=>{this.onWrapperResize(),this.onContentResize()};onWrapperResize=()=>{this.wrapper instanceof Window?(this.width=window.innerWidth,this.height=window.innerHeight):(this.width=this.wrapper.clientWidth,this.height=this.wrapper.clientHeight)};onContentResize=()=>{this.wrapper instanceof Window?(this.scrollHeight=this.content.scrollHeight,this.scrollWidth=this.content.scrollWidth):(this.scrollHeight=this.wrapper.scrollHeight,this.scrollWidth=this.wrapper.scrollWidth)};get limit(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}},em=class{events={};emit(e,...t){let n=this.events[e]||[];for(let r=0,s=n.length;r<s;r++)n[r]?.(...t)}on(e,t){return this.events[e]?.push(t)||(this.events[e]=[t]),()=>{this.events[e]=this.events[e]?.filter(n=>t!==n)}}off(e,t){this.events[e]=this.events[e]?.filter(n=>t!==n)}destroy(){this.events={}}},pu=100/6,Yt={passive:!1},Rw=class{constructor(e,t={wheelMultiplier:1,touchMultiplier:1}){this.element=e,this.options=t,window.addEventListener("resize",this.onWindowResize,!1),this.onWindowResize(),this.element.addEventListener("wheel",this.onWheel,Yt),this.element.addEventListener("touchstart",this.onTouchStart,Yt),this.element.addEventListener("touchmove",this.onTouchMove,Yt),this.element.addEventListener("touchend",this.onTouchEnd,Yt)}touchStart={x:0,y:0};lastDelta={x:0,y:0};window={width:0,height:0};emitter=new em;on(e,t){return this.emitter.on(e,t)}destroy(){this.emitter.destroy(),window.removeEventListener("resize",this.onWindowResize,!1),this.element.removeEventListener("wheel",this.onWheel,Yt),this.element.removeEventListener("touchstart",this.onTouchStart,Yt),this.element.removeEventListener("touchmove",this.onTouchMove,Yt),this.element.removeEventListener("touchend",this.onTouchEnd,Yt)}onTouchStart=e=>{const{clientX:t,clientY:n}=e.targetTouches?e.targetTouches[0]:e;this.touchStart.x=t,this.touchStart.y=n,this.lastDelta={x:0,y:0},this.emitter.emit("scroll",{deltaX:0,deltaY:0,event:e})};onTouchMove=e=>{const{clientX:t,clientY:n}=e.targetTouches?e.targetTouches[0]:e,r=-(t-this.touchStart.x)*this.options.touchMultiplier,s=-(n-this.touchStart.y)*this.options.touchMultiplier;this.touchStart.x=t,this.touchStart.y=n,this.lastDelta={x:r,y:s},this.emitter.emit("scroll",{deltaX:r,deltaY:s,event:e})};onTouchEnd=e=>{this.emitter.emit("scroll",{deltaX:this.lastDelta.x,deltaY:this.lastDelta.y,event:e})};onWheel=e=>{let{deltaX:t,deltaY:n,deltaMode:r}=e;const s=r===1?pu:r===2?this.window.width:1,i=r===1?pu:r===2?this.window.height:1;t*=s,n*=i,t*=this.options.wheelMultiplier,n*=this.options.wheelMultiplier,this.emitter.emit("scroll",{deltaX:t,deltaY:n,event:e})};onWindowResize=()=>{this.window={width:window.innerWidth,height:window.innerHeight}}},mu=e=>Math.min(1,1.001-Math.pow(2,-10*e)),Lw=class{_isScrolling=!1;_isStopped=!1;_isLocked=!1;_preventNextNativeScrollEvent=!1;_resetVelocityTimeout=null;__rafID=null;isTouching;time=0;userData={};lastVelocity=0;velocity=0;direction=0;options;targetScroll;animatedScroll;animate=new Pw;emitter=new em;dimensions;virtualScroll;constructor({wrapper:e=window,content:t=document.documentElement,eventsTarget:n=e,smoothWheel:r=!0,syncTouch:s=!1,syncTouchLerp:i=.075,touchInertiaExponent:o=1.7,duration:a,easing:c,lerp:l=.1,infinite:u=!1,orientation:f="vertical",gestureOrientation:h="vertical",touchMultiplier:p=1,wheelMultiplier:g=1,autoResize:y=!0,prevent:b,virtualScroll:w,overscroll:M=!0,autoRaf:C=!1,anchors:S=!1,autoToggle:_=!1,allowNestedScroll:O=!1,__experimental__naiveDimensions:k=!1}={}){window.lenisVersion=Cw,(!e||e===document.documentElement)&&(e=window),typeof a=="number"&&typeof c!="function"?c=mu:typeof c=="function"&&typeof a!="number"&&(a=1),this.options={wrapper:e,content:t,eventsTarget:n,smoothWheel:r,syncTouch:s,syncTouchLerp:i,touchInertiaExponent:o,duration:a,easing:c,lerp:l,infinite:u,gestureOrientation:h,orientation:f,touchMultiplier:p,wheelMultiplier:g,autoResize:y,prevent:b,virtualScroll:w,overscroll:M,autoRaf:C,anchors:S,autoToggle:_,allowNestedScroll:O,__experimental__naiveDimensions:k},this.dimensions=new Ow(e,t,{autoResize:y}),this.updateClassName(),this.targetScroll=this.animatedScroll=this.actualScroll,this.options.wrapper.addEventListener("scroll",this.onNativeScroll,!1),this.options.wrapper.addEventListener("scrollend",this.onScrollEnd,{capture:!0}),this.options.anchors&&this.options.wrapper===window&&this.options.wrapper.addEventListener("click",this.onClick,!1),this.options.wrapper.addEventListener("pointerdown",this.onPointerDown,!1),this.virtualScroll=new Rw(n,{touchMultiplier:p,wheelMultiplier:g}),this.virtualScroll.on("scroll",this.onVirtualScroll),this.options.autoToggle&&this.rootElement.addEventListener("transitionend",this.onTransitionEnd,{passive:!0}),this.options.autoRaf&&(this.__rafID=requestAnimationFrame(this.raf))}destroy(){this.emitter.destroy(),this.options.wrapper.removeEventListener("scroll",this.onNativeScroll,!1),this.options.wrapper.removeEventListener("scrollend",this.onScrollEnd,{capture:!0}),this.options.wrapper.removeEventListener("pointerdown",this.onPointerDown,!1),this.options.anchors&&this.options.wrapper===window&&this.options.wrapper.removeEventListener("click",this.onClick,!1),this.virtualScroll.destroy(),this.dimensions.destroy(),this.cleanUpClassName(),this.__rafID&&cancelAnimationFrame(this.__rafID)}on(e,t){return this.emitter.on(e,t)}off(e,t){return this.emitter.off(e,t)}onScrollEnd=e=>{e instanceof CustomEvent||(this.isScrolling==="smooth"||this.isScrolling===!1)&&e.stopPropagation()};dispatchScrollendEvent=()=>{this.options.wrapper.dispatchEvent(new CustomEvent("scrollend",{bubbles:this.options.wrapper===window,detail:{lenisScrollEnd:!0}}))};onTransitionEnd=e=>{if(e.propertyName.includes("overflow")){const t=this.isHorizontal?"overflow-x":"overflow-y",n=getComputedStyle(this.rootElement)[t];["hidden","clip"].includes(n)?this.internalStop():this.internalStart()}};setScroll(e){this.isHorizontal?this.options.wrapper.scrollTo({left:e,behavior:"instant"}):this.options.wrapper.scrollTo({top:e,behavior:"instant"})}onClick=e=>{const n=e.composedPath().find(r=>r instanceof HTMLAnchorElement&&(r.getAttribute("href")?.startsWith("#")||r.getAttribute("href")?.startsWith("/#")||r.getAttribute("href")?.startsWith("./#")));if(n){const r=n.getAttribute("href");if(r){const s=typeof this.options.anchors=="object"&&this.options.anchors?this.options.anchors:void 0;let i=`#${r.split("#")[1]}`;["#","/#","./#","#top","/#top","./#top"].includes(r)&&(i=0),this.scrollTo(i,s)}}};onPointerDown=e=>{e.button===1&&this.reset()};onVirtualScroll=e=>{if(typeof this.options.virtualScroll=="function"&&this.options.virtualScroll(e)===!1)return;const{deltaX:t,deltaY:n,event:r}=e;if(this.emitter.emit("virtual-scroll",{deltaX:t,deltaY:n,event:r}),r.ctrlKey||r.lenisStopPropagation)return;const s=r.type.includes("touch"),i=r.type.includes("wheel");this.isTouching=r.type==="touchstart"||r.type==="touchmove";const o=t===0&&n===0;if(this.options.syncTouch&&s&&r.type==="touchstart"&&o&&!this.isStopped&&!this.isLocked){this.reset();return}const c=this.options.gestureOrientation==="vertical"&&n===0||this.options.gestureOrientation==="horizontal"&&t===0;if(o||c)return;let l=r.composedPath();l=l.slice(0,l.indexOf(this.rootElement));const u=this.options.prevent;if(l.find(b=>b instanceof HTMLElement&&(typeof u=="function"&&u?.(b)||b.hasAttribute?.("data-lenis-prevent")||s&&b.hasAttribute?.("data-lenis-prevent-touch")||i&&b.hasAttribute?.("data-lenis-prevent-wheel")||this.options.allowNestedScroll&&this.checkNestedScroll(b,{deltaX:t,deltaY:n}))))return;if(this.isStopped||this.isLocked){r.cancelable&&r.preventDefault();return}if(!(this.options.syncTouch&&s||this.options.smoothWheel&&i)){this.isScrolling="native",this.animate.stop(),r.lenisStopPropagation=!0;return}let h=n;this.options.gestureOrientation==="both"?h=Math.abs(n)>Math.abs(t)?n:t:this.options.gestureOrientation==="horizontal"&&(h=t),(!this.options.overscroll||this.options.infinite||this.options.wrapper!==window&&(this.animatedScroll>0&&this.animatedScroll<this.limit||this.animatedScroll===0&&n>0||this.animatedScroll===this.limit&&n<0))&&(r.lenisStopPropagation=!0),r.cancelable&&r.preventDefault();const p=s&&this.options.syncTouch,y=s&&r.type==="touchend";y&&(h=Math.sign(this.velocity)*Math.pow(Math.abs(this.velocity),this.options.touchInertiaExponent)),this.scrollTo(this.targetScroll+h,{programmatic:!1,...p?{lerp:y?this.options.syncTouchLerp:1}:{lerp:this.options.lerp,duration:this.options.duration,easing:this.options.easing}})};resize(){this.dimensions.resize(),this.animatedScroll=this.targetScroll=this.actualScroll,this.emit()}emit(){this.emitter.emit("scroll",this)}onNativeScroll=()=>{if(this._resetVelocityTimeout!==null&&(clearTimeout(this._resetVelocityTimeout),this._resetVelocityTimeout=null),this._preventNextNativeScrollEvent){this._preventNextNativeScrollEvent=!1;return}if(this.isScrolling===!1||this.isScrolling==="native"){const e=this.animatedScroll;this.animatedScroll=this.targetScroll=this.actualScroll,this.lastVelocity=this.velocity,this.velocity=this.animatedScroll-e,this.direction=Math.sign(this.animatedScroll-e),this.isStopped||(this.isScrolling="native"),this.emit(),this.velocity!==0&&(this._resetVelocityTimeout=setTimeout(()=>{this.lastVelocity=this.velocity,this.velocity=0,this.isScrolling=!1,this.emit()},400))}};reset(){this.isLocked=!1,this.isScrolling=!1,this.animatedScroll=this.targetScroll=this.actualScroll,this.lastVelocity=this.velocity=0,this.animate.stop()}start(){if(this.isStopped){if(this.options.autoToggle){this.rootElement.style.removeProperty("overflow");return}this.internalStart()}}internalStart(){this.isStopped&&(this.reset(),this.isStopped=!1,this.emit())}stop(){if(!this.isStopped){if(this.options.autoToggle){this.rootElement.style.setProperty("overflow","clip");return}this.internalStop()}}internalStop(){this.isStopped||(this.reset(),this.isStopped=!0,this.emit())}raf=e=>{const t=e-(this.time||e);this.time=e,this.animate.advance(t*.001),this.options.autoRaf&&(this.__rafID=requestAnimationFrame(this.raf))};scrollTo(e,{offset:t=0,immediate:n=!1,lock:r=!1,duration:s=this.options.duration,easing:i=this.options.easing,lerp:o=this.options.lerp,onStart:a,onComplete:c,force:l=!1,programmatic:u=!0,userData:f}={}){if(!((this.isStopped||this.isLocked)&&!l)){if(typeof e=="string"&&["top","left","start"].includes(e))e=0;else if(typeof e=="string"&&["bottom","right","end"].includes(e))e=this.limit;else{let h;if(typeof e=="string"?h=document.querySelector(e):e instanceof HTMLElement&&e?.nodeType&&(h=e),h){if(this.options.wrapper!==window){const g=this.rootElement.getBoundingClientRect();t-=this.isHorizontal?g.left:g.top}const p=h.getBoundingClientRect();e=(this.isHorizontal?p.left:p.top)+this.animatedScroll}}if(typeof e=="number"){if(e+=t,e=Math.round(e),this.options.infinite){if(u){this.targetScroll=this.animatedScroll=this.scroll;const h=e-this.animatedScroll;h>this.limit/2?e=e-this.limit:h<-this.limit/2&&(e=e+this.limit)}}else e=Zp(0,e,this.limit);if(e===this.targetScroll){a?.(this),c?.(this);return}if(this.userData=f??{},n){this.animatedScroll=this.targetScroll=e,this.setScroll(this.scroll),this.reset(),this.preventNextNativeScrollEvent(),this.emit(),c?.(this),this.userData={},requestAnimationFrame(()=>{this.dispatchScrollendEvent()});return}u||(this.targetScroll=e),typeof s=="number"&&typeof i!="function"?i=mu:typeof i=="function"&&typeof s!="number"&&(s=1),this.animate.fromTo(this.animatedScroll,e,{duration:s,easing:i,lerp:o,onStart:()=>{r&&(this.isLocked=!0),this.isScrolling="smooth",a?.(this)},onUpdate:(h,p)=>{this.isScrolling="smooth",this.lastVelocity=this.velocity,this.velocity=h-this.animatedScroll,this.direction=Math.sign(this.velocity),this.animatedScroll=h,this.setScroll(this.scroll),u&&(this.targetScroll=h),p||this.emit(),p&&(this.reset(),this.emit(),c?.(this),this.userData={},requestAnimationFrame(()=>{this.dispatchScrollendEvent()}),this.preventNextNativeScrollEvent())}})}}}preventNextNativeScrollEvent(){this._preventNextNativeScrollEvent=!0,requestAnimationFrame(()=>{this._preventNextNativeScrollEvent=!1})}checkNestedScroll(e,{deltaX:t,deltaY:n}){const r=Date.now(),s=e._lenis??={};let i,o,a,c,l,u,f,h;const p=this.options.gestureOrientation;if(r-(s.time??0)>2e3){s.time=Date.now();const _=window.getComputedStyle(e);s.computedStyle=_;const O=_.overflowX,k=_.overflowY;if(i=["auto","overlay","scroll"].includes(O),o=["auto","overlay","scroll"].includes(k),s.hasOverflowX=i,s.hasOverflowY=o,!i&&!o||p==="vertical"&&!o||p==="horizontal"&&!i)return!1;l=e.scrollWidth,u=e.scrollHeight,f=e.clientWidth,h=e.clientHeight,a=l>f,c=u>h,s.isScrollableX=a,s.isScrollableY=c,s.scrollWidth=l,s.scrollHeight=u,s.clientWidth=f,s.clientHeight=h}else a=s.isScrollableX,c=s.isScrollableY,i=s.hasOverflowX,o=s.hasOverflowY,l=s.scrollWidth,u=s.scrollHeight,f=s.clientWidth,h=s.clientHeight;if(!i&&!o||!a&&!c||p==="vertical"&&(!o||!c)||p==="horizontal"&&(!i||!a))return!1;let g;if(p==="horizontal")g="x";else if(p==="vertical")g="y";else{const _=t!==0,O=n!==0;_&&i&&a&&(g="x"),O&&o&&c&&(g="y")}if(!g)return!1;let y,b,w,M,C;if(g==="x")y=e.scrollLeft,b=l-f,w=t,M=i,C=a;else if(g==="y")y=e.scrollTop,b=u-h,w=n,M=o,C=c;else return!1;return(w>0?y<b:y>0)&&M&&C}get rootElement(){return this.options.wrapper===window?document.documentElement:this.options.wrapper}get limit(){return this.options.__experimental__naiveDimensions?this.isHorizontal?this.rootElement.scrollWidth-this.rootElement.clientWidth:this.rootElement.scrollHeight-this.rootElement.clientHeight:this.dimensions.limit[this.isHorizontal?"x":"y"]}get isHorizontal(){return this.options.orientation==="horizontal"}get actualScroll(){const e=this.options.wrapper;return this.isHorizontal?e.scrollX??e.scrollLeft:e.scrollY??e.scrollTop}get scroll(){return this.options.infinite?Mw(this.animatedScroll,this.limit):this.animatedScroll}get progress(){return this.limit===0?1:this.scroll/this.limit}get isScrolling(){return this._isScrolling}set isScrolling(e){this._isScrolling!==e&&(this._isScrolling=e,this.updateClassName())}get isStopped(){return this._isStopped}set isStopped(e){this._isStopped!==e&&(this._isStopped=e,this.updateClassName())}get isLocked(){return this._isLocked}set isLocked(e){this._isLocked!==e&&(this._isLocked=e,this.updateClassName())}get isSmooth(){return this.isScrolling==="smooth"}get className(){let e="lenis";return this.options.autoToggle&&(e+=" lenis-autoToggle"),this.isStopped&&(e+=" lenis-stopped"),this.isLocked&&(e+=" lenis-locked"),this.isScrolling&&(e+=" lenis-scrolling"),this.isScrolling==="smooth"&&(e+=" lenis-smooth"),e}updateClassName(){this.cleanUpClassName(),this.rootElement.className=`${this.rootElement.className} ${this.className}`.trim()}cleanUpClassName(){this.rootElement.className=this.rootElement.className.replace(/lenis(-\w+)?/g,"").trim()}},jw=class{constructor(e){this.state=e}listeners=[];set(e){this.state=e;for(let t of this.listeners)t(this.state)}subscribe(e){return this.listeners=[...this.listeners,e],()=>{this.listeners=this.listeners.filter(t=>t!==e)}}get(){return this.state}},Dw=R.createContext(null),gu=new jw(null),Ns=R.forwardRef(({children:e,root:t=!1,options:n={},className:r,autoRaf:s=!0,style:i,props:o},a)=>{const c=R.useRef(null),l=R.useRef(null),[u,f]=R.useState(void 0);R.useImperativeHandle(a,()=>({wrapper:c.current,content:l.current,lenis:u}),[u]),R.useEffect(()=>{const y=new Lw({...n,...!t&&{wrapper:c.current,content:l.current},autoRaf:n?.autoRaf??s});return f(y),()=>{y.destroy(),f(void 0)}},[t,JSON.stringify(n)]);const h=R.useRef([]),p=R.useCallback((y,b)=>{h.current.push({callback:y,priority:b}),h.current.sort((w,M)=>w.priority-M.priority)},[]),g=R.useCallback(y=>{h.current=h.current.filter(b=>b.callback!==y)},[]);return R.useEffect(()=>{if(t&&u)return gu.set({lenis:u,addCallback:p,removeCallback:g}),()=>gu.set(null)},[t,u,p,g]),R.useEffect(()=>{if(!u)return;const y=b=>{for(let w=0;w<h.current.length;w++)h.current[w]?.callback(b)};return u.on("scroll",y),()=>{u.off("scroll",y)}},[u]),x.jsx(Dw.Provider,{value:{lenis:u,addCallback:p,removeCallback:g},children:t?e:x.jsx("div",{ref:c,className:r,style:i,...o,children:x.jsx("div",{ref:l,children:e})})})});const Nc=R.createContext({});function Fc(e){const t=R.useRef(null);return t.current===null&&(t.current=e()),t.current}const Bc=typeof window<"u",tm=Bc?R.useLayoutEffect:R.useEffect,Ki=R.createContext(null);function $c(e,t){e.indexOf(t)===-1&&e.push(t)}function Vc(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const zt=(e,t,n)=>n>t?t:n<e?e:n;function Ta(e,t){return t?`${e}. For more information and steps for solving, visit https://motion.dev/troubleshooting/${t}`:e}let Pr=()=>{},Wt=()=>{};process.env.NODE_ENV!=="production"&&(Pr=(e,t,n)=>{!e&&typeof console<"u"&&console.warn(Ta(t,n))},Wt=(e,t,n)=>{if(!e)throw new Error(Ta(t,n))});const qt={},nm=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function rm(e){return typeof e=="object"&&e!==null}const sm=e=>/^0[^.\s]+$/u.test(e);function Uc(e){let t;return()=>(t===void 0&&(t=e()),t)}const ut=e=>e,Iw=(e,t)=>n=>t(e(n)),xs=(...e)=>e.reduce(Iw),cs=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class zc{constructor(){this.subscriptions=[]}add(t){return $c(this.subscriptions,t),()=>Vc(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const xt=e=>e*1e3,Rt=e=>e/1e3;function im(e,t){return t?e*(1e3/t):0}const vu=new Set;function Wc(e,t,n){e||vu.has(t)||(console.warn(Ta(t,n)),vu.add(t))}const om=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,Nw=1e-7,Fw=12;function Bw(e,t,n,r,s){let i,o,a=0;do o=t+(n-t)/2,i=om(o,r,s)-e,i>0?n=o:t=o;while(Math.abs(i)>Nw&&++a<Fw);return o}function Ss(e,t,n,r){if(e===t&&n===r)return ut;const s=i=>Bw(i,0,1,e,n);return i=>i===0||i===1?i:om(s(i),t,r)}const am=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,cm=e=>t=>1-e(1-t),lm=Ss(.33,1.53,.69,.99),qc=cm(lm),um=am(qc),dm=e=>(e*=2)<1?.5*qc(e):.5*(2-Math.pow(2,-10*(e-1))),Hc=e=>1-Math.sin(Math.acos(e)),fm=cm(Hc),hm=am(Hc),$w=Ss(.42,0,1,1),Vw=Ss(0,0,.58,1),pm=Ss(.42,0,.58,1),Uw=e=>Array.isArray(e)&&typeof e[0]!="number",mm=e=>Array.isArray(e)&&typeof e[0]=="number",yu={linear:ut,easeIn:$w,easeInOut:pm,easeOut:Vw,circIn:Hc,circInOut:hm,circOut:fm,backIn:qc,backInOut:um,backOut:lm,anticipate:dm},zw=e=>typeof e=="string",bu=e=>{if(mm(e)){Wt(e.length===4,"Cubic bezier arrays must contain four numerical values.","cubic-bezier-length");const[t,n,r,s]=e;return Ss(t,n,r,s)}else if(zw(e))return Wt(yu[e]!==void 0,`Invalid easing type '${e}'`,"invalid-easing-type"),yu[e];return e},Fs=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Ww(e,t){let n=new Set,r=new Set,s=!1,i=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function c(u){o.has(u)&&(l.schedule(u),e()),u(a)}const l={schedule:(u,f=!1,h=!1)=>{const g=h&&s?n:r;return f&&o.add(u),g.has(u)||g.add(u),u},cancel:u=>{r.delete(u),o.delete(u)},process:u=>{if(a=u,s){i=!0;return}s=!0,[n,r]=[r,n],n.forEach(c),n.clear(),s=!1,i&&(i=!1,l.process(u))}};return l}const qw=40;function gm(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=Fs.reduce((C,S)=>(C[S]=Ww(i),C),{}),{setup:a,read:c,resolveKeyframes:l,preUpdate:u,update:f,preRender:h,render:p,postRender:g}=o,y=()=>{const C=qt.useManualTiming?s.timestamp:performance.now();n=!1,qt.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(C-s.timestamp,qw),1)),s.timestamp=C,s.isProcessing=!0,a.process(s),c.process(s),l.process(s),u.process(s),f.process(s),h.process(s),p.process(s),g.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(y))},b=()=>{n=!0,r=!0,s.isProcessing||e(y)};return{schedule:Fs.reduce((C,S)=>{const _=o[S];return C[S]=(O,k=!1,P=!1)=>(n||b(),_.schedule(O,k,P)),C},{}),cancel:C=>{for(let S=0;S<Fs.length;S++)o[Fs[S]].cancel(C)},state:s,steps:o}}const{schedule:Se,cancel:Ht,state:Be,steps:Po}=gm(typeof requestAnimationFrame<"u"?requestAnimationFrame:ut,!0);let di;function Hw(){di=void 0}const Xe={now:()=>(di===void 0&&Xe.set(Be.isProcessing||qt.useManualTiming?Be.timestamp:performance.now()),di),set:e=>{di=e,queueMicrotask(Hw)}},vm=e=>t=>typeof t=="string"&&t.startsWith(e),Gc=vm("--"),Gw=vm("var(--"),Jc=e=>Gw(e)?Jw.test(e.split("/*")[0].trim()):!1,Jw=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ar={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},ls={...Ar,transform:e=>zt(0,1,e)},Bs={...Ar,default:1},ns=e=>Math.round(e*1e5)/1e5,Kc=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Kw(e){return e==null}const Yw=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Yc=(e,t)=>n=>!!(typeof n=="string"&&Yw.test(n)&&n.startsWith(e)||t&&!Kw(n)&&Object.prototype.hasOwnProperty.call(n,t)),ym=(e,t,n)=>r=>{if(typeof r!="string")return r;const[s,i,o,a]=r.match(Kc);return{[e]:parseFloat(s),[t]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Xw=e=>zt(0,255,e),Ao={...Ar,transform:e=>Math.round(Xw(e))},On={test:Yc("rgb","red"),parse:ym("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+Ao.transform(e)+", "+Ao.transform(t)+", "+Ao.transform(n)+", "+ns(ls.transform(r))+")"};function Qw(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Ma={test:Yc("#"),parse:Qw,transform:On.transform},_s=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),nn=_s("deg"),Lt=_s("%"),re=_s("px"),Zw=_s("vh"),ex=_s("vw"),wu={...Lt,parse:e=>Lt.parse(e)/100,transform:e=>Lt.transform(e*100)},tr={test:Yc("hsl","hue"),parse:ym("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Lt.transform(ns(t))+", "+Lt.transform(ns(n))+", "+ns(ls.transform(r))+")"},Oe={test:e=>On.test(e)||Ma.test(e)||tr.test(e),parse:e=>On.test(e)?On.parse(e):tr.test(e)?tr.parse(e):Ma.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?On.transform(e):tr.transform(e),getAnimatableNone:e=>{const t=Oe.parse(e);return t.alpha=0,Oe.transform(t)}},tx=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function nx(e){return isNaN(e)&&typeof e=="string"&&(e.match(Kc)?.length||0)+(e.match(tx)?.length||0)>0}const bm="number",wm="color",rx="var",sx="var(",xu="${}",ix=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function us(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const a=t.replace(ix,c=>(Oe.test(c)?(r.color.push(i),s.push(wm),n.push(Oe.parse(c))):c.startsWith(sx)?(r.var.push(i),s.push(rx),n.push(c)):(r.number.push(i),s.push(bm),n.push(parseFloat(c))),++i,xu)).split(xu);return{values:n,split:a,indexes:r,types:s}}function xm(e){return us(e).values}function Sm(e){const{split:t,types:n}=us(e),r=t.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=t[o],s[o]!==void 0){const a=n[o];a===bm?i+=ns(s[o]):a===wm?i+=Oe.transform(s[o]):i+=s[o]}return i}}const ox=e=>typeof e=="number"?0:Oe.test(e)?Oe.getAnimatableNone(e):e;function ax(e){const t=xm(e);return Sm(e)(t.map(ox))}const ln={test:nx,parse:xm,createTransformer:Sm,getAnimatableNone:ax};function Oo(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function cx({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,i=0,o=0;if(!t)s=i=o=n;else{const a=n<.5?n*(1+t):n+t-n*t,c=2*n-a;s=Oo(c,a,e+1/3),i=Oo(c,a,e),o=Oo(c,a,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function Ci(e,t){return n=>n>0?t:e}const Ee=(e,t,n)=>e+(t-e)*n,Ro=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},lx=[Ma,On,tr],ux=e=>lx.find(t=>t.test(e));function Su(e){const t=ux(e);if(Pr(!!t,`'${e}' is not an animatable color. Use the equivalent color code instead.`,"color-not-animatable"),!t)return!1;let n=t.parse(e);return t===tr&&(n=cx(n)),n}const _u=(e,t)=>{const n=Su(e),r=Su(t);if(!n||!r)return Ci(e,t);const s={...n};return i=>(s.red=Ro(n.red,r.red,i),s.green=Ro(n.green,r.green,i),s.blue=Ro(n.blue,r.blue,i),s.alpha=Ee(n.alpha,r.alpha,i),On.transform(s))},Pa=new Set(["none","hidden"]);function dx(e,t){return Pa.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function fx(e,t){return n=>Ee(e,t,n)}function Xc(e){return typeof e=="number"?fx:typeof e=="string"?Jc(e)?Ci:Oe.test(e)?_u:mx:Array.isArray(e)?_m:typeof e=="object"?Oe.test(e)?_u:hx:Ci}function _m(e,t){const n=[...e],r=n.length,s=e.map((i,o)=>Xc(i)(i,t[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}}function hx(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=Xc(e[s])(e[s],t[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function px(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const i=t.types[s],o=e.indexes[i][r[i]],a=e.values[o]??0;n[s]=a,r[i]++}return n}const mx=(e,t)=>{const n=ln.createTransformer(t),r=us(e),s=us(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Pa.has(e)&&!s.values.length||Pa.has(t)&&!r.values.length?dx(e,t):xs(_m(px(r,s),s.values),n):(Pr(!0,`Complex values '${e}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`,"complex-values-different"),Ci(e,t))};function km(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Ee(e,t,n):Xc(e)(e,t)}const gx=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>Se.update(t,n),stop:()=>Ht(t),now:()=>Be.isProcessing?Be.timestamp:Xe.now()}},Cm=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let i=0;i<s;i++)r+=Math.round(e(i/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Ei=2e4;function Qc(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Ei;)t+=n,r=e.next(t);return t>=Ei?1/0:t}function vx(e,t=100,n){const r=n({...e,keyframes:[0,t]}),s=Math.min(Qc(r),Ei);return{type:"keyframes",ease:i=>r.next(s*i).value/t,duration:Rt(s)}}const yx=5;function Em(e,t,n){const r=Math.max(t-yx,0);return im(n-e(r),t-r)}const ke={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Lo=.001;function bx({duration:e=ke.duration,bounce:t=ke.bounce,velocity:n=ke.velocity,mass:r=ke.mass}){let s,i;Pr(e<=xt(ke.maxDuration),"Spring duration must be 10 seconds or less","spring-duration-limit");let o=1-t;o=zt(ke.minDamping,ke.maxDamping,o),e=zt(ke.minDuration,ke.maxDuration,Rt(e)),o<1?(s=l=>{const u=l*o,f=u*e,h=u-n,p=Aa(l,o),g=Math.exp(-f);return Lo-h/p*g},i=l=>{const f=l*o*e,h=f*n+n,p=Math.pow(o,2)*Math.pow(l,2)*e,g=Math.exp(-f),y=Aa(Math.pow(l,2),o);return(-s(l)+Lo>0?-1:1)*((h-p)*g)/y}):(s=l=>{const u=Math.exp(-l*e),f=(l-n)*e+1;return-Lo+u*f},i=l=>{const u=Math.exp(-l*e),f=(n-l)*(e*e);return u*f});const a=5/e,c=xx(s,i,a);if(e=xt(e),isNaN(c))return{stiffness:ke.stiffness,damping:ke.damping,duration:e};{const l=Math.pow(c,2)*r;return{stiffness:l,damping:o*2*Math.sqrt(r*l),duration:e}}}const wx=12;function xx(e,t,n){let r=n;for(let s=1;s<wx;s++)r=r-e(r)/t(r);return r}function Aa(e,t){return e*Math.sqrt(1-t*t)}const Sx=["duration","bounce"],_x=["stiffness","damping","mass"];function ku(e,t){return t.some(n=>e[n]!==void 0)}function kx(e){let t={velocity:ke.velocity,stiffness:ke.stiffness,damping:ke.damping,mass:ke.mass,isResolvedFromDuration:!1,...e};if(!ku(e,_x)&&ku(e,Sx))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*zt(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:ke.mass,stiffness:s,damping:i}}else{const n=bx(e);t={...t,...n,mass:ke.mass},t.isResolvedFromDuration=!0}return t}function Ti(e=ke.visualDuration,t=ke.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:i},{stiffness:c,damping:l,mass:u,duration:f,velocity:h,isResolvedFromDuration:p}=kx({...n,velocity:-Rt(n.velocity||0)}),g=h||0,y=l/(2*Math.sqrt(c*u)),b=o-i,w=Rt(Math.sqrt(c/u)),M=Math.abs(b)<5;r||(r=M?ke.restSpeed.granular:ke.restSpeed.default),s||(s=M?ke.restDelta.granular:ke.restDelta.default);let C;if(y<1){const _=Aa(w,y);C=O=>{const k=Math.exp(-y*w*O);return o-k*((g+y*w*b)/_*Math.sin(_*O)+b*Math.cos(_*O))}}else if(y===1)C=_=>o-Math.exp(-w*_)*(b+(g+w*b)*_);else{const _=w*Math.sqrt(y*y-1);C=O=>{const k=Math.exp(-y*w*O),P=Math.min(_*O,300);return o-k*((g+y*w*b)*Math.sinh(P)+_*b*Math.cosh(P))/_}}const S={calculatedDuration:p&&f||null,next:_=>{const O=C(_);if(p)a.done=_>=f;else{let k=_===0?g:0;y<1&&(k=_===0?xt(g):Em(C,_,O));const P=Math.abs(k)<=r,L=Math.abs(o-O)<=s;a.done=P&&L}return a.value=a.done?o:O,a},toString:()=>{const _=Math.min(Qc(S),Ei),O=Cm(k=>S.next(_*k).value,_,30);return _+"ms "+O},toTransition:()=>{}};return S}Ti.applyToOptions=e=>{const t=vx(e,100,Ti);return e.ease=t.ease,e.duration=xt(t.duration),e.type="keyframes",e};function Oa({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:c,restDelta:l=.5,restSpeed:u}){const f=e[0],h={done:!1,value:f},p=P=>a!==void 0&&P<a||c!==void 0&&P>c,g=P=>a===void 0?c:c===void 0||Math.abs(a-P)<Math.abs(c-P)?a:c;let y=n*t;const b=f+y,w=o===void 0?b:o(b);w!==b&&(y=w-f);const M=P=>-y*Math.exp(-P/r),C=P=>w+M(P),S=P=>{const L=M(P),j=C(P);h.done=Math.abs(L)<=l,h.value=h.done?w:j};let _,O;const k=P=>{p(h.value)&&(_=P,O=Ti({keyframes:[h.value,g(h.value)],velocity:Em(C,P,h.value),damping:s,stiffness:i,restDelta:l,restSpeed:u}))};return k(0),{calculatedDuration:null,next:P=>{let L=!1;return!O&&_===void 0&&(L=!0,S(P),k(P)),_!==void 0&&P>=_?O.next(P-_):(!L&&S(P),h)}}}function Cx(e,t,n){const r=[],s=n||qt.mix||km,i=e.length-1;for(let o=0;o<i;o++){let a=s(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||ut:t;a=xs(c,a)}r.push(a)}return r}function Ex(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const i=e.length;if(Wt(i===t.length,"Both input and output ranges must be the same length","range-length"),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=Cx(t,r,s),c=a.length,l=u=>{if(o&&u<e[0])return t[0];let f=0;if(c>1)for(;f<e.length-2&&!(u<e[f+1]);f++);const h=cs(e[f],e[f+1],u);return a[f](h)};return n?u=>l(zt(e[0],e[i-1],u)):l}function Tx(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=cs(0,t,r);e.push(Ee(n,1,s))}}function Mx(e){const t=[0];return Tx(t,e.length-1),t}function Px(e,t){return e.map(n=>n*t)}function Ax(e,t){return e.map(()=>t||pm).splice(0,e.length-1)}function nr({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=Uw(r)?r.map(bu):bu(r),i={done:!1,value:t[0]},o=Px(n&&n.length===t.length?n:Mx(t),e),a=Ex(o,t,{ease:Array.isArray(s)?s:Ax(t,s)});return{calculatedDuration:e,next:c=>(i.value=a(c),i.done=c>=e,i)}}const Ox=e=>e!==null;function Zc(e,{repeat:t,repeatType:n="loop"},r,s=1){const i=e.filter(Ox),a=s<0||t&&n!=="loop"&&t%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const Rx={decay:Oa,inertia:Oa,tween:nr,keyframes:nr,spring:Ti};function Tm(e){typeof e.type=="string"&&(e.type=Rx[e.type])}class el{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const Lx=e=>e/100;class tl extends el{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Xe.now()&&this.tick(Xe.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;Tm(t);const{type:n=nr,repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=t;let{keyframes:a}=t;const c=n||nr;process.env.NODE_ENV!=="production"&&c!==nr&&Wt(a.length<=2,`Only two keyframes currently supported with spring and inertia animations. Trying to animate ${a}`,"spring-two-frames"),c!==nr&&typeof a[0]!="number"&&(this.mixKeyframes=xs(Lx,km(a[0],a[1])),a=[0,100]);const l=c({...t,keyframes:a});i==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...a].reverse(),velocity:-o})),l.calculatedDuration===null&&(l.calculatedDuration=Qc(l));const{calculatedDuration:u}=l;this.calculatedDuration=u,this.resolvedDuration=u+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=l}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:s,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:l=0,keyframes:u,repeat:f,repeatType:h,repeatDelay:p,type:g,onUpdate:y,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const w=this.currentTime-l*(this.playbackSpeed>=0?1:-1),M=this.playbackSpeed>=0?w<0:w>s;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let C=this.currentTime,S=r;if(f){const P=Math.min(this.currentTime,s)/a;let L=Math.floor(P),j=P%1;!j&&P>=1&&(j=1),j===1&&L--,L=Math.min(L,f+1),!!(L%2)&&(h==="reverse"?(j=1-j,p&&(j-=p/a)):h==="mirror"&&(S=o)),C=zt(0,1,j)*a}const _=M?{done:!1,value:u[0]}:S.next(C);i&&(_.value=i(_.value));let{done:O}=_;!M&&c!==null&&(O=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return k&&g!==Oa&&(_.value=Zc(u,this.options,b,this.speed)),y&&y(_.value),k&&this.finish(),_}then(t,n){return this.finished.then(t,n)}get duration(){return Rt(this.calculatedDuration)}get time(){return Rt(this.currentTime)}set time(t){t=xt(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Xe.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Rt(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=gx,startTime:n}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Xe.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function jx(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Rn=e=>e*180/Math.PI,Ra=e=>{const t=Rn(Math.atan2(e[1],e[0]));return La(t)},Dx={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Ra,rotateZ:Ra,skewX:e=>Rn(Math.atan(e[1])),skewY:e=>Rn(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},La=e=>(e=e%360,e<0&&(e+=360),e),Cu=Ra,Eu=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Tu=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),Ix={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Eu,scaleY:Tu,scale:e=>(Eu(e)+Tu(e))/2,rotateX:e=>La(Rn(Math.atan2(e[6],e[5]))),rotateY:e=>La(Rn(Math.atan2(-e[2],e[0]))),rotateZ:Cu,rotate:Cu,skewX:e=>Rn(Math.atan(e[4])),skewY:e=>Rn(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function ja(e){return e.includes("scale")?1:0}function Da(e,t){if(!e||e==="none")return ja(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=Ix,s=n;else{const a=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Dx,s=a}if(!s)return ja(t);const i=r[t],o=s[1].split(",").map(Fx);return typeof i=="function"?i(o):o[i]}const Nx=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return Da(n,t)};function Fx(e){return parseFloat(e.trim())}const Or=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Rr=new Set(Or),Mu=e=>e===Ar||e===re,Bx=new Set(["x","y","z"]),$x=Or.filter(e=>!Bx.has(e));function Vx(e){const t=[];return $x.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const jn={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Da(t,"x"),y:(e,{transform:t})=>Da(t,"y")};jn.translateX=jn.x;jn.translateY=jn.y;const Dn=new Set;let Ia=!1,Na=!1,Fa=!1;function Mm(){if(Na){const e=Array.from(Dn).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=Vx(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,o])=>{r.getValue(i)?.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Na=!1,Ia=!1,Dn.forEach(e=>e.complete(Fa)),Dn.clear()}function Pm(){Dn.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Na=!0)})}function Ux(){Fa=!0,Pm(),Mm(),Fa=!1}class nl{constructor(t,n,r,s,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Dn.add(this),Ia||(Ia=!0,Se.read(Pm),Se.resolveKeyframes(Mm))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;if(t[0]===null){const i=s?.get(),o=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&n){const a=r.readValue(n,o);a!=null&&(t[0]=a)}t[0]===void 0&&(t[0]=o),s&&i===void 0&&s.set(t[0])}jx(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Dn.delete(this)}cancel(){this.state==="scheduled"&&(Dn.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const zx=e=>e.startsWith("--");function Wx(e,t,n){zx(t)?e.style.setProperty(t,n):e.style[t]=n}const qx=Uc(()=>window.ScrollTimeline!==void 0),Hx={};function Gx(e,t){const n=Uc(e);return()=>Hx[t]??n()}const Am=Gx(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Zr=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Pu={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Zr([0,.65,.55,1]),circOut:Zr([.55,0,1,.45]),backIn:Zr([.31,.01,.66,-.59]),backOut:Zr([.33,1.53,.69,.99])};function Om(e,t){if(e)return typeof e=="function"?Am()?Cm(e,t):"ease-out":mm(e)?Zr(e):Array.isArray(e)?e.map(n=>Om(n,t)||Pu.easeOut):Pu[e]}function Jx(e,t,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeOut",times:c}={},l=void 0){const u={[t]:n};c&&(u.offset=c);const f=Om(a,s);Array.isArray(f)&&(u.easing=f);const h={delay:r,duration:s,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return l&&(h.pseudoElement=l),e.animate(u,h)}function Rm(e){return typeof e=="function"&&"applyToOptions"in e}function Kx({type:e,...t}){return Rm(e)&&Am()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class Yx extends el{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:s,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:a,onComplete:c}=t;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=t,Wt(typeof t.type!="string",`Mini animate() doesn't support "type" as a string.`,"mini-spring");const l=Kx(t);this.animation=Jx(n,r,s,l,i),l.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const u=Zc(s,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(u):Wx(n,r,u),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Rt(Number(t))}get time(){return Rt(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=xt(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&qx()?(this.animation.timeline=t,ut):n(this)}}const Lm={anticipate:dm,backInOut:um,circInOut:hm};function Xx(e){return e in Lm}function Qx(e){typeof e.ease=="string"&&Xx(e.ease)&&(e.ease=Lm[e.ease])}const Au=10;class Zx extends Yx{constructor(t){Qx(t),Tm(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:s,element:i,...o}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const a=new tl({...o,autoplay:!1}),c=xt(this.finishedTime??this.time);n.setWithVelocity(a.sample(c-Au).value,a.sample(c).value,Au),a.stop()}}const Ou=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ln.test(e)||e==="0")&&!e.startsWith("url("));function eS(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function tS(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],o=Ou(s,t),a=Ou(i,t);return Pr(o===a,`You are trying to animate ${t} from "${s}" to "${i}". "${o?i:s}" is not an animatable value.`,"value-not-animatable"),!o||!a?!1:eS(e)||(n==="spring"||Rm(n))&&r}const nS=new Set(["opacity","clipPath","filter","transform"]),rS=Uc(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function sS(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:s,damping:i,type:o}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:l}=t.owner.getProps();return rS()&&n&&nS.has(n)&&(n!=="transform"||!l)&&!c&&!r&&s!=="mirror"&&i!==0&&o!=="inertia"}const iS=40;class oS extends el{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",keyframes:a,name:c,motionValue:l,element:u,...f}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Xe.now();const h={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:o,name:c,motionValue:l,element:u,...f},p=u?.KeyframeResolver||nl;this.keyframeResolver=new p(a,(g,y,b)=>this.onKeyframesResolved(g,y,h,!b),c,l,u),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,n,r,s){this.keyframeResolver=void 0;const{name:i,type:o,velocity:a,delay:c,isHandoff:l,onUpdate:u}=r;this.resolvedAt=Xe.now(),tS(t,i,o,a)||((qt.instantAnimations||!c)&&u?.(Zc(t,r,n)),t[0]=t[t.length-1],r.duration=0,r.repeat=0);const h={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>iS?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},p=!l&&sS(h)?new Zx({...h,element:h.motionValue.owner.current}):new tl(h);p.finished.then(()=>this.notifyFinished()).catch(ut),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),Ux()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const aS=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function cS(e){const t=aS.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}const lS=4;function jm(e,t,n=1){Wt(n<=lS,`Max CSS variable fallback depth detected in property "${e}". This may indicate a circular fallback dependency.`,"max-css-var-depth");const[r,s]=cS(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const o=i.trim();return nm(o)?parseFloat(o):o}return Jc(s)?jm(s,t,n+1):s}function rl(e,t){return e?.[t]??e?.default??e}const Dm=new Set(["width","height","top","left","right","bottom",...Or]),uS={test:e=>e==="auto",parse:e=>e},Im=e=>t=>t.test(e),Nm=[Ar,re,Lt,nn,ex,Zw,uS],Ru=e=>Nm.find(Im(e));function dS(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||sm(e):!0}const fS=new Set(["brightness","contrast","saturate","opacity"]);function hS(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Kc)||[];if(!r)return e;const s=n.replace(r,"");let i=fS.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+s+")"}const pS=/\b([a-z-]*)\(.*?\)/gu,Ba={...ln,getAnimatableNone:e=>{const t=e.match(pS);return t?t.map(hS).join(" "):e}},Lu={...Ar,transform:Math.round},mS={rotate:nn,rotateX:nn,rotateY:nn,rotateZ:nn,scale:Bs,scaleX:Bs,scaleY:Bs,scaleZ:Bs,skew:nn,skewX:nn,skewY:nn,distance:re,translateX:re,translateY:re,translateZ:re,x:re,y:re,z:re,perspective:re,transformPerspective:re,opacity:ls,originX:wu,originY:wu,originZ:re},sl={borderWidth:re,borderTopWidth:re,borderRightWidth:re,borderBottomWidth:re,borderLeftWidth:re,borderRadius:re,radius:re,borderTopLeftRadius:re,borderTopRightRadius:re,borderBottomRightRadius:re,borderBottomLeftRadius:re,width:re,maxWidth:re,height:re,maxHeight:re,top:re,right:re,bottom:re,left:re,padding:re,paddingTop:re,paddingRight:re,paddingBottom:re,paddingLeft:re,margin:re,marginTop:re,marginRight:re,marginBottom:re,marginLeft:re,backgroundPositionX:re,backgroundPositionY:re,...mS,zIndex:Lu,fillOpacity:ls,strokeOpacity:ls,numOctaves:Lu},gS={...sl,color:Oe,backgroundColor:Oe,outlineColor:Oe,fill:Oe,stroke:Oe,borderColor:Oe,borderTopColor:Oe,borderRightColor:Oe,borderBottomColor:Oe,borderLeftColor:Oe,filter:Ba,WebkitFilter:Ba},Fm=e=>gS[e];function Bm(e,t){let n=Fm(e);return n!==Ba&&(n=ln),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const vS=new Set(["auto","none","0"]);function yS(e,t,n){let r=0,s;for(;r<e.length&&!s;){const i=e[r];typeof i=="string"&&!vS.has(i)&&us(i).values.length&&(s=e[r]),r++}if(s&&n)for(const i of t)e[i]=Bm(n,s)}class bS extends nl{constructor(t,n,r,s,i){super(t,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let l=t[c];if(typeof l=="string"&&(l=l.trim(),Jc(l))){const u=jm(l,n.current);u!==void 0&&(t[c]=u),c===t.length-1&&(this.finalKeyframe=l)}}if(this.resolveNoneKeyframes(),!Dm.has(r)||t.length!==2)return;const[s,i]=t,o=Ru(s),a=Ru(i);if(o!==a)if(Mu(o)&&Mu(a))for(let c=0;c<t.length;c++){const l=t[c];typeof l=="string"&&(t[c]=parseFloat(l))}else jn[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)(t[s]===null||dS(t[s]))&&r.push(s);r.length&&yS(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=jn[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const i=r.length-1,o=r[i];r[i]=jn[n](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([a,c])=>{t.getValue(a).set(c)}),this.resolveNoneKeyframes()}}function wS(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const s=n?.[e]??r.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const $m=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function Vm(e){return rm(e)&&"offsetHeight"in e}const ju=30,xS=e=>!isNaN(parseFloat(e));class SS{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const i=Xe.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty();s&&this.events.renderRequest?.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Xe.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=xS(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return process.env.NODE_ENV!=="production"&&Wc(!1,'value.onChange(callback) is deprecated. Switch to value.on("change", callback).'),this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new zc);const r=this.events[t].add(n);return t==="change"?()=>{r(),Se.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Xe.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>ju)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,ju);return im(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function vr(e,t){return new SS(e,t)}const{schedule:il}=gm(queueMicrotask,!1),gt={x:!1,y:!1};function Um(){return gt.x||gt.y}function _S(e){return e==="x"||e==="y"?gt[e]?null:(gt[e]=!0,()=>{gt[e]=!1}):gt.x||gt.y?null:(gt.x=gt.y=!0,()=>{gt.x=gt.y=!1})}function zm(e,t){const n=wS(e),r=new AbortController,s={passive:!0,...t,signal:r.signal};return[n,s,()=>r.abort()]}function Du(e){return!(e.pointerType==="touch"||Um())}function kS(e,t,n={}){const[r,s,i]=zm(e,n),o=a=>{if(!Du(a))return;const{target:c}=a,l=t(c,a);if(typeof l!="function"||!c)return;const u=f=>{Du(f)&&(l(f),c.removeEventListener("pointerleave",u))};c.addEventListener("pointerleave",u,s)};return r.forEach(a=>{a.addEventListener("pointerenter",o,s)}),i}const Wm=(e,t)=>t?e===t?!0:Wm(e,t.parentElement):!1,ol=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,CS=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function ES(e){return CS.has(e.tagName)||e.tabIndex!==-1}const fi=new WeakSet;function Iu(e){return t=>{t.key==="Enter"&&e(t)}}function jo(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const TS=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=Iu(()=>{if(fi.has(n))return;jo(n,"down");const s=Iu(()=>{jo(n,"up")}),i=()=>jo(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",i,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function Nu(e){return ol(e)&&!Um()}function MS(e,t,n={}){const[r,s,i]=zm(e,n),o=a=>{const c=a.currentTarget;if(!Nu(a))return;fi.add(c);const l=t(c,a),u=(p,g)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",h),fi.has(c)&&fi.delete(c),Nu(p)&&typeof l=="function"&&l(p,{success:g})},f=p=>{u(p,c===window||c===document||n.useGlobalTarget||Wm(c,p.target))},h=p=>{u(p,!1)};window.addEventListener("pointerup",f,s),window.addEventListener("pointercancel",h,s)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),Vm(a)&&(a.addEventListener("focus",l=>TS(l,s)),!ES(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),i}function qm(e){return rm(e)&&"ownerSVGElement"in e}function PS(e){return qm(e)&&e.tagName==="svg"}const Ue=e=>!!(e&&e.getVelocity),AS=[...Nm,Oe,ln],OS=e=>AS.find(Im(e)),al=R.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class RS extends A.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=Vm(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function LS({children:e,isPresent:t,anchorX:n,root:r}){const s=R.useId(),i=R.useRef(null),o=R.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=R.useContext(al);return R.useInsertionEffect(()=>{const{width:c,height:l,top:u,left:f,right:h}=o.current;if(t||!i.current||!c||!l)return;const p=n==="left"?`left: ${f}`:`right: ${h}`;i.current.dataset.motionPopId=s;const g=document.createElement("style");a&&(g.nonce=a);const y=r??document.head;return y.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${l}px !important;
            ${p}px !important;
            top: ${u}px !important;
          }
        `),()=>{y.contains(g)&&y.removeChild(g)}},[t]),x.jsx(RS,{isPresent:t,childRef:i,sizeRef:o,children:A.cloneElement(e,{ref:i})})}const jS=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o,anchorX:a,root:c})=>{const l=Fc(DS),u=R.useId();let f=!0,h=R.useMemo(()=>(f=!1,{id:u,initial:t,isPresent:n,custom:s,onExitComplete:p=>{l.set(p,!0);for(const g of l.values())if(!g)return;r&&r()},register:p=>(l.set(p,!1),()=>l.delete(p))}),[n,l,r]);return i&&f&&(h={...h}),R.useMemo(()=>{l.forEach((p,g)=>l.set(g,!1))},[n]),A.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),o==="popLayout"&&(e=x.jsx(LS,{isPresent:n,anchorX:a,root:c,children:e})),x.jsx(Ki.Provider,{value:h,children:e})};function DS(){return new Map}function Hm(e=!0){const t=R.useContext(Ki);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,i=R.useId();R.useEffect(()=>{if(e)return s(i)},[e]);const o=R.useCallback(()=>e&&r&&r(i),[i,r,e]);return!n&&r?[!1,o]:[!0]}const $s=e=>e.key||"";function Fu(e){const t=[];return R.Children.forEach(e,n=>{R.isValidElement(n)&&t.push(n)}),t}const IS=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1,anchorX:a="left",root:c})=>{const[l,u]=Hm(o),f=R.useMemo(()=>Fu(e),[e]),h=o&&!l?[]:f.map($s),p=R.useRef(!0),g=R.useRef(f),y=Fc(()=>new Map),[b,w]=R.useState(f),[M,C]=R.useState(f);tm(()=>{p.current=!1,g.current=f;for(let O=0;O<M.length;O++){const k=$s(M[O]);h.includes(k)?y.delete(k):y.get(k)!==!0&&y.set(k,!1)}},[M,h.length,h.join("-")]);const S=[];if(f!==b){let O=[...f];for(let k=0;k<M.length;k++){const P=M[k],L=$s(P);h.includes(L)||(O.splice(k,0,P),S.push(P))}return i==="wait"&&S.length&&(O=S),C(Fu(O)),w(f),null}process.env.NODE_ENV!=="production"&&i==="wait"&&M.length>1&&console.warn(`You're attempting to animate multiple children within AnimatePresence, but its mode is set to "wait". This will lead to odd visual behaviour.`);const{forceRender:_}=R.useContext(Nc);return x.jsx(x.Fragment,{children:M.map(O=>{const k=$s(O),P=o&&!l?!1:f===M||h.includes(k),L=()=>{if(y.has(k))y.set(k,!0);else return;let j=!0;y.forEach(N=>{N||(j=!1)}),j&&(_?.(),C(g.current),o&&u?.(),r&&r())};return x.jsx(jS,{isPresent:P,initial:!p.current||n?void 0:!1,custom:t,presenceAffectsLayout:s,mode:i,root:c,onExitComplete:P?void 0:L,anchorX:a,children:O},k)})})},Gm=R.createContext({strict:!1}),Bu={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},yr={};for(const e in Bu)yr[e]={isEnabled:t=>Bu[e].some(n=>!!t[n])};function NS(e){for(const t in e)yr[t]={...yr[t],...e[t]}}const FS=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Mi(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||FS.has(e)}let Jm=e=>!Mi(e);function BS(e){typeof e=="function"&&(Jm=t=>t.startsWith("on")?!Mi(t):e(t))}try{BS(require("@emotion/is-prop-valid").default)}catch{}function $S(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(Jm(s)||n===!0&&Mi(s)||!t&&!Mi(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}const Yi=R.createContext({});function Xi(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function ds(e){return typeof e=="string"||Array.isArray(e)}const cl=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ll=["initial",...cl];function Qi(e){return Xi(e.animate)||ll.some(t=>ds(e[t]))}function Km(e){return!!(Qi(e)||e.variants)}function VS(e,t){if(Qi(e)){const{initial:n,animate:r}=e;return{initial:n===!1||ds(n)?n:void 0,animate:ds(r)?r:void 0}}return e.inherit!==!1?t:{}}function US(e){const{initial:t,animate:n}=VS(e,R.useContext(Yi));return R.useMemo(()=>({initial:t,animate:n}),[$u(t),$u(n)])}function $u(e){return Array.isArray(e)?e.join(" "):e}const fs={};function zS(e){for(const t in e)fs[t]=e[t],Gc(t)&&(fs[t].isCSSVariable=!0)}function Ym(e,{layout:t,layoutId:n}){return Rr.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!fs[e]||e==="opacity")}const WS={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},qS=Or.length;function HS(e,t,n){let r="",s=!0;for(let i=0;i<qS;i++){const o=Or[i],a=e[o];if(a===void 0)continue;let c=!0;if(typeof a=="number"?c=a===(o.startsWith("scale")?1:0):c=parseFloat(a)===0,!c||n){const l=$m(a,sl[o]);if(!c){s=!1;const u=WS[o]||o;r+=`${u}(${l}) `}n&&(t[o]=l)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}function ul(e,t,n){const{style:r,vars:s,transformOrigin:i}=e;let o=!1,a=!1;for(const c in t){const l=t[c];if(Rr.has(c)){o=!0;continue}else if(Gc(c)){s[c]=l;continue}else{const u=$m(l,sl[c]);c.startsWith("origin")?(a=!0,i[c]=u):r[c]=u}}if(t.transform||(o||n?r.transform=HS(t,e.transform,n):r.transform&&(r.transform="none")),a){const{originX:c="50%",originY:l="50%",originZ:u=0}=i;r.transformOrigin=`${c} ${l} ${u}`}}const dl=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Xm(e,t,n){for(const r in t)!Ue(t[r])&&!Ym(r,n)&&(e[r]=t[r])}function GS({transformTemplate:e},t){return R.useMemo(()=>{const n=dl();return ul(n,t,e),Object.assign({},n.vars,n.style)},[t])}function JS(e,t){const n=e.style||{},r={};return Xm(r,n,e),Object.assign(r,GS(e,t)),r}function KS(e,t){const n={},r=JS(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const YS={offset:"stroke-dashoffset",array:"stroke-dasharray"},XS={offset:"strokeDashoffset",array:"strokeDasharray"};function QS(e,t,n=1,r=0,s=!0){e.pathLength=1;const i=s?YS:XS;e[i.offset]=re.transform(-r);const o=re.transform(t),a=re.transform(n);e[i.array]=`${o} ${a}`}function Qm(e,{attrX:t,attrY:n,attrScale:r,pathLength:s,pathSpacing:i=1,pathOffset:o=0,...a},c,l,u){if(ul(e,a,l),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:h}=e;f.transform&&(h.transform=f.transform,delete f.transform),(h.transform||f.transformOrigin)&&(h.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),h.transform&&(h.transformBox=u?.transformBox??"fill-box",delete f.transformBox),t!==void 0&&(f.x=t),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),s!==void 0&&QS(f,s,i,o,!1)}const Zm=()=>({...dl(),attrs:{}}),eg=e=>typeof e=="string"&&e.toLowerCase()==="svg";function ZS(e,t,n,r){const s=R.useMemo(()=>{const i=Zm();return Qm(i,t,eg(r),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};Xm(i,e.style,e),s.style={...i,...s.style}}return s}const e0=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function fl(e){return typeof e!="string"||e.includes("-")?!1:!!(e0.indexOf(e)>-1||/[A-Z]/u.test(e))}function t0(e,t,n,{latestValues:r},s,i=!1){const a=(fl(e)?ZS:KS)(t,r,s,e),c=$S(t,typeof e=="string",i),l=e!==R.Fragment?{...c,...a,ref:n}:{},{children:u}=t,f=R.useMemo(()=>Ue(u)?u.get():u,[u]);return R.createElement(e,{...l,children:f})}function Vu(e){const t=[{},{}];return e?.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function hl(e,t,n,r){if(typeof t=="function"){const[s,i]=Vu(r);t=t(n!==void 0?n:e.custom,s,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,i]=Vu(r);t=t(n!==void 0?n:e.custom,s,i)}return t}function hi(e){return Ue(e)?e.get():e}function n0({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,s){return{latestValues:r0(n,r,s,e),renderState:t()}}function r0(e,t,n,r){const s={},i=r(e,{});for(const h in i)s[h]=hi(i[h]);let{initial:o,animate:a}=e;const c=Qi(e),l=Km(e);t&&l&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const f=u?a:o;if(f&&typeof f!="boolean"&&!Xi(f)){const h=Array.isArray(f)?f:[f];for(let p=0;p<h.length;p++){const g=hl(e,h[p]);if(g){const{transitionEnd:y,transition:b,...w}=g;for(const M in w){let C=w[M];if(Array.isArray(C)){const S=u?C.length-1:0;C=C[S]}C!==null&&(s[M]=C)}for(const M in y)s[M]=y[M]}}}return s}const tg=e=>(t,n)=>{const r=R.useContext(Yi),s=R.useContext(Ki),i=()=>n0(e,t,r,s);return n?i():Fc(i)};function pl(e,t,n){const{style:r}=e,s={};for(const i in r)(Ue(r[i])||t.style&&Ue(t.style[i])||Ym(i,e)||n?.getValue(i)?.liveStyle!==void 0)&&(s[i]=r[i]);return s}const s0=tg({scrapeMotionValuesFromProps:pl,createRenderState:dl});function ng(e,t,n){const r=pl(e,t,n);for(const s in e)if(Ue(e[s])||Ue(t[s])){const i=Or.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=e[s]}return r}const i0=tg({scrapeMotionValuesFromProps:ng,createRenderState:Zm}),o0=Symbol.for("motionComponentSymbol");function rr(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function a0(e,t,n){return R.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):rr(n)&&(n.current=r))},[t])}const ml=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),c0="framerAppearId",rg="data-"+ml(c0),sg=R.createContext({});function l0(e,t,n,r,s){const{visualElement:i}=R.useContext(Yi),o=R.useContext(Gm),a=R.useContext(Ki),c=R.useContext(al).reducedMotion,l=R.useRef(null);r=r||o.renderer,!l.current&&r&&(l.current=r(e,{visualState:t,parent:i,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:c}));const u=l.current,f=R.useContext(sg);u&&!u.projection&&s&&(u.type==="html"||u.type==="svg")&&u0(l.current,n,s,f);const h=R.useRef(!1);R.useInsertionEffect(()=>{u&&h.current&&u.update(n,a)});const p=n[rg],g=R.useRef(!!p&&!window.MotionHandoffIsComplete?.(p)&&window.MotionHasOptimisedAnimation?.(p));return tm(()=>{u&&(h.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),g.current&&u.animationState&&u.animationState.animateChanges())}),R.useEffect(()=>{u&&(!g.current&&u.animationState&&u.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(p)}),g.current=!1))}),u}function u0(e,t,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:c,layoutRoot:l,layoutCrossfade:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:ig(e.parent)),e.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&rr(a),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:c,layoutRoot:l})}function ig(e){if(e)return e.options.allowProjection!==!1?e.projection:ig(e.parent)}function Do(e,{forwardMotionProps:t=!1}={},n,r){n&&NS(n);const s=fl(e)?i0:s0;function i(a,c){let l;const u={...R.useContext(al),...a,layoutId:d0(a)},{isStatic:f}=u,h=US(a),p=s(a,f);if(!f&&Bc){f0(u,n);const g=h0(u);l=g.MeasureLayout,h.visualElement=l0(e,p,u,r,g.ProjectionNode)}return x.jsxs(Yi.Provider,{value:h,children:[l&&h.visualElement?x.jsx(l,{visualElement:h.visualElement,...u}):null,t0(e,a,a0(p,h.visualElement,c),p,f,t)]})}i.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=R.forwardRef(i);return o[o0]=e,o}function d0({layoutId:e}){const t=R.useContext(Nc).id;return t&&e!==void 0?t+"-"+e:e}function f0(e,t){const n=R.useContext(Gm).strict;if(process.env.NODE_ENV!=="production"&&t&&n){const r="You have rendered a `motion` component within a `LazyMotion` component. This will break tree shaking. Import and render a `m` component instead.";e.ignoreStrict?Pr(!1,r,"lazy-strict-mode"):Wt(!1,r,"lazy-strict-mode")}}function h0(e){const{drag:t,layout:n}=yr;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function p0(e,t){if(typeof Proxy>"u")return Do;const n=new Map,r=(i,o)=>Do(i,o,e,t),s=(i,o)=>(process.env.NODE_ENV!=="production"&&Wc(!1,"motion() is deprecated. Use motion.create() instead."),r(i,o));return new Proxy(s,{get:(i,o)=>o==="create"?r:(n.has(o)||n.set(o,Do(o,void 0,e,t)),n.get(o))})}function og({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function m0({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function g0(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Io(e){return e===void 0||e===1}function $a({scale:e,scaleX:t,scaleY:n}){return!Io(e)||!Io(t)||!Io(n)}function Pn(e){return $a(e)||ag(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function ag(e){return Uu(e.x)||Uu(e.y)}function Uu(e){return e&&e!=="0%"}function Pi(e,t,n){const r=e-n,s=t*r;return n+s}function zu(e,t,n,r,s){return s!==void 0&&(e=Pi(e,s,r)),Pi(e,n,r)+t}function Va(e,t=0,n=1,r,s){e.min=zu(e.min,t,n,r,s),e.max=zu(e.max,t,n,r,s)}function cg(e,{x:t,y:n}){Va(e.x,t.translate,t.scale,t.originPoint),Va(e.y,n.translate,n.scale,n.originPoint)}const Wu=.999999999999,qu=1.0000000000001;function v0(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ir(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,cg(e,o)),r&&Pn(i.latestValues)&&ir(e,i.latestValues))}t.x<qu&&t.x>Wu&&(t.x=1),t.y<qu&&t.y>Wu&&(t.y=1)}function sr(e,t){e.min=e.min+t,e.max=e.max+t}function Hu(e,t,n,r,s=.5){const i=Ee(e.min,e.max,s);Va(e,t,n,i,r)}function ir(e,t){Hu(e.x,t.x,t.scaleX,t.scale,t.originX),Hu(e.y,t.y,t.scaleY,t.scale,t.originY)}function lg(e,t){return og(g0(e.getBoundingClientRect(),t))}function y0(e,t,n){const r=lg(e,n),{scroll:s}=t;return s&&(sr(r.x,s.offset.x),sr(r.y,s.offset.y)),r}const Gu=()=>({translate:0,scale:1,origin:0,originPoint:0}),or=()=>({x:Gu(),y:Gu()}),Ju=()=>({min:0,max:0}),Pe=()=>({x:Ju(),y:Ju()}),Ua={current:null},ug={current:!1};function b0(){if(ug.current=!0,!!Bc)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Ua.current=e.matches;e.addEventListener("change",t),t()}else Ua.current=!1}const w0=new WeakMap;function x0(e,t,n){for(const r in t){const s=t[r],i=n[r];if(Ue(s))e.addValue(r,s);else if(Ue(i))e.addValue(r,vr(s,{owner:e}));else if(i!==s)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=e.getStaticValue(r);e.addValue(r,vr(o!==void 0?o:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const Ku=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class S0{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=nl,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=Xe.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,Se.render(this.render,!1,!0))};const{latestValues:c,renderState:l}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=l,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=Qi(n),this.isVariantNode=Km(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in f){const p=f[h];c[h]!==void 0&&Ue(p)&&p.set(c[h],!1)}}mount(t){this.current=t,w0.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),ug.current||b0(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ua.current,process.env.NODE_ENV!=="production"&&Wc(this.shouldReduceMotion!==!0,"You have Reduced Motion enabled on your device. Animations may not appear as expected.","reduced-motion-disabled"),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ht(this.notifyUpdate),Ht(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Rr.has(t);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&Se.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),i(),o&&o(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in yr){const n=yr[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Pe()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Ku.length;r++){const s=Ku[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=t[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=x0(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=vr(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(nm(r)||sm(r))?r=parseFloat(r):!OS(r)&&ln.test(n)&&(r=Bm(t,n)),this.setBaseTarget(t,Ue(r)?r.get():r)),Ue(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const i=hl(this.props,n,this.presenceContext?.custom);i&&(r=i[t])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!Ue(s)?s:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new zc),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){il.render(this.render)}}class dg extends S0{constructor(){super(...arguments),this.KeyframeResolver=bS}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Ue(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function fg(e,{style:t,vars:n},r,s){const i=e.style;let o;for(o in t)i[o]=t[o];s?.applyProjectionStyles(i,r);for(o in n)i.setProperty(o,n[o])}function _0(e){return window.getComputedStyle(e)}class k0 extends dg{constructor(){super(...arguments),this.type="html",this.renderInstance=fg}readValueFromInstance(t,n){if(Rr.has(n))return this.projection?.isProjecting?ja(n):Nx(t,n);{const r=_0(t),s=(Gc(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return lg(t,n)}build(t,n,r){ul(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return pl(t,n,r)}}const hg=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function C0(e,t,n,r){fg(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(hg.has(s)?s:ml(s),t.attrs[s])}class E0 extends dg{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Pe}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Rr.has(n)){const r=Fm(n);return r&&r.default||0}return n=hg.has(n)?n:ml(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return ng(t,n,r)}build(t,n,r){Qm(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,s){C0(t,n,r,s)}mount(t){this.isSVGTag=eg(t.tagName),super.mount(t)}}const T0=(e,t)=>fl(e)?new E0(t):new k0(t,{allowProjection:e!==R.Fragment});function hs(e,t,n){const r=e.getProps();return hl(r,t,n!==void 0?n:r.custom,e)}const za=e=>Array.isArray(e);function M0(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,vr(n))}function P0(e){return za(e)?e[e.length-1]||0:e}function A0(e,t){const n=hs(e,t);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const o in i){const a=P0(i[o]);M0(e,o,a)}}function O0(e){return!!(Ue(e)&&e.add)}function Wa(e,t){const n=e.getValue("willChange");if(O0(n))return n.add(t);if(!n&&qt.WillChange){const r=new qt.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function pg(e){return e.props[rg]}const R0=e=>e!==null;function L0(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(R0),i=t&&n!=="loop"&&t%2===1?0:s.length-1;return s[i]}const j0={type:"spring",stiffness:500,damping:25,restSpeed:10},D0=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),I0={type:"keyframes",duration:.8},N0={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},F0=(e,{keyframes:t})=>t.length>2?I0:Rr.has(e)?e.startsWith("scale")?D0(t[1]):j0:N0;function B0({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:c,elapsed:l,...u}){return!!Object.keys(u).length}const gl=(e,t,n,r={},s,i)=>o=>{const a=rl(r,e)||{},c=a.delay||r.delay||0;let{elapsed:l=0}=r;l=l-xt(c);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-l,onUpdate:h=>{t.set(h),a.onUpdate&&a.onUpdate(h)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:i?void 0:s};B0(a)||Object.assign(u,F0(e,u)),u.duration&&(u.duration=xt(u.duration)),u.repeatDelay&&(u.repeatDelay=xt(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let f=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(f=!0)),(qt.instantAnimations||qt.skipAnimations)&&(f=!0,u.duration=0,u.delay=0),u.allowFlatten=!a.type&&!a.ease,f&&!i&&t.get()!==void 0){const h=L0(u.keyframes,a);if(h!==void 0){Se.update(()=>{u.onUpdate(h),u.onComplete()});return}}return a.isSync?new tl(u):new oS(u)};function $0({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function mg(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...a}=t;r&&(i=r);const c=[],l=s&&e.animationState&&e.animationState.getState()[s];for(const u in a){const f=e.getValue(u,e.latestValues[u]??null),h=a[u];if(h===void 0||l&&$0(l,u))continue;const p={delay:n,...rl(i||{},u)},g=f.get();if(g!==void 0&&!f.isAnimating&&!Array.isArray(h)&&h===g&&!p.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const w=pg(e);if(w){const M=window.MotionHandoffAnimation(w,u,Se);M!==null&&(p.startTime=M,y=!0)}}Wa(e,u),f.start(gl(u,f,h,e.shouldReduceMotion&&Dm.has(u)?{type:!1}:p,e,y));const b=f.animation;b&&c.push(b)}return o&&Promise.all(c).then(()=>{Se.update(()=>{o&&A0(e,o)})}),c}function qa(e,t,n={}){const r=hs(e,t,n.type==="exit"?e.presenceContext?.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(mg(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:l=0,staggerChildren:u,staggerDirection:f}=s;return V0(e,t,c,l,u,f,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[c,l]=a==="beforeChildren"?[i,o]:[o,i];return c().then(()=>l())}else return Promise.all([i(),o(n.delay)])}function V0(e,t,n=0,r=0,s=0,i=1,o){const a=[],c=e.variantChildren.size,l=(c-1)*s,u=typeof r=="function",f=u?h=>r(h,c):i===1?(h=0)=>h*s:(h=0)=>l-h*s;return Array.from(e.variantChildren).sort(U0).forEach((h,p)=>{h.notify("AnimationStart",t),a.push(qa(h,t,{...o,delay:n+(u?0:r)+f(p)}).then(()=>h.notify("AnimationComplete",t)))}),Promise.all(a)}function U0(e,t){return e.sortNodePosition(t)}function z0(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(i=>qa(e,i,n));r=Promise.all(s)}else if(typeof t=="string")r=qa(e,t,n);else{const s=typeof t=="function"?hs(e,t,n.custom):t;r=Promise.all(mg(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function gg(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const W0=ll.length;function vg(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?vg(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<W0;n++){const r=ll[n],s=e.props[r];(ds(s)||s===!1)&&(t[r]=s)}return t}const q0=[...cl].reverse(),H0=cl.length;function G0(e){return t=>Promise.all(t.map(({animation:n,options:r})=>z0(e,n,r)))}function J0(e){let t=G0(e),n=Yu(),r=!0;const s=c=>(l,u)=>{const f=hs(e,u,c==="exit"?e.presenceContext?.custom:void 0);if(f){const{transition:h,transitionEnd:p,...g}=f;l={...l,...g,...p}}return l};function i(c){t=c(e)}function o(c){const{props:l}=e,u=vg(e.parent)||{},f=[],h=new Set;let p={},g=1/0;for(let b=0;b<H0;b++){const w=q0[b],M=n[w],C=l[w]!==void 0?l[w]:u[w],S=ds(C),_=w===c?M.isActive:null;_===!1&&(g=b);let O=C===u[w]&&C!==l[w]&&S;if(O&&r&&e.manuallyAnimateOnMount&&(O=!1),M.protectedKeys={...p},!M.isActive&&_===null||!C&&!M.prevProp||Xi(C)||typeof C=="boolean")continue;const k=K0(M.prevProp,C);let P=k||w===c&&M.isActive&&!O&&S||b>g&&S,L=!1;const j=Array.isArray(C)?C:[C];let N=j.reduce(s(w),{});_===!1&&(N={});const{prevResolvedValues:U={}}=M,H={...U,...N},V=q=>{P=!0,h.has(q)&&(L=!0,h.delete(q)),M.needsAnimating[q]=!0;const I=e.getValue(q);I&&(I.liveStyle=!1)};for(const q in H){const I=N[q],ne=U[q];if(p.hasOwnProperty(q))continue;let F=!1;za(I)&&za(ne)?F=!gg(I,ne):F=I!==ne,F?I!=null?V(q):h.add(q):I!==void 0&&h.has(q)?V(q):M.protectedKeys[q]=!0}M.prevProp=C,M.prevResolvedValues=N,M.isActive&&(p={...p,...N}),r&&e.blockInitialAnimation&&(P=!1),P&&(!(O&&k)||L)&&f.push(...j.map(q=>({animation:q,options:{type:w}})))}if(h.size){const b={};if(typeof l.initial!="boolean"){const w=hs(e,Array.isArray(l.initial)?l.initial[0]:l.initial);w&&w.transition&&(b.transition=w.transition)}h.forEach(w=>{const M=e.getBaseTarget(w),C=e.getValue(w);C&&(C.liveStyle=!0),b[w]=M??null}),f.push({animation:b})}let y=!!f.length;return r&&(l.initial===!1||l.initial===l.animate)&&!e.manuallyAnimateOnMount&&(y=!1),r=!1,y?t(f):Promise.resolve()}function a(c,l){if(n[c].isActive===l)return Promise.resolve();e.variantChildren?.forEach(f=>f.animationState?.setActive(c,l)),n[c].isActive=l;const u=o(c);for(const f in n)n[f].protectedKeys={};return u}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n,reset:()=>{n=Yu(),r=!0}}}function K0(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!gg(t,e):!1}function wn(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Yu(){return{animate:wn(!0),whileInView:wn(),whileHover:wn(),whileTap:wn(),whileDrag:wn(),whileFocus:wn(),exit:wn()}}class gn{constructor(t){this.isMounted=!1,this.node=t}update(){}}class Y0 extends gn{constructor(t){super(t),t.animationState||(t.animationState=J0(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Xi(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let X0=0;class Q0 extends gn{constructor(){super(...arguments),this.id=X0++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const Z0={animation:{Feature:Y0},exit:{Feature:Q0}};function ps(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function ks(e){return{point:{x:e.pageX,y:e.pageY}}}const e_=e=>t=>ol(t)&&e(t,ks(t));function rs(e,t,n,r){return ps(e,t,e_(n),r)}const yg=1e-4,t_=1-yg,n_=1+yg,bg=.01,r_=0-bg,s_=0+bg;function Ke(e){return e.max-e.min}function i_(e,t,n){return Math.abs(e-t)<=n}function Xu(e,t,n,r=.5){e.origin=r,e.originPoint=Ee(t.min,t.max,e.origin),e.scale=Ke(n)/Ke(t),e.translate=Ee(n.min,n.max,e.origin)-e.originPoint,(e.scale>=t_&&e.scale<=n_||isNaN(e.scale))&&(e.scale=1),(e.translate>=r_&&e.translate<=s_||isNaN(e.translate))&&(e.translate=0)}function ss(e,t,n,r){Xu(e.x,t.x,n.x,r?r.originX:void 0),Xu(e.y,t.y,n.y,r?r.originY:void 0)}function Qu(e,t,n){e.min=n.min+t.min,e.max=e.min+Ke(t)}function o_(e,t,n){Qu(e.x,t.x,n.x),Qu(e.y,t.y,n.y)}function Zu(e,t,n){e.min=t.min-n.min,e.max=e.min+Ke(t)}function is(e,t,n){Zu(e.x,t.x,n.x),Zu(e.y,t.y,n.y)}function at(e){return[e("x"),e("y")]}const wg=({current:e})=>e?e.ownerDocument.defaultView:null,ed=(e,t)=>Math.abs(e-t);function a_(e,t){const n=ed(e.x,t.x),r=ed(e.y,t.y);return Math.sqrt(n**2+r**2)}class xg{constructor(t,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Fo(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,g=a_(h.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!g)return;const{point:y}=h,{timestamp:b}=Be;this.history.push({...y,timestamp:b});const{onStart:w,onMove:M}=this.handlers;p||(w&&w(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),M&&M(this.lastMoveEvent,h)},this.handlePointerMove=(h,p)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=No(p,this.transformPagePoint),Se.update(this.updatePoint,!0)},this.handlePointerUp=(h,p)=>{this.end();const{onEnd:g,onSessionEnd:y,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=Fo(h.type==="pointercancel"?this.lastMoveEventInfo:No(p,this.transformPagePoint),this.history);this.startEvent&&g&&g(h,w),y&&y(h,w)},!ol(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=s||window;const a=ks(t),c=No(a,this.transformPagePoint),{point:l}=c,{timestamp:u}=Be;this.history=[{...l,timestamp:u}];const{onSessionStart:f}=n;f&&f(t,Fo(c,this.history)),this.removeListeners=xs(rs(this.contextWindow,"pointermove",this.handlePointerMove),rs(this.contextWindow,"pointerup",this.handlePointerUp),rs(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Ht(this.updatePoint)}}function No(e,t){return t?{point:t(e.point)}:e}function td(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Fo({point:e},t){return{point:e,delta:td(e,Sg(t)),offset:td(e,c_(t)),velocity:l_(t,.1)}}function c_(e){return e[0]}function Sg(e){return e[e.length-1]}function l_(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=Sg(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>xt(t)));)n--;if(!r)return{x:0,y:0};const i=Rt(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function u_(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Ee(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Ee(n,e,r.max):Math.min(e,n)),e}function nd(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function d_(e,{top:t,left:n,bottom:r,right:s}){return{x:nd(e.x,n,s),y:nd(e.y,t,r)}}function rd(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function f_(e,t){return{x:rd(e.x,t.x),y:rd(e.y,t.y)}}function h_(e,t){let n=.5;const r=Ke(e),s=Ke(t);return s>r?n=cs(t.min,t.max-r,e.min):r>s&&(n=cs(e.min,e.max-s,t.min)),zt(0,1,n)}function p_(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Ha=.35;function m_(e=Ha){return e===!1?e=0:e===!0&&(e=Ha),{x:sd(e,"left","right"),y:sd(e,"top","bottom")}}function sd(e,t,n){return{min:id(e,t),max:id(e,n)}}function id(e,t){return typeof e=="number"?e:e[t]||0}const g_=new WeakMap;class v_{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Pe(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=f=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ks(f).point)},o=(f,h)=>{const{drag:p,dragPropagation:g,onDragStart:y}=this.getProps();if(p&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=_S(p),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=h,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),at(w=>{let M=this.getAxisMotionValue(w).get()||0;if(Lt.test(M)){const{projection:C}=this.visualElement;if(C&&C.layout){const S=C.layout.layoutBox[w];S&&(M=Ke(S)*(parseFloat(M)/100))}}this.originPoint[w]=M}),y&&Se.postRender(()=>y(f,h)),Wa(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},a=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h;const{dragPropagation:p,dragDirectionLock:g,onDirectionLock:y,onDrag:b}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:w}=h;if(g&&this.currentDirection===null){this.currentDirection=y_(w),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",h.point,w),this.updateAxis("y",h.point,w),this.visualElement.render(),b&&b(f,h)},c=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h,this.stop(f,h),this.latestPointerEvent=null,this.latestPanInfo=null},l=()=>at(f=>this.getAnimationState(f)==="paused"&&this.getAxisMotionValue(f).animation?.play()),{dragSnapToOrigin:u}=this.getProps();this.panSession=new xg(t,{onSessionStart:i,onStart:o,onMove:a,onSessionEnd:c,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:r,contextWindow:wg(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,s=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!r)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Se.postRender(()=>a(r,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!Vs(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=u_(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;t&&rr(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=d_(r.layoutBox,t):this.constraints=!1,this.elastic=m_(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&at(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=p_(r.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!rr(t))return!1;const r=t.current;Wt(r!==null,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.","drag-constraints-ref");const{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=y0(r,s.root,this.visualElement.getTransformPagePoint());let o=f_(s.layout.layoutBox,i);if(n){const a=n(m0(o));this.hasMutatedConstraints=!!a,a&&(o=og(a))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},l=at(u=>{if(!Vs(u,n,this.currentDirection))return;let f=c&&c[u]||{};o&&(f={min:0,max:0});const h=s?200:1e6,p=s?40:1e7,g={type:"inertia",velocity:r?t[u]:0,bounceStiffness:h,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(u,g)});return Promise.all(l).then(a)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return Wa(this.visualElement,t),r.start(gl(t,r,0,n,this.visualElement,!1))}stopAnimation(){at(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){at(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){at(n=>{const{drag:r}=this.getProps();if(!Vs(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(t[n]-Ee(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!rr(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};at(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const c=a.get();s[o]=h_({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),at(o=>{if(!Vs(o,t,null))return;const a=this.getAxisMotionValue(o),{min:c,max:l}=this.constraints[o];a.set(Ee(c,l,s[o]))})}addListeners(){if(!this.visualElement.current)return;g_.set(this.visualElement,this);const t=this.visualElement.current,n=rs(t,"pointerdown",c=>{const{drag:l,dragListener:u=!0}=this.getProps();l&&u&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();rr(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Se.read(r);const o=ps(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:l})=>{this.isDragging&&l&&(at(u=>{const f=this.getAxisMotionValue(u);f&&(this.originPoint[u]+=c[u].translate,f.set(f.get()+c[u].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=Ha,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function Vs(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function y_(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class b_ extends gn{constructor(t){super(t),this.removeGroupControls=ut,this.removeListeners=ut,this.controls=new v_(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ut}unmount(){this.removeGroupControls(),this.removeListeners()}}const od=e=>(t,n)=>{e&&Se.postRender(()=>e(t,n))};class w_ extends gn{constructor(){super(...arguments),this.removePointerDownListener=ut}onPointerDown(t){this.session=new xg(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:wg(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:od(t),onStart:od(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&Se.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=rs(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const pi={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ad(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Gr={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(re.test(e))e=parseFloat(e);else return e;const n=ad(e,t.target.x),r=ad(e,t.target.y);return`${n}% ${r}%`}},x_={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=ln.parse(e);if(s.length>5)return r;const i=ln.createTransformer(e),o=typeof s[0]!="number"?1:0,a=n.x.scale*t.x,c=n.y.scale*t.y;s[0+o]/=a,s[1+o]/=c;const l=Ee(a,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=l),typeof s[3+o]=="number"&&(s[3+o]/=l),i(s)}};let cd=!1;class S_ extends R.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=t;zS(__),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),cd&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),pi.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,{projection:o}=r;return o&&(o.isPresent=i,cd=!0,s||t.layoutDependency!==n||n===void 0||t.isPresent!==i?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||Se.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),il.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function _g(e){const[t,n]=Hm(),r=R.useContext(Nc);return x.jsx(S_,{...e,layoutGroup:r,switchLayoutGroup:R.useContext(sg),isPresent:t,safeToRemove:n})}const __={borderRadius:{...Gr,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Gr,borderTopRightRadius:Gr,borderBottomLeftRadius:Gr,borderBottomRightRadius:Gr,boxShadow:x_};function k_(e,t,n){const r=Ue(e)?e:vr(e);return r.start(gl("",r,t,n)),r.animation}const C_=(e,t)=>e.depth-t.depth;class E_{constructor(){this.children=[],this.isDirty=!1}add(t){$c(this.children,t),this.isDirty=!0}remove(t){Vc(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(C_),this.isDirty=!1,this.children.forEach(t)}}function T_(e,t){const n=Xe.now(),r=({timestamp:s})=>{const i=s-n;i>=t&&(Ht(r),e(i-t))};return Se.setup(r,!0),()=>Ht(r)}const kg=["TopLeft","TopRight","BottomLeft","BottomRight"],M_=kg.length,ld=e=>typeof e=="string"?parseFloat(e):e,ud=e=>typeof e=="number"||re.test(e);function P_(e,t,n,r,s,i){s?(e.opacity=Ee(0,n.opacity??1,A_(r)),e.opacityExit=Ee(t.opacity??1,0,O_(r))):i&&(e.opacity=Ee(t.opacity??1,n.opacity??1,r));for(let o=0;o<M_;o++){const a=`border${kg[o]}Radius`;let c=dd(t,a),l=dd(n,a);if(c===void 0&&l===void 0)continue;c||(c=0),l||(l=0),c===0||l===0||ud(c)===ud(l)?(e[a]=Math.max(Ee(ld(c),ld(l),r),0),(Lt.test(l)||Lt.test(c))&&(e[a]+="%")):e[a]=l}(t.rotate||n.rotate)&&(e.rotate=Ee(t.rotate||0,n.rotate||0,r))}function dd(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const A_=Cg(0,.5,fm),O_=Cg(.5,.95,ut);function Cg(e,t,n){return r=>r<e?0:r>t?1:n(cs(e,t,r))}function fd(e,t){e.min=t.min,e.max=t.max}function ot(e,t){fd(e.x,t.x),fd(e.y,t.y)}function hd(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function pd(e,t,n,r,s){return e-=t,e=Pi(e,1/n,r),s!==void 0&&(e=Pi(e,1/s,r)),e}function R_(e,t=0,n=1,r=.5,s,i=e,o=e){if(Lt.test(t)&&(t=parseFloat(t),t=Ee(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=Ee(i.min,i.max,r);e===i&&(a-=t),e.min=pd(e.min,t,n,a,s),e.max=pd(e.max,t,n,a,s)}function md(e,t,[n,r,s],i,o){R_(e,t[n],t[r],t[s],t.scale,i,o)}const L_=["x","scaleX","originX"],j_=["y","scaleY","originY"];function gd(e,t,n,r){md(e.x,t,L_,n?n.x:void 0,r?r.x:void 0),md(e.y,t,j_,n?n.y:void 0,r?r.y:void 0)}function vd(e){return e.translate===0&&e.scale===1}function Eg(e){return vd(e.x)&&vd(e.y)}function yd(e,t){return e.min===t.min&&e.max===t.max}function D_(e,t){return yd(e.x,t.x)&&yd(e.y,t.y)}function bd(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Tg(e,t){return bd(e.x,t.x)&&bd(e.y,t.y)}function wd(e){return Ke(e.x)/Ke(e.y)}function xd(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class I_{constructor(){this.members=[]}add(t){$c(this.members,t),t.scheduleRender()}remove(t){if(Vc(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function N_(e,t,n){let r="";const s=e.x.translate/t.x,i=e.y.translate/t.y,o=n?.z||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:l,rotate:u,rotateX:f,rotateY:h,skewX:p,skewY:g}=n;l&&(r=`perspective(${l}px) ${r}`),u&&(r+=`rotate(${u}deg) `),f&&(r+=`rotateX(${f}deg) `),h&&(r+=`rotateY(${h}deg) `),p&&(r+=`skewX(${p}deg) `),g&&(r+=`skewY(${g}deg) `)}const a=e.x.scale*t.x,c=e.y.scale*t.y;return(a!==1||c!==1)&&(r+=`scale(${a}, ${c})`),r||"none"}const Bo=["","X","Y","Z"],F_=1e3;let B_=0;function $o(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function Mg(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=pg(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Se,!(s||i))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&Mg(r)}function Pg({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=t?.()){this.id=B_++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(U_),this.nodes.forEach(H_),this.nodes.forEach(G_),this.nodes.forEach(z_)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new E_)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new zc),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const c=this.eventHandlers.get(o);c&&c.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=qm(o)&&!PS(o),this.instance=o;const{layoutId:a,layout:c,visualElement:l}=this.options;if(l&&!l.current&&l.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||a)&&(this.isLayoutDirty=!0),e){let u,f=0;const h=()=>this.root.updateBlockedByResize=!1;Se.read(()=>{f=window.innerWidth}),e(o,()=>{const p=window.innerWidth;p!==f&&(f=p,this.root.updateBlockedByResize=!0,u&&u(),u=T_(h,250),pi.hasAnimatedSinceResize&&(pi.hasAnimatedSinceResize=!1,this.nodes.forEach(kd)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&l&&(a||c)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:f,hasRelativeLayoutChanged:h,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||l.getDefaultTransition()||Q_,{onLayoutAnimationStart:y,onLayoutAnimationComplete:b}=l.getProps(),w=!this.targetLayout||!Tg(this.targetLayout,p),M=!f&&h;if(this.options.layoutRoot||this.resumeFrom||M||f&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const C={...rl(g,"layout"),onPlay:y,onComplete:b};(l.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C),this.setAnimationOrigin(u,M)}else f||kd(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ht(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(J_),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Mg(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const f=this.path[u];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const l=this.getTransformTemplate();this.prevTransformTemplateValue=l?l(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Sd);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(_d);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(q_),this.nodes.forEach($_),this.nodes.forEach(V_)):this.nodes.forEach(_d),this.clearAllSnapshots();const a=Xe.now();Be.delta=zt(0,1e3/60,a-Be.timestamp),Be.timestamp=a,Be.isProcessing=!0,Po.update.process(Be),Po.preRender.process(Be),Po.render.process(Be),Be.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,il.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(W_),this.sharedNodes.forEach(K_)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Se.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Se.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ke(this.snapshot.measuredBox.x)&&!Ke(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Pe(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!Eg(this.projectionDelta),c=this.getTransformTemplate(),l=c?c(this.latestValues,""):void 0,u=l!==this.prevTransformTemplateValue;o&&this.instance&&(a||Pn(this.latestValues)||u)&&(s(this.instance,l),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return o&&(c=this.removeTransform(c)),Z_(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Pe();const a=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(ek))){const{scroll:l}=this.root;l&&(sr(a.x,l.offset.x),sr(a.y,l.offset.y))}return a}removeElementScroll(o){const a=Pe();if(ot(a,o),this.scroll?.wasRoot)return a;for(let c=0;c<this.path.length;c++){const l=this.path[c],{scroll:u,options:f}=l;l!==this.root&&u&&f.layoutScroll&&(u.wasRoot&&ot(a,o),sr(a.x,u.offset.x),sr(a.y,u.offset.y))}return a}applyTransform(o,a=!1){const c=Pe();ot(c,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&ir(c,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Pn(u.latestValues)&&ir(c,u.latestValues)}return Pn(this.latestValues)&&ir(c,this.latestValues),c}removeTransform(o){const a=Pe();ot(a,o);for(let c=0;c<this.path.length;c++){const l=this.path[c];if(!l.instance||!Pn(l.latestValues))continue;$a(l.latestValues)&&l.updateSnapshot();const u=Pe(),f=l.measurePageBox();ot(u,f),gd(a,l.latestValues,l.snapshot?l.snapshot.layoutBox:void 0,u)}return Pn(this.latestValues)&&gd(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Be.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==a;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:f}=this.options;if(!(!this.layout||!(u||f))){if(this.resolvedRelativeTargetAt=Be.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pe(),this.relativeTargetOrigin=Pe(),is(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),ot(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Pe(),this.targetWithTransforms=Pe()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),o_(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ot(this.target,this.layout.layoutBox),cg(this.target,this.targetDelta)):ot(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pe(),this.relativeTargetOrigin=Pe(),is(this.relativeTargetOrigin,this.target,h.target),ot(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||$a(this.parent.latestValues)||ag(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),a=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Be.timestamp&&(c=!1),c)return;const{layout:l,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(l||u))return;ot(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,h=this.treeScale.y;v0(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Pe());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(hd(this.prevProjectionDelta.x,this.projectionDelta.x),hd(this.prevProjectionDelta.y,this.projectionDelta.y)),ss(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==h||!xd(this.projectionDelta.x,this.prevProjectionDelta.x)||!xd(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=or(),this.projectionDelta=or(),this.projectionDeltaWithTransform=or()}setAnimationOrigin(o,a=!1){const c=this.snapshot,l=c?c.latestValues:{},u={...this.latestValues},f=or();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const h=Pe(),p=c?c.source:void 0,g=this.layout?this.layout.source:void 0,y=p!==g,b=this.getStack(),w=!b||b.members.length<=1,M=!!(y&&!w&&this.options.crossfade===!0&&!this.path.some(X_));this.animationProgress=0;let C;this.mixTargetDelta=S=>{const _=S/1e3;Cd(f.x,o.x,_),Cd(f.y,o.y,_),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(is(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Y_(this.relativeTarget,this.relativeTargetOrigin,h,_),C&&D_(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=Pe()),ot(C,this.relativeTarget)),y&&(this.animationValues=u,P_(u,l,this.latestValues,_,M,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=_},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Ht(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Se.update(()=>{pi.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=vr(0)),this.currentAnimation=k_(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(F_),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:c,layout:l,latestValues:u}=o;if(!(!a||!c||!l)){if(this!==o&&this.layout&&l&&Ag(this.options.animationType,this.layout.layoutBox,l.layoutBox)){c=this.target||Pe();const f=Ke(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+f;const h=Ke(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+h}ot(a,c),ir(a,u),ss(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new I_),this.sharedNodes.get(o).add(a);const l=a.options.initialPromotionConfig;a.promote({transition:l?l.transition:void 0,preserveFollowOpacity:l&&l.shouldPreserveFollowOpacity?l.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:c}={}){const l=this.getStack();l&&l.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(a=!0),!a)return;const l={};c.z&&$o("z",o,l,this.animationValues);for(let u=0;u<Bo.length;u++)$o(`rotate${Bo[u]}`,o,l,this.animationValues),$o(`skew${Bo[u]}`,o,l,this.animationValues);o.render();for(const u in l)o.setStaticValue(u,l[u]),this.animationValues&&(this.animationValues[u]=l[u]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=hi(a?.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const l=this.getLead();if(!this.projectionDelta||!this.layout||!l.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=hi(a?.pointerEvents)||""),this.hasProjected&&!Pn(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const u=l.animationValues||l.latestValues;this.applyTransformsToTarget();let f=N_(this.projectionDeltaWithTransform,this.treeScale,u);c&&(f=c(u,f)),o.transform=f;const{x:h,y:p}=this.projectionDelta;o.transformOrigin=`${h.origin*100}% ${p.origin*100}% 0`,l.animationValues?o.opacity=l===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:o.opacity=l===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const g in fs){if(u[g]===void 0)continue;const{correct:y,applyTo:b,isCSSVariable:w}=fs[g],M=f==="none"?u[g]:y(u[g],l);if(b){const C=b.length;for(let S=0;S<C;S++)o[b[S]]=M}else w?this.options.visualElement.renderState.vars[g]=M:o[g]=M}this.options.layoutId&&(o.pointerEvents=l===this?hi(a?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(Sd),this.root.sharedNodes.clear()}}}function $_(e){e.updateLayout()}function V_(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=e.layout,{animationType:s}=e.options,i=t.source!==e.layout.source;s==="size"?at(u=>{const f=i?t.measuredBox[u]:t.layoutBox[u],h=Ke(f);f.min=n[u].min,f.max=f.min+h}):Ag(s,t.layoutBox,n)&&at(u=>{const f=i?t.measuredBox[u]:t.layoutBox[u],h=Ke(n[u]);f.max=f.min+h,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[u].max=e.relativeTarget[u].min+h)});const o=or();ss(o,n,t.layoutBox);const a=or();i?ss(a,e.applyTransform(r,!0),t.measuredBox):ss(a,n,t.layoutBox);const c=!Eg(o);let l=!1;if(!e.resumeFrom){const u=e.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:f,layout:h}=u;if(f&&h){const p=Pe();is(p,t.layoutBox,f.layoutBox);const g=Pe();is(g,n,h.layoutBox),Tg(p,g)||(l=!0),u.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=p,e.relativeParent=u)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:a,layoutDelta:o,hasLayoutChanged:c,hasRelativeLayoutChanged:l})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function U_(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function z_(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function W_(e){e.clearSnapshot()}function Sd(e){e.clearMeasurements()}function _d(e){e.isLayoutDirty=!1}function q_(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function kd(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function H_(e){e.resolveTargetDelta()}function G_(e){e.calcProjection()}function J_(e){e.resetSkewAndRotation()}function K_(e){e.removeLeadSnapshot()}function Cd(e,t,n){e.translate=Ee(t.translate,0,n),e.scale=Ee(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Ed(e,t,n,r){e.min=Ee(t.min,n.min,r),e.max=Ee(t.max,n.max,r)}function Y_(e,t,n,r){Ed(e.x,t.x,n.x,r),Ed(e.y,t.y,n.y,r)}function X_(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const Q_={duration:.45,ease:[.4,0,.1,1]},Td=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Md=Td("applewebkit/")&&!Td("chrome/")?Math.round:ut;function Pd(e){e.min=Md(e.min),e.max=Md(e.max)}function Z_(e){Pd(e.x),Pd(e.y)}function Ag(e,t,n){return e==="position"||e==="preserve-aspect"&&!i_(wd(t),wd(n),.2)}function ek(e){return e!==e.root&&e.scroll?.wasRoot}const tk=Pg({attachResizeListener:(e,t)=>ps(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Vo={current:void 0},Og=Pg({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Vo.current){const e=new tk({});e.mount(window),e.setOptions({layoutScroll:!0}),Vo.current=e}return Vo.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),nk={pan:{Feature:w_},drag:{Feature:b_,ProjectionNode:Og,MeasureLayout:_g}};function Ad(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&Se.postRender(()=>i(t,ks(t)))}class rk extends gn{mount(){const{current:t}=this.node;t&&(this.unmount=kS(t,(n,r)=>(Ad(this.node,r,"Start"),s=>Ad(this.node,s,"End"))))}unmount(){}}class sk extends gn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=xs(ps(this.node.current,"focus",()=>this.onFocus()),ps(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Od(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&Se.postRender(()=>i(t,ks(t)))}class ik extends gn{mount(){const{current:t}=this.node;t&&(this.unmount=MS(t,(n,r)=>(Od(this.node,r,"Start"),(s,{success:i})=>Od(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ga=new WeakMap,Uo=new WeakMap,ok=e=>{const t=Ga.get(e.target);t&&t(e)},ak=e=>{e.forEach(ok)};function ck({root:e,...t}){const n=e||document;Uo.has(n)||Uo.set(n,{});const r=Uo.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(ak,{root:e,...t})),r[s]}function lk(e,t,n){const r=ck(t);return Ga.set(e,n),r.observe(e),()=>{Ga.delete(e),r.unobserve(e)}}const uk={some:0,all:1};class dk extends gn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:uk[s]},a=c=>{const{isIntersecting:l}=c;if(this.isInView===l||(this.isInView=l,i&&!l&&this.hasEnteredView))return;l&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",l);const{onViewportEnter:u,onViewportLeave:f}=this.node.getProps(),h=l?u:f;h&&h(c)};return lk(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(fk(t,n))&&this.startObserver()}unmount(){}}function fk({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const hk={inView:{Feature:dk},tap:{Feature:ik},focus:{Feature:sk},hover:{Feature:rk}},pk={layout:{ProjectionNode:Og,MeasureLayout:_g}},mk={...Z0,...hk,...nk,...pk},Rd=p0(mk,T0);class gk{state={messages:[],isLoading:!1,lastUpdated:new Date().toISOString()};listeners=new Set;storageKey="scxl_conversation_state";constructor(){this.clearStorageOnStart()}clearStorageOnStart(){try{localStorage.removeItem(this.storageKey),sessionStorage.removeItem(this.storageKey)}catch(t){console.warn("Failed to clear conversation storage:",t)}}subscribe(t){return this.listeners.add(t),()=>{this.listeners.delete(t)}}notify(){this.state.lastUpdated=new Date().toISOString(),this.saveToStorage(),this.listeners.forEach(t=>t())}getState(){return{...this.state}}getMessages(){return[...this.state.messages]}addMessage(t){const n={...t,id:this.generateId(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return this.state.messages.push(n),this.notify(),n}updateMessage(t,n){const r=this.state.messages.findIndex(s=>s.id===t);return r!==-1?(this.state.messages[r]={...this.state.messages[r],...n,updatedAt:new Date().toISOString()},this.notify(),this.state.messages[r]):null}updateOrAddMessage(t,n,r){const s=new Date().toISOString();if(t==="assistant"){let i=-1;for(let o=this.state.messages.length-1;o>=0;o--)if(this.state.messages[o].role==="assistant"&&!this.state.messages[o].final){i=o;break}if(i!==-1){const o=this.state.messages[i];return this.state.messages[i]={...o,content:o.content+n,final:r,updatedAt:s},this.notify(),this.state.messages[i]}}return this.addMessage({role:t,content:n,final:r})}clearMessages(){this.state.messages=[],this.notify()}setLoading(t){this.state.isLoading=t,this.notify()}cleanupOldMessages(t=24){const n=new Date;n.setHours(n.getHours()-t),this.state.messages=this.state.messages.filter(r=>new Date(r.createdAt)>n),this.notify()}findMessage(t){return this.state.messages.find(n=>n.id===t)}getMergedMessages(t=3e4){const n=[];for(let r=0;r<this.state.messages.length;r++){const s=this.state.messages[r],i=n[n.length-1],o=i?Math.abs(new Date(s.createdAt).getTime()-new Date(i.createdAt).getTime()):1/0;i&&i.role===s.role&&o<t?n[n.length-1]={...i,content:`${i.content} ${s.content}`,updatedAt:s.updatedAt||s.createdAt,final:s.final!==!1}:n.push({...s})}return n}saveToStorage(){try{localStorage.setItem(this.storageKey,JSON.stringify(this.state))}catch(t){console.warn("Failed to save conversation to localStorage:",t)}}markAllMessagesAsStale(){this.state.messages=this.state.messages.map(t=>({...t,isFresh:!1})),this.notify()}markMessageAsFresh(t){const n=this.state.messages.findIndex(r=>r.id===t);n!==-1&&(this.state.messages=this.state.messages.map(r=>({...r,isFresh:!1})),this.state.messages[n]={...this.state.messages[n],isFresh:!0},this.notify())}markLatestAssistantAsFresh(){const t=this.state.messages.slice().reverse().findIndex(n=>n.role==="assistant");if(t!==-1){const n=this.state.messages.length-1-t,r=this.state.messages[n].id;this.markMessageAsFresh(r)}}generateId(){return`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}}const me=new gk,Rg=({onMessageAdded:e}={})=>{const[t,n]=R.useState(me.getState());R.useEffect(()=>me.subscribe(()=>{n(me.getState())}),[]),$e(Q.Connected,()=>{me.clearMessages()}),$e(Q.BotLlmStarted,()=>{const c=me.getMessages().slice().reverse().find(l=>l.role==="assistant");if(!c||c.content){const l=me.addMessage({role:"assistant",content:"",final:!1,isFresh:!0});me.markMessageAsFresh(l.id),e?.(l)}else me.markMessageAsFresh(c.id)}),$e(Q.BotLlmText,a=>{const l=me.getMessages().slice().reverse().find(u=>u.role==="assistant");if(l&&!l.final){const u=me.updateMessage(l.id,{content:l.content+a.text});u&&e?.(u)}else{const u=me.addMessage({role:"assistant",content:a.text,final:!1});e?.(u)}}),$e(Q.BotLlmStopped,()=>{const a=me.getMessages(),c=a.slice().reverse().find(l=>l.role==="assistant");if(c)if(c.content){const l=me.updateMessage(c.id,{final:!0});l&&e?.(l)}else{const l=a.findIndex(u=>u.id===c.id);if(l!==-1){const u=[...a];u.splice(l,1),me.clearMessages(),u.forEach(f=>me.addMessage(f))}}}),$e(Q.UserStartedSpeaking,()=>{const c=me.getMessages().slice().reverse().find(l=>l.role==="user");if(!c||c.content){const l=me.addMessage({role:"user",content:"",final:!1});e?.(l)}}),$e(Q.UserTranscript,a=>{const l=me.getMessages().slice().reverse().find(u=>u.role==="user"&&!u.final);if(l){const u=me.updateMessage(l.id,{content:a.text,final:a.final});u&&e?.(u)}else{const u=me.addMessage({role:"user",content:a.text,final:a.final});e?.(u)}}),$e(Q.UserStoppedSpeaking,()=>{setTimeout(()=>{const a=me.getMessages(),c=a.slice().reverse().find(l=>l.role==="user");if(c&&!c.content){const l=a.findIndex(u=>u.id===c.id);if(l!==-1){const u=[...a];u.splice(l,1),me.clearMessages(),u.forEach(f=>me.addMessage(f))}}},5e3)});const r=a=>{const c=me.addMessage({role:"user",content:a,final:!0});return e?.(c),c},s=a=>{const c=me.addMessage({role:"assistant",content:a,final:!0});return e?.(c),c},i=()=>{me.clearMessages()},o=a=>{me.setLoading(a)};return{messages:me.getMergedMessages(),isLoading:t.isLoading,lastUpdated:t.lastUpdated,addUserMessage:r,addAssistantMessage:s,clearMessages:i,setLoading:o}},vl="-",vk=e=>{const t=bk(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const a=o.split(vl);return a[0]===""&&a.length!==1&&a.shift(),Lg(a,t)||yk(o)},getConflictingClassGroupIds:(o,a)=>{const c=n[o]||[];return a&&r[o]?[...c,...r[o]]:c}}},Lg=(e,t)=>{if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?Lg(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const i=e.join(vl);return t.validators.find(({validator:o})=>o(i))?.classGroupId},Ld=/^\[(.+)\]$/,yk=e=>{if(Ld.test(e)){const t=Ld.exec(e)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},bk=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const s in n)Ja(n[s],r,s,t);return r},Ja=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const i=s===""?t:jd(t,s);i.classGroupId=n;return}if(typeof s=="function"){if(wk(s)){Ja(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{Ja(o,jd(t,i),n,r)})})},jd=(e,t)=>{let n=e;return t.split(vl).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},wk=e=>e.isThemeGetter,xk=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},Ka="!",Ya=":",Sk=Ya.length,_k=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=s=>{const i=[];let o=0,a=0,c=0,l;for(let g=0;g<s.length;g++){let y=s[g];if(o===0&&a===0){if(y===Ya){i.push(s.slice(c,g)),c=g+Sk;continue}if(y==="/"){l=g;continue}}y==="["?o++:y==="]"?o--:y==="("?a++:y===")"&&a--}const u=i.length===0?s:s.substring(c),f=kk(u),h=f!==u,p=l&&l>c?l-c:void 0;return{modifiers:i,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}};if(t){const s=t+Ya,i=r;r=o=>o.startsWith(s)?i(o.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(n){const s=r;r=i=>n({className:i,parseClassName:s})}return r},kk=e=>e.endsWith(Ka)?e.substring(0,e.length-1):e.startsWith(Ka)?e.substring(1):e,Ck=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const s=[];let i=[];return r.forEach(o=>{o[0]==="["||t[o]?(s.push(...i.sort(),o),i=[]):i.push(o)}),s.push(...i.sort()),s}},Ek=e=>({cache:xk(e.cacheSize),parseClassName:_k(e),sortModifiers:Ck(e),...vk(e)}),Tk=/\s+/,Mk=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:i}=t,o=[],a=e.trim().split(Tk);let c="";for(let l=a.length-1;l>=0;l-=1){const u=a[l],{isExternal:f,modifiers:h,hasImportantModifier:p,baseClassName:g,maybePostfixModifierPosition:y}=n(u);if(f){c=u+(c.length>0?" "+c:c);continue}let b=!!y,w=r(b?g.substring(0,y):g);if(!w){if(!b){c=u+(c.length>0?" "+c:c);continue}if(w=r(g),!w){c=u+(c.length>0?" "+c:c);continue}b=!1}const M=i(h).join(":"),C=p?M+Ka:M,S=C+w;if(o.includes(S))continue;o.push(S);const _=s(w,b);for(let O=0;O<_.length;++O){const k=_[O];o.push(C+k)}c=u+(c.length>0?" "+c:c)}return c};function Pk(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=jg(t))&&(r&&(r+=" "),r+=n);return r}const jg=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=jg(e[r]))&&(n&&(n+=" "),n+=t);return n};function Ak(e,...t){let n,r,s,i=o;function o(c){const l=t.reduce((u,f)=>f(u),e());return n=Ek(l),r=n.cache.get,s=n.cache.set,i=a,a(c)}function a(c){const l=r(c);if(l)return l;const u=Mk(c,n);return s(c,u),u}return function(){return i(Pk.apply(null,arguments))}}const Re=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},Dg=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Ig=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Ok=/^\d+\/\d+$/,Rk=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Lk=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,jk=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Dk=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Ik=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Kn=e=>Ok.test(e),ce=e=>!!e&&!Number.isNaN(Number(e)),Xt=e=>!!e&&Number.isInteger(Number(e)),zo=e=>e.endsWith("%")&&ce(e.slice(0,-1)),Nt=e=>Rk.test(e),Nk=()=>!0,Fk=e=>Lk.test(e)&&!jk.test(e),Ng=()=>!1,Bk=e=>Dk.test(e),$k=e=>Ik.test(e),Vk=e=>!K(e)&&!Y(e),Uk=e=>Lr(e,$g,Ng),K=e=>Dg.test(e),xn=e=>Lr(e,Vg,Fk),Wo=e=>Lr(e,Gk,ce),Dd=e=>Lr(e,Fg,Ng),zk=e=>Lr(e,Bg,$k),Us=e=>Lr(e,Ug,Bk),Y=e=>Ig.test(e),Jr=e=>jr(e,Vg),Wk=e=>jr(e,Jk),Id=e=>jr(e,Fg),qk=e=>jr(e,$g),Hk=e=>jr(e,Bg),zs=e=>jr(e,Ug,!0),Lr=(e,t,n)=>{const r=Dg.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},jr=(e,t,n=!1)=>{const r=Ig.exec(e);return r?r[1]?t(r[1]):n:!1},Fg=e=>e==="position"||e==="percentage",Bg=e=>e==="image"||e==="url",$g=e=>e==="length"||e==="size"||e==="bg-size",Vg=e=>e==="length",Gk=e=>e==="number",Jk=e=>e==="family-name",Ug=e=>e==="shadow",Kk=()=>{const e=Re("color"),t=Re("font"),n=Re("text"),r=Re("font-weight"),s=Re("tracking"),i=Re("leading"),o=Re("breakpoint"),a=Re("container"),c=Re("spacing"),l=Re("radius"),u=Re("shadow"),f=Re("inset-shadow"),h=Re("text-shadow"),p=Re("drop-shadow"),g=Re("blur"),y=Re("perspective"),b=Re("aspect"),w=Re("ease"),M=Re("animate"),C=()=>["auto","avoid","all","avoid-page","page","left","right","column"],S=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],_=()=>[...S(),Y,K],O=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto","contain","none"],P=()=>[Y,K,c],L=()=>[Kn,"full","auto",...P()],j=()=>[Xt,"none","subgrid",Y,K],N=()=>["auto",{span:["full",Xt,Y,K]},Xt,Y,K],U=()=>[Xt,"auto",Y,K],H=()=>["auto","min","max","fr",Y,K],V=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],G=()=>["start","end","center","stretch","center-safe","end-safe"],X=()=>["auto",...P()],q=()=>[Kn,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...P()],I=()=>[e,Y,K],ne=()=>[...S(),Id,Dd,{position:[Y,K]}],F=()=>["no-repeat",{repeat:["","x","y","space","round"]}],te=()=>["auto","cover","contain",qk,Uk,{size:[Y,K]}],fe=()=>[zo,Jr,xn],d=()=>["","none","full",l,Y,K],v=()=>["",ce,Jr,xn],m=()=>["solid","dashed","dotted","double"],E=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],T=()=>[ce,zo,Id,Dd],D=()=>["","none",g,Y,K],z=()=>["none",ce,Y,K],W=()=>["none",ce,Y,K],J=()=>[ce,Y,K],ie=()=>[Kn,"full",...P()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Nt],breakpoint:[Nt],color:[Nk],container:[Nt],"drop-shadow":[Nt],ease:["in","out","in-out"],font:[Vk],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Nt],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Nt],shadow:[Nt],spacing:["px",ce],text:[Nt],"text-shadow":[Nt],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Kn,K,Y,b]}],container:["container"],columns:[{columns:[ce,K,Y,a]}],"break-after":[{"break-after":C()}],"break-before":[{"break-before":C()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:_()}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:L()}],"inset-x":[{"inset-x":L()}],"inset-y":[{"inset-y":L()}],start:[{start:L()}],end:[{end:L()}],top:[{top:L()}],right:[{right:L()}],bottom:[{bottom:L()}],left:[{left:L()}],visibility:["visible","invisible","collapse"],z:[{z:[Xt,"auto",Y,K]}],basis:[{basis:[Kn,"full","auto",a,...P()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ce,Kn,"auto","initial","none",K]}],grow:[{grow:["",ce,Y,K]}],shrink:[{shrink:["",ce,Y,K]}],order:[{order:[Xt,"first","last","none",Y,K]}],"grid-cols":[{"grid-cols":j()}],"col-start-end":[{col:N()}],"col-start":[{"col-start":U()}],"col-end":[{"col-end":U()}],"grid-rows":[{"grid-rows":j()}],"row-start-end":[{row:N()}],"row-start":[{"row-start":U()}],"row-end":[{"row-end":U()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":H()}],"auto-rows":[{"auto-rows":H()}],gap:[{gap:P()}],"gap-x":[{"gap-x":P()}],"gap-y":[{"gap-y":P()}],"justify-content":[{justify:[...V(),"normal"]}],"justify-items":[{"justify-items":[...G(),"normal"]}],"justify-self":[{"justify-self":["auto",...G()]}],"align-content":[{content:["normal",...V()]}],"align-items":[{items:[...G(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...G(),{baseline:["","last"]}]}],"place-content":[{"place-content":V()}],"place-items":[{"place-items":[...G(),"baseline"]}],"place-self":[{"place-self":["auto",...G()]}],p:[{p:P()}],px:[{px:P()}],py:[{py:P()}],ps:[{ps:P()}],pe:[{pe:P()}],pt:[{pt:P()}],pr:[{pr:P()}],pb:[{pb:P()}],pl:[{pl:P()}],m:[{m:X()}],mx:[{mx:X()}],my:[{my:X()}],ms:[{ms:X()}],me:[{me:X()}],mt:[{mt:X()}],mr:[{mr:X()}],mb:[{mb:X()}],ml:[{ml:X()}],"space-x":[{"space-x":P()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":P()}],"space-y-reverse":["space-y-reverse"],size:[{size:q()}],w:[{w:[a,"screen",...q()]}],"min-w":[{"min-w":[a,"screen","none",...q()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},...q()]}],h:[{h:["screen","lh",...q()]}],"min-h":[{"min-h":["screen","lh","none",...q()]}],"max-h":[{"max-h":["screen","lh",...q()]}],"font-size":[{text:["base",n,Jr,xn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Y,Wo]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",zo,K]}],"font-family":[{font:[Wk,K,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Y,K]}],"line-clamp":[{"line-clamp":[ce,"none",Y,Wo]}],leading:[{leading:[i,...P()]}],"list-image":[{"list-image":["none",Y,K]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Y,K]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:I()}],"text-color":[{text:I()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...m(),"wavy"]}],"text-decoration-thickness":[{decoration:[ce,"from-font","auto",Y,xn]}],"text-decoration-color":[{decoration:I()}],"underline-offset":[{"underline-offset":[ce,"auto",Y,K]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Y,K]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Y,K]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ne()}],"bg-repeat":[{bg:F()}],"bg-size":[{bg:te()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Xt,Y,K],radial:["",Y,K],conic:[Xt,Y,K]},Hk,zk]}],"bg-color":[{bg:I()}],"gradient-from-pos":[{from:fe()}],"gradient-via-pos":[{via:fe()}],"gradient-to-pos":[{to:fe()}],"gradient-from":[{from:I()}],"gradient-via":[{via:I()}],"gradient-to":[{to:I()}],rounded:[{rounded:d()}],"rounded-s":[{"rounded-s":d()}],"rounded-e":[{"rounded-e":d()}],"rounded-t":[{"rounded-t":d()}],"rounded-r":[{"rounded-r":d()}],"rounded-b":[{"rounded-b":d()}],"rounded-l":[{"rounded-l":d()}],"rounded-ss":[{"rounded-ss":d()}],"rounded-se":[{"rounded-se":d()}],"rounded-ee":[{"rounded-ee":d()}],"rounded-es":[{"rounded-es":d()}],"rounded-tl":[{"rounded-tl":d()}],"rounded-tr":[{"rounded-tr":d()}],"rounded-br":[{"rounded-br":d()}],"rounded-bl":[{"rounded-bl":d()}],"border-w":[{border:v()}],"border-w-x":[{"border-x":v()}],"border-w-y":[{"border-y":v()}],"border-w-s":[{"border-s":v()}],"border-w-e":[{"border-e":v()}],"border-w-t":[{"border-t":v()}],"border-w-r":[{"border-r":v()}],"border-w-b":[{"border-b":v()}],"border-w-l":[{"border-l":v()}],"divide-x":[{"divide-x":v()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":v()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...m(),"hidden","none"]}],"divide-style":[{divide:[...m(),"hidden","none"]}],"border-color":[{border:I()}],"border-color-x":[{"border-x":I()}],"border-color-y":[{"border-y":I()}],"border-color-s":[{"border-s":I()}],"border-color-e":[{"border-e":I()}],"border-color-t":[{"border-t":I()}],"border-color-r":[{"border-r":I()}],"border-color-b":[{"border-b":I()}],"border-color-l":[{"border-l":I()}],"divide-color":[{divide:I()}],"outline-style":[{outline:[...m(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ce,Y,K]}],"outline-w":[{outline:["",ce,Jr,xn]}],"outline-color":[{outline:I()}],shadow:[{shadow:["","none",u,zs,Us]}],"shadow-color":[{shadow:I()}],"inset-shadow":[{"inset-shadow":["none",f,zs,Us]}],"inset-shadow-color":[{"inset-shadow":I()}],"ring-w":[{ring:v()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:I()}],"ring-offset-w":[{"ring-offset":[ce,xn]}],"ring-offset-color":[{"ring-offset":I()}],"inset-ring-w":[{"inset-ring":v()}],"inset-ring-color":[{"inset-ring":I()}],"text-shadow":[{"text-shadow":["none",h,zs,Us]}],"text-shadow-color":[{"text-shadow":I()}],opacity:[{opacity:[ce,Y,K]}],"mix-blend":[{"mix-blend":[...E(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":E()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ce]}],"mask-image-linear-from-pos":[{"mask-linear-from":T()}],"mask-image-linear-to-pos":[{"mask-linear-to":T()}],"mask-image-linear-from-color":[{"mask-linear-from":I()}],"mask-image-linear-to-color":[{"mask-linear-to":I()}],"mask-image-t-from-pos":[{"mask-t-from":T()}],"mask-image-t-to-pos":[{"mask-t-to":T()}],"mask-image-t-from-color":[{"mask-t-from":I()}],"mask-image-t-to-color":[{"mask-t-to":I()}],"mask-image-r-from-pos":[{"mask-r-from":T()}],"mask-image-r-to-pos":[{"mask-r-to":T()}],"mask-image-r-from-color":[{"mask-r-from":I()}],"mask-image-r-to-color":[{"mask-r-to":I()}],"mask-image-b-from-pos":[{"mask-b-from":T()}],"mask-image-b-to-pos":[{"mask-b-to":T()}],"mask-image-b-from-color":[{"mask-b-from":I()}],"mask-image-b-to-color":[{"mask-b-to":I()}],"mask-image-l-from-pos":[{"mask-l-from":T()}],"mask-image-l-to-pos":[{"mask-l-to":T()}],"mask-image-l-from-color":[{"mask-l-from":I()}],"mask-image-l-to-color":[{"mask-l-to":I()}],"mask-image-x-from-pos":[{"mask-x-from":T()}],"mask-image-x-to-pos":[{"mask-x-to":T()}],"mask-image-x-from-color":[{"mask-x-from":I()}],"mask-image-x-to-color":[{"mask-x-to":I()}],"mask-image-y-from-pos":[{"mask-y-from":T()}],"mask-image-y-to-pos":[{"mask-y-to":T()}],"mask-image-y-from-color":[{"mask-y-from":I()}],"mask-image-y-to-color":[{"mask-y-to":I()}],"mask-image-radial":[{"mask-radial":[Y,K]}],"mask-image-radial-from-pos":[{"mask-radial-from":T()}],"mask-image-radial-to-pos":[{"mask-radial-to":T()}],"mask-image-radial-from-color":[{"mask-radial-from":I()}],"mask-image-radial-to-color":[{"mask-radial-to":I()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":S()}],"mask-image-conic-pos":[{"mask-conic":[ce]}],"mask-image-conic-from-pos":[{"mask-conic-from":T()}],"mask-image-conic-to-pos":[{"mask-conic-to":T()}],"mask-image-conic-from-color":[{"mask-conic-from":I()}],"mask-image-conic-to-color":[{"mask-conic-to":I()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ne()}],"mask-repeat":[{mask:F()}],"mask-size":[{mask:te()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Y,K]}],filter:[{filter:["","none",Y,K]}],blur:[{blur:D()}],brightness:[{brightness:[ce,Y,K]}],contrast:[{contrast:[ce,Y,K]}],"drop-shadow":[{"drop-shadow":["","none",p,zs,Us]}],"drop-shadow-color":[{"drop-shadow":I()}],grayscale:[{grayscale:["",ce,Y,K]}],"hue-rotate":[{"hue-rotate":[ce,Y,K]}],invert:[{invert:["",ce,Y,K]}],saturate:[{saturate:[ce,Y,K]}],sepia:[{sepia:["",ce,Y,K]}],"backdrop-filter":[{"backdrop-filter":["","none",Y,K]}],"backdrop-blur":[{"backdrop-blur":D()}],"backdrop-brightness":[{"backdrop-brightness":[ce,Y,K]}],"backdrop-contrast":[{"backdrop-contrast":[ce,Y,K]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ce,Y,K]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ce,Y,K]}],"backdrop-invert":[{"backdrop-invert":["",ce,Y,K]}],"backdrop-opacity":[{"backdrop-opacity":[ce,Y,K]}],"backdrop-saturate":[{"backdrop-saturate":[ce,Y,K]}],"backdrop-sepia":[{"backdrop-sepia":["",ce,Y,K]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":P()}],"border-spacing-x":[{"border-spacing-x":P()}],"border-spacing-y":[{"border-spacing-y":P()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Y,K]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ce,"initial",Y,K]}],ease:[{ease:["linear","initial",w,Y,K]}],delay:[{delay:[ce,Y,K]}],animate:[{animate:["none",M,Y,K]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,Y,K]}],"perspective-origin":[{"perspective-origin":_()}],rotate:[{rotate:z()}],"rotate-x":[{"rotate-x":z()}],"rotate-y":[{"rotate-y":z()}],"rotate-z":[{"rotate-z":z()}],scale:[{scale:W()}],"scale-x":[{"scale-x":W()}],"scale-y":[{"scale-y":W()}],"scale-z":[{"scale-z":W()}],"scale-3d":["scale-3d"],skew:[{skew:J()}],"skew-x":[{"skew-x":J()}],"skew-y":[{"skew-y":J()}],transform:[{transform:[Y,K,"","none","gpu","cpu"]}],"transform-origin":[{origin:_()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ie()}],"translate-x":[{"translate-x":ie()}],"translate-y":[{"translate-y":ie()}],"translate-z":[{"translate-z":ie()}],"translate-none":["translate-none"],accent:[{accent:I()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:I()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Y,K]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Y,K]}],fill:[{fill:["none",...I()]}],"stroke-w":[{stroke:[ce,Jr,xn,Wo]}],stroke:[{stroke:["none",...I()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Yk=Ak(Kk);function Ae(...e){return Yk(_e(e))}/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Qk=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),Nd=e=>{const t=Qk(e);return t.charAt(0).toUpperCase()+t.slice(1)},zg=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),Zk=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var eC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=R.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},c)=>R.createElement("svg",{ref:c,...eC,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:zg("lucide",s),...!i&&!Zk(a)&&{"aria-hidden":"true"},...a},[...o.map(([l,u])=>R.createElement(l,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=(e,t)=>{const n=R.forwardRef(({className:r,...s},i)=>R.createElement(tC,{ref:i,iconNode:t,className:zg(`lucide-${Xk(Nd(e))}`,`lucide-${e}`,r),...s}));return n.displayName=Nd(e),n};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=[["path",{d:"M2 10v3",key:"1fnikh"}],["path",{d:"M6 6v11",key:"11sgs0"}],["path",{d:"M10 3v18",key:"yhl04a"}],["path",{d:"M14 8v7",key:"3a1oy3"}],["path",{d:"M18 5v13",key:"123xd1"}],["path",{d:"M22 10v3",key:"154ddg"}]],Wg=Kt("audio-lines",nC);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],qo=Kt("check",rC);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],iC=Kt("chevron-down",sC);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],aC=Kt("circle",oC);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],lC=Kt("copy",cC);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],dC=Kt("mic-off",uC);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],hC=Kt("mic",fC);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]],mC=Kt("thumbs-down",pC);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],vC=Kt("thumbs-up",gC);function Ce(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e?.(s),n===!1||!s.defaultPrevented)return t?.(s)}}function Fd(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function qg(...e){return t=>{let n=!1;const r=e.map(s=>{const i=Fd(s,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():Fd(e[s],null)}}}}function ze(...e){return A.useCallback(qg(...e),e)}function Hn(e,t=[]){let n=[];function r(i,o){const a=A.createContext(o),c=n.length;n=[...n,o];const l=f=>{const{scope:h,children:p,...g}=f,y=h?.[e]?.[c]||a,b=A.useMemo(()=>g,Object.values(g));return x.jsx(y.Provider,{value:b,children:p})};l.displayName=i+"Provider";function u(f,h){const p=h?.[e]?.[c]||a,g=A.useContext(p);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[l,u]}const s=()=>{const i=n.map(o=>A.createContext(o));return function(a){const c=a?.[e]||i;return A.useMemo(()=>({[`__scope${e}`]:{...a,[e]:c}}),[a,c])}};return s.scopeName=e,[r,yC(s,...t)]}function yC(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:c,scopeName:l})=>{const f=c(i)[`__scope${l}`];return{...a,...f}},{});return A.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function ms(e){const t=wC(e),n=A.forwardRef((r,s)=>{const{children:i,...o}=r,a=A.Children.toArray(i),c=a.find(SC);if(c){const l=c.props.children,u=a.map(f=>f===c?A.Children.count(l)>1?A.Children.only(null):A.isValidElement(l)?l.props.children:null:f);return x.jsx(t,{...o,ref:s,children:A.isValidElement(l)?A.cloneElement(l,void 0,u):null})}return x.jsx(t,{...o,ref:s,children:i})});return n.displayName=`${e}.Slot`,n}var bC=ms("Slot");function wC(e){const t=A.forwardRef((n,r)=>{const{children:s,...i}=n;if(A.isValidElement(s)){const o=kC(s),a=_C(i,s.props);return s.type!==A.Fragment&&(a.ref=r?qg(r,o):o),A.cloneElement(s,a)}return A.Children.count(s)>1?A.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Hg=Symbol("radix.slottable");function xC(e){const t=({children:n})=>x.jsx(x.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=Hg,t}function SC(e){return A.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Hg}function _C(e,t){const n={...t};for(const r in t){const s=e[r],i=t[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const c=i(...a);return s(...a),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}function kC(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var CC=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ie=CC.reduce((e,t)=>{const n=ms(`Primitive.${t}`),r=A.forwardRef((s,i)=>{const{asChild:o,...a}=s,c=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),x.jsx(c,{...a,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function EC(e,t){e&&kp.flushSync(()=>e.dispatchEvent(t))}function Bn(e){const t=A.useRef(e);return A.useEffect(()=>{t.current=e}),A.useMemo(()=>(...n)=>t.current?.(...n),[])}function TC(e,t=globalThis?.document){const n=Bn(e);A.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var MC="DismissableLayer",Xa="dismissableLayer.update",PC="dismissableLayer.pointerDownOutside",AC="dismissableLayer.focusOutside",Bd,Gg=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),yl=A.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...c}=e,l=A.useContext(Gg),[u,f]=A.useState(null),h=u?.ownerDocument??globalThis?.document,[,p]=A.useState({}),g=ze(t,k=>f(k)),y=Array.from(l.layers),[b]=[...l.layersWithOutsidePointerEventsDisabled].slice(-1),w=y.indexOf(b),M=u?y.indexOf(u):-1,C=l.layersWithOutsidePointerEventsDisabled.size>0,S=M>=w,_=LC(k=>{const P=k.target,L=[...l.branches].some(j=>j.contains(P));!S||L||(s?.(k),o?.(k),k.defaultPrevented||a?.())},h),O=jC(k=>{const P=k.target;[...l.branches].some(j=>j.contains(P))||(i?.(k),o?.(k),k.defaultPrevented||a?.())},h);return TC(k=>{M===l.layers.size-1&&(r?.(k),!k.defaultPrevented&&a&&(k.preventDefault(),a()))},h),A.useEffect(()=>{if(u)return n&&(l.layersWithOutsidePointerEventsDisabled.size===0&&(Bd=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),l.layersWithOutsidePointerEventsDisabled.add(u)),l.layers.add(u),$d(),()=>{n&&l.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=Bd)}},[u,h,n,l]),A.useEffect(()=>()=>{u&&(l.layers.delete(u),l.layersWithOutsidePointerEventsDisabled.delete(u),$d())},[u,l]),A.useEffect(()=>{const k=()=>p({});return document.addEventListener(Xa,k),()=>document.removeEventListener(Xa,k)},[]),x.jsx(Ie.div,{...c,ref:g,style:{pointerEvents:C?S?"auto":"none":void 0,...e.style},onFocusCapture:Ce(e.onFocusCapture,O.onFocusCapture),onBlurCapture:Ce(e.onBlurCapture,O.onBlurCapture),onPointerDownCapture:Ce(e.onPointerDownCapture,_.onPointerDownCapture)})});yl.displayName=MC;var OC="DismissableLayerBranch",RC=A.forwardRef((e,t)=>{const n=A.useContext(Gg),r=A.useRef(null),s=ze(t,r);return A.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),x.jsx(Ie.div,{...e,ref:s})});RC.displayName=OC;function LC(e,t=globalThis?.document){const n=Bn(e),r=A.useRef(!1),s=A.useRef(()=>{});return A.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let c=function(){Jg(PC,n,l,{discrete:!0})};const l={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function jC(e,t=globalThis?.document){const n=Bn(e),r=A.useRef(!1);return A.useEffect(()=>{const s=i=>{i.target&&!r.current&&Jg(AC,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function $d(){const e=new CustomEvent(Xa);document.dispatchEvent(e)}function Jg(e,t,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?EC(s,i):s.dispatchEvent(i)}var un=globalThis?.document?A.useLayoutEffect:()=>{},DC=A[" useId ".trim().toString()]||(()=>{}),IC=0;function bl(e){const[t,n]=A.useState(DC());return un(()=>{n(r=>r??String(IC++))},[e]),t?`radix-${t}`:""}const NC=["top","right","bottom","left"],dn=Math.min,Ze=Math.max,Ai=Math.round,Ws=Math.floor,jt=e=>({x:e,y:e}),FC={left:"right",right:"left",bottom:"top",top:"bottom"},BC={start:"end",end:"start"};function Qa(e,t,n){return Ze(e,dn(t,n))}function Gt(e,t){return typeof e=="function"?e(t):e}function Jt(e){return e.split("-")[0]}function Dr(e){return e.split("-")[1]}function wl(e){return e==="x"?"y":"x"}function xl(e){return e==="y"?"height":"width"}const $C=new Set(["top","bottom"]);function Ot(e){return $C.has(Jt(e))?"y":"x"}function Sl(e){return wl(Ot(e))}function VC(e,t,n){n===void 0&&(n=!1);const r=Dr(e),s=Sl(e),i=xl(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=Oi(o)),[o,Oi(o)]}function UC(e){const t=Oi(e);return[Za(e),t,Za(t)]}function Za(e){return e.replace(/start|end/g,t=>BC[t])}const Vd=["left","right"],Ud=["right","left"],zC=["top","bottom"],WC=["bottom","top"];function qC(e,t,n){switch(e){case"top":case"bottom":return n?t?Ud:Vd:t?Vd:Ud;case"left":case"right":return t?zC:WC;default:return[]}}function HC(e,t,n,r){const s=Dr(e);let i=qC(Jt(e),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),t&&(i=i.concat(i.map(Za)))),i}function Oi(e){return e.replace(/left|right|bottom|top/g,t=>FC[t])}function GC(e){return{top:0,right:0,bottom:0,left:0,...e}}function Kg(e){return typeof e!="number"?GC(e):{top:e,right:e,bottom:e,left:e}}function Ri(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function zd(e,t,n){let{reference:r,floating:s}=e;const i=Ot(t),o=Sl(t),a=xl(o),c=Jt(t),l=i==="y",u=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,h=r[a]/2-s[a]/2;let p;switch(c){case"top":p={x:u,y:r.y-s.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:f};break;case"left":p={x:r.x-s.width,y:f};break;default:p={x:r.x,y:r.y}}switch(Dr(t)){case"start":p[o]-=h*(n&&l?-1:1);break;case"end":p[o]+=h*(n&&l?-1:1);break}return p}const JC=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:u,y:f}=zd(l,r,c),h=r,p={},g=0;for(let y=0;y<a.length;y++){const{name:b,fn:w}=a[y],{x:M,y:C,data:S,reset:_}=await w({x:u,y:f,initialPlacement:r,placement:h,strategy:s,middlewareData:p,rects:l,platform:o,elements:{reference:e,floating:t}});u=M??u,f=C??f,p={...p,[b]:{...p[b],...S}},_&&g<=50&&(g++,typeof _=="object"&&(_.placement&&(h=_.placement),_.rects&&(l=_.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):_.rects),{x:u,y:f}=zd(l,h,c)),y=-1)}return{x:u,y:f,placement:h,strategy:s,middlewareData:p}};async function gs(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:c}=e,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:h=!1,padding:p=0}=Gt(t,e),g=Kg(p),b=a[h?f==="floating"?"reference":"floating":f],w=Ri(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(b)))==null||n?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:l,rootBoundary:u,strategy:c})),M=f==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,C=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),S=await(i.isElement==null?void 0:i.isElement(C))?await(i.getScale==null?void 0:i.getScale(C))||{x:1,y:1}:{x:1,y:1},_=Ri(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:M,offsetParent:C,strategy:c}):M);return{top:(w.top-_.top+g.top)/S.y,bottom:(_.bottom-w.bottom+g.bottom)/S.y,left:(w.left-_.left+g.left)/S.x,right:(_.right-w.right+g.right)/S.x}}const KC=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:c}=t,{element:l,padding:u=0}=Gt(e,t)||{};if(l==null)return{};const f=Kg(u),h={x:n,y:r},p=Sl(s),g=xl(p),y=await o.getDimensions(l),b=p==="y",w=b?"top":"left",M=b?"bottom":"right",C=b?"clientHeight":"clientWidth",S=i.reference[g]+i.reference[p]-h[p]-i.floating[g],_=h[p]-i.reference[p],O=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let k=O?O[C]:0;(!k||!await(o.isElement==null?void 0:o.isElement(O)))&&(k=a.floating[C]||i.floating[g]);const P=S/2-_/2,L=k/2-y[g]/2-1,j=dn(f[w],L),N=dn(f[M],L),U=j,H=k-y[g]-N,V=k/2-y[g]/2+P,G=Qa(U,V,H),X=!c.arrow&&Dr(s)!=null&&V!==G&&i.reference[g]/2-(V<U?j:N)-y[g]/2<0,q=X?V<U?V-U:V-H:0;return{[p]:h[p]+q,data:{[p]:G,centerOffset:V-G-q,...X&&{alignmentOffset:q}},reset:X}}}),YC=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:c,elements:l}=t,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:y=!0,...b}=Gt(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const w=Jt(s),M=Ot(a),C=Jt(a)===a,S=await(c.isRTL==null?void 0:c.isRTL(l.floating)),_=h||(C||!y?[Oi(a)]:UC(a)),O=g!=="none";!h&&O&&_.push(...HC(a,y,g,S));const k=[a,..._],P=await gs(t,b),L=[];let j=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&L.push(P[w]),f){const V=VC(s,o,S);L.push(P[V[0]],P[V[1]])}if(j=[...j,{placement:s,overflows:L}],!L.every(V=>V<=0)){var N,U;const V=(((N=i.flip)==null?void 0:N.index)||0)+1,G=k[V];if(G&&(!(f==="alignment"?M!==Ot(G):!1)||j.every(I=>I.overflows[0]>0&&Ot(I.placement)===M)))return{data:{index:V,overflows:j},reset:{placement:G}};let X=(U=j.filter(q=>q.overflows[0]<=0).sort((q,I)=>q.overflows[1]-I.overflows[1])[0])==null?void 0:U.placement;if(!X)switch(p){case"bestFit":{var H;const q=(H=j.filter(I=>{if(O){const ne=Ot(I.placement);return ne===M||ne==="y"}return!0}).map(I=>[I.placement,I.overflows.filter(ne=>ne>0).reduce((ne,F)=>ne+F,0)]).sort((I,ne)=>I[1]-ne[1])[0])==null?void 0:H[0];q&&(X=q);break}case"initialPlacement":X=a;break}if(s!==X)return{reset:{placement:X}}}return{}}}};function Wd(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function qd(e){return NC.some(t=>e[t]>=0)}const XC=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=Gt(e,t);switch(r){case"referenceHidden":{const i=await gs(t,{...s,elementContext:"reference"}),o=Wd(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:qd(o)}}}case"escaped":{const i=await gs(t,{...s,altBoundary:!0}),o=Wd(i,n.floating);return{data:{escapedOffsets:o,escaped:qd(o)}}}default:return{}}}}},Yg=new Set(["left","top"]);async function QC(e,t){const{placement:n,platform:r,elements:s}=e,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Jt(n),a=Dr(n),c=Ot(n)==="y",l=Yg.has(o)?-1:1,u=i&&c?-1:1,f=Gt(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:g}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof g=="number"&&(p=a==="end"?g*-1:g),c?{x:p*u,y:h*l}:{x:h*l,y:p*u}}const ZC=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=t,c=await QC(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},eE=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:b=>{let{x:w,y:M}=b;return{x:w,y:M}}},...c}=Gt(e,t),l={x:n,y:r},u=await gs(t,c),f=Ot(Jt(s)),h=wl(f);let p=l[h],g=l[f];if(i){const b=h==="y"?"top":"left",w=h==="y"?"bottom":"right",M=p+u[b],C=p-u[w];p=Qa(M,p,C)}if(o){const b=f==="y"?"top":"left",w=f==="y"?"bottom":"right",M=g+u[b],C=g-u[w];g=Qa(M,g,C)}const y=a.fn({...t,[h]:p,[f]:g});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[h]:i,[f]:o}}}}}},tE=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=t,{offset:a=0,mainAxis:c=!0,crossAxis:l=!0}=Gt(e,t),u={x:n,y:r},f=Ot(s),h=wl(f);let p=u[h],g=u[f];const y=Gt(a,t),b=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const C=h==="y"?"height":"width",S=i.reference[h]-i.floating[C]+b.mainAxis,_=i.reference[h]+i.reference[C]-b.mainAxis;p<S?p=S:p>_&&(p=_)}if(l){var w,M;const C=h==="y"?"width":"height",S=Yg.has(Jt(s)),_=i.reference[f]-i.floating[C]+(S&&((w=o.offset)==null?void 0:w[f])||0)+(S?0:b.crossAxis),O=i.reference[f]+i.reference[C]+(S?0:((M=o.offset)==null?void 0:M[f])||0)-(S?b.crossAxis:0);g<_?g=_:g>O&&(g=O)}return{[h]:p,[f]:g}}}},nE=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:i,platform:o,elements:a}=t,{apply:c=()=>{},...l}=Gt(e,t),u=await gs(t,l),f=Jt(s),h=Dr(s),p=Ot(s)==="y",{width:g,height:y}=i.floating;let b,w;f==="top"||f==="bottom"?(b=f,w=h===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(w=f,b=h==="end"?"top":"bottom");const M=y-u.top-u.bottom,C=g-u.left-u.right,S=dn(y-u[b],M),_=dn(g-u[w],C),O=!t.middlewareData.shift;let k=S,P=_;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(P=C),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(k=M),O&&!h){const j=Ze(u.left,0),N=Ze(u.right,0),U=Ze(u.top,0),H=Ze(u.bottom,0);p?P=g-2*(j!==0||N!==0?j+N:Ze(u.left,u.right)):k=y-2*(U!==0||H!==0?U+H:Ze(u.top,u.bottom))}await c({...t,availableWidth:P,availableHeight:k});const L=await o.getDimensions(a.floating);return g!==L.width||y!==L.height?{reset:{rects:!0}}:{}}}};function Zi(){return typeof window<"u"}function Ir(e){return Xg(e)?(e.nodeName||"").toLowerCase():"#document"}function tt(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function It(e){var t;return(t=(Xg(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Xg(e){return Zi()?e instanceof Node||e instanceof tt(e).Node:!1}function _t(e){return Zi()?e instanceof Element||e instanceof tt(e).Element:!1}function Dt(e){return Zi()?e instanceof HTMLElement||e instanceof tt(e).HTMLElement:!1}function Hd(e){return!Zi()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof tt(e).ShadowRoot}const rE=new Set(["inline","contents"]);function Cs(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=kt(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!rE.has(s)}const sE=new Set(["table","td","th"]);function iE(e){return sE.has(Ir(e))}const oE=[":popover-open",":modal"];function eo(e){return oE.some(t=>{try{return e.matches(t)}catch{return!1}})}const aE=["transform","translate","scale","rotate","perspective"],cE=["transform","translate","scale","rotate","perspective","filter"],lE=["paint","layout","strict","content"];function _l(e){const t=kl(),n=_t(e)?kt(e):e;return aE.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||cE.some(r=>(n.willChange||"").includes(r))||lE.some(r=>(n.contain||"").includes(r))}function uE(e){let t=fn(e);for(;Dt(t)&&!br(t);){if(_l(t))return t;if(eo(t))return null;t=fn(t)}return null}function kl(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const dE=new Set(["html","body","#document"]);function br(e){return dE.has(Ir(e))}function kt(e){return tt(e).getComputedStyle(e)}function to(e){return _t(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function fn(e){if(Ir(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Hd(e)&&e.host||It(e);return Hd(t)?t.host:t}function Qg(e){const t=fn(e);return br(t)?e.ownerDocument?e.ownerDocument.body:e.body:Dt(t)&&Cs(t)?t:Qg(t)}function vs(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=Qg(e),i=s===((r=e.ownerDocument)==null?void 0:r.body),o=tt(s);if(i){const a=ec(o);return t.concat(o,o.visualViewport||[],Cs(s)?s:[],a&&n?vs(a):[])}return t.concat(s,vs(s,[],n))}function ec(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Zg(e){const t=kt(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Dt(e),i=s?e.offsetWidth:n,o=s?e.offsetHeight:r,a=Ai(n)!==i||Ai(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function Cl(e){return _t(e)?e:e.contextElement}function cr(e){const t=Cl(e);if(!Dt(t))return jt(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:i}=Zg(t);let o=(i?Ai(n.width):n.width)/r,a=(i?Ai(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const fE=jt(0);function ev(e){const t=tt(e);return!kl()||!t.visualViewport?fE:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function hE(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==tt(e)?!1:t}function $n(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),i=Cl(e);let o=jt(1);t&&(r?_t(r)&&(o=cr(r)):o=cr(e));const a=hE(i,n,r)?ev(i):jt(0);let c=(s.left+a.x)/o.x,l=(s.top+a.y)/o.y,u=s.width/o.x,f=s.height/o.y;if(i){const h=tt(i),p=r&&_t(r)?tt(r):r;let g=h,y=ec(g);for(;y&&r&&p!==g;){const b=cr(y),w=y.getBoundingClientRect(),M=kt(y),C=w.left+(y.clientLeft+parseFloat(M.paddingLeft))*b.x,S=w.top+(y.clientTop+parseFloat(M.paddingTop))*b.y;c*=b.x,l*=b.y,u*=b.x,f*=b.y,c+=C,l+=S,g=tt(y),y=ec(g)}}return Ri({width:u,height:f,x:c,y:l})}function El(e,t){const n=to(e).scrollLeft;return t?t.left+n:$n(It(e)).left+n}function tv(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-(n?0:El(e,r)),i=r.top+t.scrollTop;return{x:s,y:i}}function pE(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const i=s==="fixed",o=It(r),a=t?eo(t.floating):!1;if(r===o||a&&i)return n;let c={scrollLeft:0,scrollTop:0},l=jt(1);const u=jt(0),f=Dt(r);if((f||!f&&!i)&&((Ir(r)!=="body"||Cs(o))&&(c=to(r)),Dt(r))){const p=$n(r);l=cr(r),u.x=p.x+r.clientLeft,u.y=p.y+r.clientTop}const h=o&&!f&&!i?tv(o,c,!0):jt(0);return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+u.x+h.x,y:n.y*l.y-c.scrollTop*l.y+u.y+h.y}}function mE(e){return Array.from(e.getClientRects())}function gE(e){const t=It(e),n=to(e),r=e.ownerDocument.body,s=Ze(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=Ze(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+El(e);const a=-n.scrollTop;return kt(r).direction==="rtl"&&(o+=Ze(t.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function vE(e,t){const n=tt(e),r=It(e),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,c=0;if(s){i=s.width,o=s.height;const l=kl();(!l||l&&t==="fixed")&&(a=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:a,y:c}}const yE=new Set(["absolute","fixed"]);function bE(e,t){const n=$n(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,i=Dt(e)?cr(e):jt(1),o=e.clientWidth*i.x,a=e.clientHeight*i.y,c=s*i.x,l=r*i.y;return{width:o,height:a,x:c,y:l}}function Gd(e,t,n){let r;if(t==="viewport")r=vE(e,n);else if(t==="document")r=gE(It(e));else if(_t(t))r=bE(t,n);else{const s=ev(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Ri(r)}function nv(e,t){const n=fn(e);return n===t||!_t(n)||br(n)?!1:kt(n).position==="fixed"||nv(n,t)}function wE(e,t){const n=t.get(e);if(n)return n;let r=vs(e,[],!1).filter(a=>_t(a)&&Ir(a)!=="body"),s=null;const i=kt(e).position==="fixed";let o=i?fn(e):e;for(;_t(o)&&!br(o);){const a=kt(o),c=_l(o);!c&&a.position==="fixed"&&(s=null),(i?!c&&!s:!c&&a.position==="static"&&!!s&&yE.has(s.position)||Cs(o)&&!c&&nv(e,o))?r=r.filter(u=>u!==o):s=a,o=fn(o)}return t.set(e,r),r}function xE(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const o=[...n==="clippingAncestors"?eo(t)?[]:wE(t,this._c):[].concat(n),r],a=o[0],c=o.reduce((l,u)=>{const f=Gd(t,u,s);return l.top=Ze(f.top,l.top),l.right=dn(f.right,l.right),l.bottom=dn(f.bottom,l.bottom),l.left=Ze(f.left,l.left),l},Gd(t,a,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function SE(e){const{width:t,height:n}=Zg(e);return{width:t,height:n}}function _E(e,t,n){const r=Dt(t),s=It(t),i=n==="fixed",o=$n(e,!0,i,t);let a={scrollLeft:0,scrollTop:0};const c=jt(0);function l(){c.x=El(s)}if(r||!r&&!i)if((Ir(t)!=="body"||Cs(s))&&(a=to(t)),r){const p=$n(t,!0,i,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else s&&l();i&&!r&&s&&l();const u=s&&!r&&!i?tv(s,a):jt(0),f=o.left+a.scrollLeft-c.x-u.x,h=o.top+a.scrollTop-c.y-u.y;return{x:f,y:h,width:o.width,height:o.height}}function Ho(e){return kt(e).position==="static"}function Jd(e,t){if(!Dt(e)||kt(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return It(e)===n&&(n=n.ownerDocument.body),n}function rv(e,t){const n=tt(e);if(eo(e))return n;if(!Dt(e)){let s=fn(e);for(;s&&!br(s);){if(_t(s)&&!Ho(s))return s;s=fn(s)}return n}let r=Jd(e,t);for(;r&&iE(r)&&Ho(r);)r=Jd(r,t);return r&&br(r)&&Ho(r)&&!_l(r)?n:r||uE(e)||n}const kE=async function(e){const t=this.getOffsetParent||rv,n=this.getDimensions,r=await n(e.floating);return{reference:_E(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function CE(e){return kt(e).direction==="rtl"}const EE={convertOffsetParentRelativeRectToViewportRelativeRect:pE,getDocumentElement:It,getClippingRect:xE,getOffsetParent:rv,getElementRects:kE,getClientRects:mE,getDimensions:SE,getScale:cr,isElement:_t,isRTL:CE};function sv(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function TE(e,t){let n=null,r;const s=It(e);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),i();const l=e.getBoundingClientRect(),{left:u,top:f,width:h,height:p}=l;if(a||t(),!h||!p)return;const g=Ws(f),y=Ws(s.clientWidth-(u+h)),b=Ws(s.clientHeight-(f+p)),w=Ws(u),C={rootMargin:-g+"px "+-y+"px "+-b+"px "+-w+"px",threshold:Ze(0,dn(1,c))||1};let S=!0;function _(O){const k=O[0].intersectionRatio;if(k!==c){if(!S)return o();k?o(!1,k):r=setTimeout(()=>{o(!1,1e-7)},1e3)}k===1&&!sv(l,e.getBoundingClientRect())&&o(),S=!1}try{n=new IntersectionObserver(_,{...C,root:s.ownerDocument})}catch{n=new IntersectionObserver(_,C)}n.observe(e)}return o(!0),i}function ME(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,l=Cl(e),u=s||i?[...l?vs(l):[],...vs(t)]:[];u.forEach(w=>{s&&w.addEventListener("scroll",n,{passive:!0}),i&&w.addEventListener("resize",n)});const f=l&&a?TE(l,n):null;let h=-1,p=null;o&&(p=new ResizeObserver(w=>{let[M]=w;M&&M.target===l&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var C;(C=p)==null||C.observe(t)})),n()}),l&&!c&&p.observe(l),p.observe(t));let g,y=c?$n(e):null;c&&b();function b(){const w=$n(e);y&&!sv(y,w)&&n(),y=w,g=requestAnimationFrame(b)}return n(),()=>{var w;u.forEach(M=>{s&&M.removeEventListener("scroll",n),i&&M.removeEventListener("resize",n)}),f?.(),(w=p)==null||w.disconnect(),p=null,c&&cancelAnimationFrame(g)}}const PE=ZC,AE=eE,OE=YC,RE=nE,LE=XC,Kd=KC,jE=tE,DE=(e,t,n)=>{const r=new Map,s={platform:EE,...n},i={...s.platform,_c:r};return JC(e,t,{...s,platform:i})};var IE=typeof document<"u",NE=function(){},mi=IE?R.useLayoutEffect:NE;function Li(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Li(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&e.$$typeof)&&!Li(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function iv(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Yd(e,t){const n=iv(e);return Math.round(t*n)/n}function Go(e){const t=A.useRef(e);return mi(()=>{t.current=e}),t}function FE(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:c,open:l}=e,[u,f]=A.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,p]=A.useState(r);Li(h,r)||p(r);const[g,y]=A.useState(null),[b,w]=A.useState(null),M=A.useCallback(I=>{I!==O.current&&(O.current=I,y(I))},[]),C=A.useCallback(I=>{I!==k.current&&(k.current=I,w(I))},[]),S=i||g,_=o||b,O=A.useRef(null),k=A.useRef(null),P=A.useRef(u),L=c!=null,j=Go(c),N=Go(s),U=Go(l),H=A.useCallback(()=>{if(!O.current||!k.current)return;const I={placement:t,strategy:n,middleware:h};N.current&&(I.platform=N.current),DE(O.current,k.current,I).then(ne=>{const F={...ne,isPositioned:U.current!==!1};V.current&&!Li(P.current,F)&&(P.current=F,kp.flushSync(()=>{f(F)}))})},[h,t,n,N,U]);mi(()=>{l===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,f(I=>({...I,isPositioned:!1})))},[l]);const V=A.useRef(!1);mi(()=>(V.current=!0,()=>{V.current=!1}),[]),mi(()=>{if(S&&(O.current=S),_&&(k.current=_),S&&_){if(j.current)return j.current(S,_,H);H()}},[S,_,H,j,L]);const G=A.useMemo(()=>({reference:O,floating:k,setReference:M,setFloating:C}),[M,C]),X=A.useMemo(()=>({reference:S,floating:_}),[S,_]),q=A.useMemo(()=>{const I={position:n,left:0,top:0};if(!X.floating)return I;const ne=Yd(X.floating,u.x),F=Yd(X.floating,u.y);return a?{...I,transform:"translate("+ne+"px, "+F+"px)",...iv(X.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ne,top:F}},[n,a,X.floating,u.x,u.y]);return A.useMemo(()=>({...u,update:H,refs:G,elements:X,floatingStyles:q}),[u,H,G,X,q])}const BE=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Kd({element:r.current,padding:s}).fn(n):{}:r?Kd({element:r,padding:s}).fn(n):{}}}},$E=(e,t)=>({...PE(e),options:[e,t]}),VE=(e,t)=>({...AE(e),options:[e,t]}),UE=(e,t)=>({...jE(e),options:[e,t]}),zE=(e,t)=>({...OE(e),options:[e,t]}),WE=(e,t)=>({...RE(e),options:[e,t]}),qE=(e,t)=>({...LE(e),options:[e,t]}),HE=(e,t)=>({...BE(e),options:[e,t]});var GE="Arrow",ov=A.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...i}=e;return x.jsx(Ie.svg,{...i,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:x.jsx("polygon",{points:"0,0 30,0 15,10"})})});ov.displayName=GE;var JE=ov;function av(e){const[t,n]=A.useState(void 0);return un(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const c=i.borderBoxSize,l=Array.isArray(c)?c[0]:c;o=l.inlineSize,a=l.blockSize}else o=e.offsetWidth,a=e.offsetHeight;n({width:o,height:a})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var Tl="Popper",[cv,no]=Hn(Tl),[KE,lv]=cv(Tl),uv=e=>{const{__scopePopper:t,children:n}=e,[r,s]=A.useState(null);return x.jsx(KE,{scope:t,anchor:r,onAnchorChange:s,children:n})};uv.displayName=Tl;var dv="PopperAnchor",fv=A.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,i=lv(dv,n),o=A.useRef(null),a=ze(t,o);return A.useEffect(()=>{i.onAnchorChange(r?.current||o.current)}),r?null:x.jsx(Ie.div,{...s,ref:a})});fv.displayName=dv;var Ml="PopperContent",[YE,XE]=cv(Ml),hv=A.forwardRef((e,t)=>{const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:c=!0,collisionBoundary:l=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:p="optimized",onPlaced:g,...y}=e,b=lv(Ml,n),[w,M]=A.useState(null),C=ze(t,T=>M(T)),[S,_]=A.useState(null),O=av(S),k=O?.width??0,P=O?.height??0,L=r+(i!=="center"?"-"+i:""),j=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},N=Array.isArray(l)?l:[l],U=N.length>0,H={padding:j,boundary:N.filter(ZE),altBoundary:U},{refs:V,floatingStyles:G,placement:X,isPositioned:q,middlewareData:I}=FE({strategy:"fixed",placement:L,whileElementsMounted:(...T)=>ME(...T,{animationFrame:p==="always"}),elements:{reference:b.anchor},middleware:[$E({mainAxis:s+P,alignmentAxis:o}),c&&VE({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?UE():void 0,...H}),c&&zE({...H}),WE({...H,apply:({elements:T,rects:D,availableWidth:z,availableHeight:W})=>{const{width:J,height:ie}=D.reference,ae=T.floating.style;ae.setProperty("--radix-popper-available-width",`${z}px`),ae.setProperty("--radix-popper-available-height",`${W}px`),ae.setProperty("--radix-popper-anchor-width",`${J}px`),ae.setProperty("--radix-popper-anchor-height",`${ie}px`)}}),S&&HE({element:S,padding:a}),eT({arrowWidth:k,arrowHeight:P}),h&&qE({strategy:"referenceHidden",...H})]}),[ne,F]=gv(X),te=Bn(g);un(()=>{q&&te?.()},[q,te]);const fe=I.arrow?.x,d=I.arrow?.y,v=I.arrow?.centerOffset!==0,[m,E]=A.useState();return un(()=>{w&&E(window.getComputedStyle(w).zIndex)},[w]),x.jsx("div",{ref:V.setFloating,"data-radix-popper-content-wrapper":"",style:{...G,transform:q?G.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:m,"--radix-popper-transform-origin":[I.transformOrigin?.x,I.transformOrigin?.y].join(" "),...I.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:x.jsx(YE,{scope:n,placedSide:ne,onArrowChange:_,arrowX:fe,arrowY:d,shouldHideArrow:v,children:x.jsx(Ie.div,{"data-side":ne,"data-align":F,...y,ref:C,style:{...y.style,animation:q?void 0:"none"}})})})});hv.displayName=Ml;var pv="PopperArrow",QE={top:"bottom",right:"left",bottom:"top",left:"right"},mv=A.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,i=XE(pv,r),o=QE[i.placedSide];return x.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:x.jsx(JE,{...s,ref:n,style:{...s.style,display:"block"}})})});mv.displayName=pv;function ZE(e){return e!==null}var eT=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:r,middlewareData:s}=t,o=s.arrow?.centerOffset!==0,a=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[l,u]=gv(n),f={start:"0%",center:"50%",end:"100%"}[u],h=(s.arrow?.x??0)+a/2,p=(s.arrow?.y??0)+c/2;let g="",y="";return l==="bottom"?(g=o?f:`${h}px`,y=`${-c}px`):l==="top"?(g=o?f:`${h}px`,y=`${r.floating.height+c}px`):l==="right"?(g=`${-c}px`,y=o?f:`${p}px`):l==="left"&&(g=`${r.floating.width+c}px`,y=o?f:`${p}px`),{data:{x:g,y}}}});function gv(e){const[t,n="center"]=e.split("-");return[t,n]}var vv=uv,Pl=fv,yv=hv,bv=mv,tT="Portal",Al=A.forwardRef((e,t)=>{const{container:n,...r}=e,[s,i]=A.useState(!1);un(()=>i(!0),[]);const o=n||s&&globalThis?.document?.body;return o?Sp.createPortal(x.jsx(Ie.div,{...r,ref:t}),o):null});Al.displayName=tT;function nT(e,t){return A.useReducer((n,r)=>t[n][r]??n,e)}var Nr=e=>{const{present:t,children:n}=e,r=rT(t),s=typeof n=="function"?n({present:r.isPresent}):A.Children.only(n),i=ze(r.ref,sT(s));return typeof n=="function"||r.isPresent?A.cloneElement(s,{ref:i}):null};Nr.displayName="Presence";function rT(e){const[t,n]=A.useState(),r=A.useRef(null),s=A.useRef(e),i=A.useRef("none"),o=e?"mounted":"unmounted",[a,c]=nT(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const l=qs(r.current);i.current=a==="mounted"?l:"none"},[a]),un(()=>{const l=r.current,u=s.current;if(u!==e){const h=i.current,p=qs(l);e?c("MOUNT"):p==="none"||l?.display==="none"?c("UNMOUNT"):c(u&&h!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),un(()=>{if(t){let l;const u=t.ownerDocument.defaultView??window,f=p=>{const y=qs(r.current).includes(p.animationName);if(p.target===t&&y&&(c("ANIMATION_END"),!s.current)){const b=t.style.animationFillMode;t.style.animationFillMode="forwards",l=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=b)})}},h=p=>{p.target===t&&(i.current=qs(r.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{u.clearTimeout(l),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:A.useCallback(l=>{r.current=l?getComputedStyle(l):null,n(l)},[])}}function qs(e){return e?.animationName||"none"}function sT(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var iT=A[" useInsertionEffect ".trim().toString()]||un;function ro({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,i,o]=oT({defaultProp:t,onChange:n}),a=e!==void 0,c=a?e:s;{const u=A.useRef(e!==void 0);A.useEffect(()=>{const f=u.current;f!==a&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,r])}const l=A.useCallback(u=>{if(a){const f=aT(u)?u(e):u;f!==e&&o.current?.(f)}else i(u)},[a,e,i,o]);return[c,l]}function oT({defaultProp:e,onChange:t}){const[n,r]=A.useState(e),s=A.useRef(n),i=A.useRef(t);return iT(()=>{i.current=t},[t]),A.useEffect(()=>{s.current!==n&&(i.current?.(n),s.current=n)},[n,s]),[n,r,i]}function aT(e){return typeof e=="function"}var cT=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),lT="VisuallyHidden",wv=A.forwardRef((e,t)=>x.jsx(Ie.span,{...e,ref:t,style:{...cT,...e.style}}));wv.displayName=lT;var uT=wv,[so,vR]=Hn("Tooltip",[no]),io=no(),xv="TooltipProvider",dT=700,tc="tooltip.open",[fT,Ol]=so(xv),Sv=e=>{const{__scopeTooltip:t,delayDuration:n=dT,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=e,o=A.useRef(!0),a=A.useRef(!1),c=A.useRef(0);return A.useEffect(()=>{const l=c.current;return()=>window.clearTimeout(l)},[]),x.jsx(fT,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:A.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:A.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:A.useCallback(l=>{a.current=l},[]),disableHoverableContent:s,children:i})};Sv.displayName=xv;var ys="Tooltip",[hT,Es]=so(ys),_v=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:s,onOpenChange:i,disableHoverableContent:o,delayDuration:a}=e,c=Ol(ys,e.__scopeTooltip),l=io(t),[u,f]=A.useState(null),h=bl(),p=A.useRef(0),g=o??c.disableHoverableContent,y=a??c.delayDuration,b=A.useRef(!1),[w,M]=ro({prop:r,defaultProp:s??!1,onChange:k=>{k?(c.onOpen(),document.dispatchEvent(new CustomEvent(tc))):c.onClose(),i?.(k)},caller:ys}),C=A.useMemo(()=>w?b.current?"delayed-open":"instant-open":"closed",[w]),S=A.useCallback(()=>{window.clearTimeout(p.current),p.current=0,b.current=!1,M(!0)},[M]),_=A.useCallback(()=>{window.clearTimeout(p.current),p.current=0,M(!1)},[M]),O=A.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{b.current=!0,M(!0),p.current=0},y)},[y,M]);return A.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),x.jsx(vv,{...l,children:x.jsx(hT,{scope:t,contentId:h,open:w,stateAttribute:C,trigger:u,onTriggerChange:f,onTriggerEnter:A.useCallback(()=>{c.isOpenDelayedRef.current?O():S()},[c.isOpenDelayedRef,O,S]),onTriggerLeave:A.useCallback(()=>{g?_():(window.clearTimeout(p.current),p.current=0)},[_,g]),onOpen:S,onClose:_,disableHoverableContent:g,children:n})})};_v.displayName=ys;var nc="TooltipTrigger",kv=A.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=Es(nc,n),i=Ol(nc,n),o=io(n),a=A.useRef(null),c=ze(t,a,s.onTriggerChange),l=A.useRef(!1),u=A.useRef(!1),f=A.useCallback(()=>l.current=!1,[]);return A.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),x.jsx(Pl,{asChild:!0,...o,children:x.jsx(Ie.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:Ce(e.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),u.current=!0)}),onPointerLeave:Ce(e.onPointerLeave,()=>{s.onTriggerLeave(),u.current=!1}),onPointerDown:Ce(e.onPointerDown,()=>{s.open&&s.onClose(),l.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Ce(e.onFocus,()=>{l.current||s.onOpen()}),onBlur:Ce(e.onBlur,s.onClose),onClick:Ce(e.onClick,s.onClose)})})});kv.displayName=nc;var Rl="TooltipPortal",[pT,mT]=so(Rl,{forceMount:void 0}),Cv=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:s}=e,i=Es(Rl,t);return x.jsx(pT,{scope:t,forceMount:n,children:x.jsx(Nr,{present:n||i.open,children:x.jsx(Al,{asChild:!0,container:s,children:r})})})};Cv.displayName=Rl;var wr="TooltipContent",Ev=A.forwardRef((e,t)=>{const n=mT(wr,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=e,o=Es(wr,e.__scopeTooltip);return x.jsx(Nr,{present:r||o.open,children:o.disableHoverableContent?x.jsx(Tv,{side:s,...i,ref:t}):x.jsx(gT,{side:s,...i,ref:t})})}),gT=A.forwardRef((e,t)=>{const n=Es(wr,e.__scopeTooltip),r=Ol(wr,e.__scopeTooltip),s=A.useRef(null),i=ze(t,s),[o,a]=A.useState(null),{trigger:c,onClose:l}=n,u=s.current,{onPointerInTransitChange:f}=r,h=A.useCallback(()=>{a(null),f(!1)},[f]),p=A.useCallback((g,y)=>{const b=g.currentTarget,w={x:g.clientX,y:g.clientY},M=wT(w,b.getBoundingClientRect()),C=xT(w,M),S=ST(y.getBoundingClientRect()),_=kT([...C,...S]);a(_),f(!0)},[f]);return A.useEffect(()=>()=>h(),[h]),A.useEffect(()=>{if(c&&u){const g=b=>p(b,u),y=b=>p(b,c);return c.addEventListener("pointerleave",g),u.addEventListener("pointerleave",y),()=>{c.removeEventListener("pointerleave",g),u.removeEventListener("pointerleave",y)}}},[c,u,p,h]),A.useEffect(()=>{if(o){const g=y=>{const b=y.target,w={x:y.clientX,y:y.clientY},M=c?.contains(b)||u?.contains(b),C=!_T(w,o);M?h():C&&(h(),l())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,u,o,l,h]),x.jsx(Tv,{...e,ref:i})}),[vT,yT]=so(ys,{isInside:!1}),bT=xC("TooltipContent"),Tv=A.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=e,c=Es(wr,n),l=io(n),{onClose:u}=c;return A.useEffect(()=>(document.addEventListener(tc,u),()=>document.removeEventListener(tc,u)),[u]),A.useEffect(()=>{if(c.trigger){const f=h=>{h.target?.contains(c.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,u]),x.jsx(yl,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:u,children:x.jsxs(yv,{"data-state":c.stateAttribute,...l,...a,ref:t,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[x.jsx(bT,{children:r}),x.jsx(vT,{scope:n,isInside:!0,children:x.jsx(uT,{id:c.contentId,role:"tooltip",children:s||r})})]})})});Ev.displayName=wr;var Mv="TooltipArrow",Pv=A.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=io(n);return yT(Mv,n).isInside?null:x.jsx(bv,{...s,...r,ref:t})});Pv.displayName=Mv;function wT(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function xT(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function ST(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function _T(e,t){const{x:n,y:r}=e;let s=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const a=t[i],c=t[o],l=a.x,u=a.y,f=c.x,h=c.y;u>r!=h>r&&n<(f-l)*(r-u)/(h-u)+l&&(s=!s)}return s}function kT(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),CT(t)}function CT(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var ET=Sv,TT=_v,MT=kv,PT=Cv,AT=Ev,OT=Pv;function Av({delayDuration:e=0,...t}){return x.jsx(ET,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function lr({...e}){return x.jsx(Av,{children:x.jsx(TT,{"data-slot":"tooltip",...e})})}function ur({...e}){return x.jsx(MT,{"data-slot":"tooltip-trigger",...e})}function dr({className:e,sideOffset:t=0,children:n,...r}){return x.jsx(PT,{children:x.jsxs(AT,{"data-slot":"tooltip-content",sideOffset:t,className:Ae("scxl:bg-indigo-500 scxl:text-white scxl:animate-in scxl:fade-in-0 scxl:zoom-in-95 data-[state=closed]:scxl:animate-out data-[state=closed]:scxl:fade-out-0 data-[state=closed]:scxl:zoom-out-95 data-[side=bottom]:scxl:slide-in-from-top-2 data-[side=left]:scxl:slide-in-from-right-2 data-[side=right]:scxl:slide-in-from-left-2 data-[side=top]:scxl:slide-in-from-bottom-2 scxl:z-50 scxl:w-fit scxl:origin-(--radix-tooltip-content-transform-origin) scxl:rounded-md scxl:px-3 scxl:py-1.5 scxl:text-xs scxl:text-balance",e),...r,children:[n,x.jsx(OT,{className:"scxl:bg-indigo-500 scxl:fill-indigo-500 scxl:z-50 scxl:size-2.5 scxl:translate-y-[calc(-50%_-_2px)] scxl:rotate-45 scxl:rounded-[2px]"})]})})}const RT=({rawContent:e,className:t="",typewriterEffect:n=!0,timeStamp:r,typewriterSpeed:s=20,disableTypewriter:i=!1})=>{const[o,a]=R.useState(""),[c,l]=R.useState(0),[u,f]=R.useState("idle"),[h,p]=R.useState("idle"),[g,y]=R.useState(!1),b=R.useCallback(k=>k?k.replace(/^data:\s*/gm,"").replace(/\[DONE\]/g,"").replace(/^event:\s*\w+\s*$/gm,"").replace(/role=['"]assistant['"][^}]*content=['"]([^'"]*)['"]/g,"$1").replace(/role='assistant'\s+content='/g,"").replace(/role="assistant"\s+content="/g,"").replace(/\s+tool_calls=\[\]/g,"").replace(/'\s+tool_calls=\[\]$/g,"").replace(/"\s+tool_calls=\[\]$/g,"").replace(/content=['"]([^'"]*)['"][^}]*/g,"$1").replace(/content='([^']*)'/g,"$1").replace(/content="([^"]*)"/g,"$1").replace(/\{"content":\s*"([^"]*)"[^}]*\}/g,"$1").replace(/\{"delta":\s*\{"content":\s*"([^"]*)"[^}]*\}[^}]*\}/g,"$1").replace(/delta:\s*\{[^}]*content[^}]*:\s*['"]([^'"]*)['"]/g,"$1").replace(/None$/gm,"").replace(/null$/gm,"").replace(/undefined$/gm,"").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\\\/g,"\\").replace(/\\"/g,'"').replace(/\\'/g,"'").replace(/^\s+/gm,"").replace(/\s+$/gm,"").trim():"",[]),w=R.useCallback(k=>b(k).replace(/[ \t]+/g," ").replace(/\n\s+/g,`
`).replace(/\s+\n/g,`
`).replace(/\n{3,}/g,`

`).trim(),[b]),M=R.useCallback(()=>{f("liked"),setTimeout(()=>f("idle"),2e3)},[]),C=R.useCallback(()=>{f("disliked"),setTimeout(()=>f("idle"),2e3)},[]),S=R.useCallback(async()=>{try{const k=w(e);await navigator.clipboard.writeText(k),p("copied"),setTimeout(()=>p("idle"),2e3)}catch(k){console.error("Failed to copy text: ",k);const P=document.createElement("textarea");P.value=w(e),document.body.appendChild(P),P.select();try{document.execCommand("copy"),p("copied"),setTimeout(()=>p("idle"),2e3)}catch(L){console.error("Fallback copy failed:",L)}document.body.removeChild(P)}},[e,w]);R.useEffect(()=>{if(!n||i){const P=w(e);a(P),y(!0);return}const k=w(e);if(c<k.length){const P=setTimeout(()=>{a(L=>L+k.charAt(c)),l(L=>L+1)},s);return()=>clearTimeout(P)}else k.length>0&&c>=k.length&&setTimeout(()=>y(!0),200)},[e,c,n,s,w,i]),R.useEffect(()=>{const k=w(e);if(i){a(k),y(!0);return}(o===""||!k.startsWith(o))&&(l(0),a(""),y(!1),f("idle"),p("idle"))},[e,i,w]);const _=R.useCallback(k=>k.split(/(\*\*.*?\*\*|\*.*?\*|_.*?_|`.*?`|~~.*?~~)/g).map((L,j)=>L.startsWith("**")&&L.endsWith("**")?x.jsx("strong",{className:"scxl:font-bold scxl:text-gray-900",children:L.slice(2,-2)},j):L.startsWith("~~")&&L.endsWith("~~")?x.jsx("del",{className:"scxl:line-through scxl:text-gray-600",children:L.slice(2,-2)},j):L.startsWith("*")&&L.endsWith("*")&&!L.startsWith("**")||L.startsWith("_")&&L.endsWith("_")?x.jsx("em",{className:"scxl:italic scxl:text-gray-800",children:L.slice(1,-1)},j):L.startsWith("`")&&L.endsWith("`")?x.jsx("code",{className:"scxl:px-1.5 scxl:py-0.5 scxl:bg-gray-100 scxl:text-gray-800 scxl:rounded scxl:text-sm scxl:font-mono scxl:border",children:L.slice(1,-1)},j):x.jsx("span",{children:L},j)),[]),O=R.useCallback(k=>k.split(/\n\n+/).filter(L=>L.trim()).map((L,j)=>{const N=L.trim().split(`
`);if(N.length===1&&N[0].startsWith("#")){const V=N[0].replace(/^#+\s*/,""),G=Math.min((N[0].match(/^#+/)||[""])[0].length,6),X=`h${G}`,q={1:"scxl:text-3xl scxl:font-bold scxl:text-gray-900 scxl:mt-8 scxl:mb-4",2:"scxl:text-2xl scxl:font-bold scxl:text-gray-900 scxl:mt-6 scxl:mb-3",3:"scxl:text-xl scxl:font-semibold scxl:text-gray-900 scxl:mt-5 scxl:mb-3",4:"scxl:text-lg scxl:font-semibold scxl:text-gray-800 scxl:mt-4 scxl:mb-2",5:"scxl:text-base scxl:font-semibold scxl:text-gray-800 scxl:mt-3 scxl:mb-2",6:"scxl:text-sm scxl:font-semibold scxl:text-gray-700 scxl:mt-2 scxl:mb-2"};return x.jsx(X,{className:q[G],children:_(V)},j)}if(N[0].startsWith("```")&&N[N.length-1]==="```"){const V=N[0].replace("```","").trim(),G=N.slice(1,-1).join(`
`);return x.jsxs("div",{className:"scxl:my-6 scxl:relative",children:[V&&x.jsx("div",{className:"scxl:text-xs scxl:text-gray-500 scxl:mb-1 scxl:font-mono",children:V}),x.jsx("pre",{className:"scxl:p-4 scxl:bg-gray-50 scxl:rounded-lg scxl:overflow-x-auto scxl:border",children:x.jsx("code",{className:"scxl:text-sm scxl:font-mono scxl:text-gray-800",children:G})})]},j)}if(N.every(V=>V.trim()===""||/^\d+\./.test(V.trim()))&&N.some(V=>/^\d+\./.test(V.trim()))){const V=N.filter(G=>/^\d+\./.test(G.trim())).map(G=>G.replace(/^\d+\.\s*/,"").trim());return x.jsx("ol",{className:"scxl:my-6 scxl:ml-6 scxl:list-decimal scxl:space-y-2",children:V.map((G,X)=>x.jsx("li",{className:"scxl:text-gray-700 scxl:leading-relaxed scxl:pl-2",children:_(G)},X))},j)}if(N.every(V=>V.trim()===""||/^[-•*+]/.test(V.trim()))&&N.some(V=>/^[-•*+]/.test(V.trim()))){const V=N.filter(G=>/^[-•*+]/.test(G.trim())).map(G=>G.replace(/^[-•*+]\s*/,"").trim());return x.jsx("ul",{className:"scxl:my-6 scxl:ml-6 scxl:list-disc scxl:space-y-2",children:V.map((G,X)=>x.jsx("li",{className:"scxl:text-gray-700 scxl:leading-relaxed scxl:pl-2",children:_(G)},X))},j)}if(N.every(V=>V.trim()===""||V.startsWith(">"))){const V=N.filter(G=>G.startsWith(">")).map(G=>G.replace(/^>\s*/,"")).join(" ");return x.jsx("blockquote",{className:"scxl:my-6 scxl:pl-4 scxl:border-l-4 scxl:border-indigo-200 scxl:bg-indigo-50 scxl:py-3 scxl:pr-4 scxl:rounded-r",children:x.jsx("p",{className:"scxl:text-gray-700 scxl:italic scxl:leading-relaxed",children:_(V)})},j)}return x.jsx("div",{className:"scxl:my-2 scxl:text-gray-700 scxl:leading-relaxed",children:N.map((V,G)=>x.jsxs(R.Fragment,{children:[G>0&&x.jsx("br",{}),x.jsx("span",{className:"scxl:block",children:_(V)})]},G))},j)}),[_]);return!e||!b(e)?x.jsx("div",{className:`scxl:flex scxl:items-center scxl:space-x-2 scxl:text-gray-500 ${t}`,children:x.jsxs("div",{className:"scxl:flex scxl:space-x-1",children:[x.jsx("div",{className:"scxl:w-2 scxl:h-2 scxl:rounded-full scxl:bg-gray-400 scxl:animate-bounce"}),x.jsx("div",{className:"scxl:w-2 scxl:h-2 scxl:rounded-full scxl:bg-gray-400 scxl:animate-bounce scxl:delay-200"}),x.jsx("div",{className:"scxl:w-2 scxl:h-2 scxl:rounded-full scxl:bg-gray-400 scxl:animate-bounce scxl:delay-400"})]})}):x.jsx(Av,{children:x.jsxs(Rd.div,{className:`scxl:prose scxl:prose-lg scxl:max-w-none ${t}`,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:[x.jsx("div",{className:"scxl:space-y-1",children:O(o)}),x.jsx(IS,{children:g&&x.jsxs(Rd.div,{className:"scxl:flex scxl:items-center scxl:justify-between",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2,delay:.2},children:[x.jsxs("div",{className:"scxl:flex scxl:items-center scxl:gap-2",children:[x.jsxs(lr,{children:[x.jsx(ur,{asChild:!0,children:x.jsx("button",{onClick:M,type:"button",className:"scxl:flex scxl:items-center scxl:cursor-pointer scxl:justify-center scxl:p-1.5 scxl:rounded-full scxl:transition-colors scxl:duration-200",children:u==="liked"?x.jsx(qo,{className:"scxl:w-3.5 scxl:h-3.5 scxl:text-indigo-500"}):x.jsx(vC,{className:"scxl:w-3.5 scxl:h-3.5 scxl:text-indigo-500"})})}),x.jsx(dr,{children:x.jsx("p",{children:u==="liked"?"Liked":"Like"})})]}),x.jsxs(lr,{children:[x.jsx(ur,{asChild:!0,children:x.jsx("button",{onClick:C,type:"button",className:"scxl:flex scxl:items-center scxl:cursor-pointer scxl:justify-center scxl:p-1.5 scxl:rounded-full scxl:transition-colors scxl:duration-200",children:u==="disliked"?x.jsx(qo,{className:"scxl:w-3.5 scxl:h-3.5 scxl:text-indigo-500"}):x.jsx(mC,{className:"scxl:w-3.5 scxl:h-3.5 scxl:text-indigo-500"})})}),x.jsx(dr,{children:x.jsx("p",{children:u==="disliked"?"Disliked":"Dislike"})})]}),x.jsxs(lr,{children:[x.jsx(ur,{asChild:!0,children:x.jsx("button",{onClick:S,type:"button",className:"scxl:flex scxl:items-center scxl:cursor-pointer scxl:justify-center scxl:p-1.5 scxl:rounded-full scxl:transition-colors scxl:duration-200",children:h==="copied"?x.jsx(qo,{className:"scxl:w-3.5 scxl:h-3.5 scxl:text-indigo-500"}):x.jsx(lC,{className:"scxl:w-3.5 scxl:h-3.5 scxl:text-indigo-500"})})}),x.jsx(dr,{children:x.jsx("p",{children:h==="copied"?"Copied":"Copy"})})]})]}),x.jsx("div",{className:"scxl:flex scxl:items-center scxl:gap-2 scxl:text-xs scxl:text-gray-400",children:x.jsx("p",{className:"scxl:text-gray-700 scxl:cursor-pointer hover:scxl:opacity-80 scxl:transition-all scxl:duration-200 scxl:ease-in-out",children:new Date(r||Date.now()).toLocaleTimeString()})})]})})]})})},LT=({"aria-label":e="Loading",className:t="",initialDots:n=1,interval:r=500,maxDots:s=3})=>{const[i,o]=R.useState(n);R.useEffect(()=>{const c=setInterval(()=>{o(l=>l%s+1)},r);return()=>clearInterval(c)},[r,s]);const a=()=>".".repeat(i);return x.jsx("span",{className:t,"aria-label":e,children:a()})},jT=({classNames:e={},noAutoscroll:t=!1})=>{const n=R.useRef(null),r=R.useRef(!0),s=Xp();R.useEffect(()=>{function u(f){n.current?.lenis&&n.current.lenis.raf(f.timestamp)}return Se.update(u,!0),()=>{Ht(u)}},[]);const i=R.useCallback(()=>{!n.current?.lenis||t||r.current&&n.current.lenis.scrollTo("bottom",{duration:.8})},[t]),o=R.useCallback(()=>{if(!n.current?.lenis||t)return;const f=n.current.lenis.rootElement;f&&(r.current=Math.ceil(f.scrollHeight-f.scrollTop)<=Math.ceil(f.clientHeight+50))},[t]),{messages:a}=Rg({onMessageAdded:()=>{t||setTimeout(()=>i(),100)}});R.useEffect(()=>{t||setTimeout(()=>i(),100)},[a,i,t]),R.useEffect(()=>{const u=n.current?.lenis;if(!u)return;const f=()=>o();return u.on("scroll",f),o(),()=>{u.off("scroll",f)}},[o]);const c=s==="authenticating"||s==="connecting",l=s==="connected"||s==="ready";return a.length>0?x.jsx(Ns,{options:{autoRaf:!1,smoothWheel:!0,wheelMultiplier:2,touchMultiplier:2},className:Ae("scxl:flex-1 scxl:sm:w-3/4 scxl:sm:max-w-4xl chat-scxl scxl:w-full! scxl:sm:p-5 scxl:p-2 scxl:overflow-y-auto",e.container),ref:n,children:x.jsx("div",{className:"scxl:w-full scxl:h-full scxl:flex scxl:flex-col scxl:gap-2",children:a.map((u,f)=>x.jsx(R.Fragment,{children:u.role==="user"?x.jsx("div",{className:"scxl:flex scxl:flex-row scxl:w-full scxl:justify-end",children:x.jsx("div",{className:"scxl:max-w-3/4 scxl:text-sm scxl:bg-indigo-500 scxl:p-2 scxl:rounded-tr-xl scxl:rounded-tl-xl scxl:rounded-bl-xl scxl:m-2",children:x.jsx("p",{className:"scxl:text-white",children:u.content})})}):x.jsx("div",{className:"scxl:flex scxl:flex-row scxl:w-full",children:x.jsx("div",{className:"scxl:w-full scxl:text-sm scxl:p-2 scxl:m-2",children:u.content?x.jsx(RT,{rawContent:u.content,timeStamp:u.createdAt,disableTypewriter:!u.isFresh}):x.jsx(LT,{className:e.thinking})})})},u.id||f))})}):c?x.jsx(Ns,{options:{autoRaf:!1,smoothWheel:!0,wheelMultiplier:2,touchMultiplier:2},className:Ae("scxl:flex-1 scxl:sm:w-3/4 scxl:sm:max-w-4xl chat-scxl scxl:w-full! scxl:sm:p-5 scxl:p-2 scxl:overflow-y-auto",e.container),ref:n,children:x.jsx("div",{className:"scxl:flex scxl:items-center scxl:justify-center scxl:h-full",children:x.jsx("div",{className:"scxl:text-muted-foreground scxl:text-sm",children:"Connecting to agent..."})})}):l?x.jsx(Ns,{options:{autoRaf:!1,smoothWheel:!0,wheelMultiplier:2,touchMultiplier:2},className:Ae("scxl:flex-1 scxl:sm:w-3/4 scxl:sm:max-w-4xl chat-scxl scxl:w-full! scxl:sm:p-5 scxl:p-2 scxl:overflow-y-auto",e.container),ref:n,children:x.jsx("div",{className:"scxl:flex scxl:items-center scxl:justify-center scxl:h-full",children:x.jsx("div",{className:"scxl:text-muted-foreground scxl:text-sm",children:"Waiting for messages..."})})}):x.jsx(Ns,{options:{autoRaf:!1,smoothWheel:!0,wheelMultiplier:2,touchMultiplier:2},className:Ae("scxl:flex-1 scxl:sm:w-3/4 scxl:sm:max-w-4xl chat-scxl scxl:w-full! scxl:sm:p-5 scxl:p-2 scxl:overflow-y-auto",e.container),ref:n,children:x.jsx("div",{className:"scxl:flex scxl:items-center scxl:justify-center scxl:h-full",children:x.jsxs("div",{className:"scxl:text-center scxl:p-4",children:[x.jsx("div",{className:"scxl:text-muted-foreground scxl:mb-2",children:"Not connected to agent"}),x.jsx("p",{className:"scxl:text-sm scxl:text-muted-foreground scxl:max-w-md",children:"Connect to an agent to see conversation messages in real-time."})]})})})},Xd=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Qd=_e,Ov=(e,t)=>n=>{var r;if(t?.variants==null)return Qd(e,n?.class,n?.className);const{variants:s,defaultVariants:i}=t,o=Object.keys(s).map(l=>{const u=n?.[l],f=i?.[l];if(u===null)return null;const h=Xd(u)||Xd(f);return s[l][h]}),a=n&&Object.entries(n).reduce((l,u)=>{let[f,h]=u;return h===void 0||(l[f]=h),l},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((l,u)=>{let{class:f,className:h,...p}=u;return Object.entries(p).every(g=>{let[y,b]=g;return Array.isArray(b)?b.includes({...i,...a}[y]):{...i,...a}[y]===b})?[...l,f,h]:l},[]);return Qd(e,o,c,n?.class,n?.className)},DT=Ov("scxl:inline-flex scxl:items-center scxl:justify-center scxl:gap-2 scxl:whitespace-nowrap scxl:rounded-md scxl:text-sm scxl:font-medium scxl:transition-all disabled:scxl:pointer-events-none disabled:scxl:opacity-50 [&_svg]:scxl:pointer-events-none [&_svg:not([class*='size-'])]:scxl:size-4 scxl:shrink-0 [&_svg]:scxl:shrink-0 scxl:outline-none focus-visible:scxl:border-ring focus-visible:scxl:ring-ring/50 focus-visible:scxl:ring-[3px] aria-invalid:scxl:ring-destructive/20 dark:aria-invalid:scxl:ring-destructive/40 aria-invalid:scxl:border-destructive",{variants:{variant:{default:"scxl:bg-primary scxl:text-primary-foreground scxl:shadow-xs hover:scxl:bg-primary/90",destructive:"scxl:bg-destructive scxl:text-white scxl:shadow-xs hover:scxl:bg-destructive/90 focus-visible:scxl:ring-destructive/20 dark:focus-visible:scxl:ring-destructive/40 dark:scxl:bg-destructive/60",outline:"scxl:border scxl:bg-background scxl:shadow-xs hover:scxl:bg-accent hover:scxl:text-accent-foreground dark:scxl:bg-input/30 dark:scxl:border-input dark:hover:scxl:bg-input/50",secondary:"scxl:bg-secondary scxl:text-secondary-foreground scxl:shadow-xs hover:scxl:bg-secondary/80",ghost:"hover:scxl:bg-accent hover:scxl:text-accent-foreground dark:hover:scxl:bg-accent/50",link:"scxl:text-primary scxl:underline-offset-4 hover:scxl:underline"},size:{default:"scxl:h-9 scxl:px-4 scxl:py-2 has-[>svg]:scxl:px-3",sm:"scxl:h-8 scxl:rounded-md scxl:gap-1.5 scxl:px-3 has-[>svg]:scxl:px-2.5",lg:"scxl:h-10 scxl:rounded-md scxl:px-6 has-[>svg]:scxl:px-4",icon:"scxl:size-9"}},defaultVariants:{variant:"default",size:"default"}});function rc({className:e,variant:t,size:n,asChild:r=!1,...s}){const i=r?bC:"button";return x.jsx(i,{"data-slot":"button",className:Ae(DT({variant:t,size:n,className:e})),...s})}const IT=({className:e,trackHasStarted:t,onClick:n,onConnect:r,onDisconnect:s})=>{const[i,o]=R.useState(!1),a=Xp();R.useEffect(()=>{(a==="connected"||a==="ready")&&o(!1)},[a]);const c=()=>{const g=i||["initializing","authenticating","connecting"].includes(a),y=["connected","ready"].includes(a);if(!t||(g||!t))return{children:t?"Connect":"Microphone permission not granted",variant:"secondary",className:"scxl:bg-gray-400 scxl:hover:bg-gray-400 scxl:cursor-not-allowed scxl:px-10 scxl:rounded-full scxl:transition-colors scxl:duration-200 scxl:text-gray-700",disabled:!0};if(g){let w="Connecting";return a==="initializing"?w="Initializing":a==="authenticating"?w="Authenticating":a==="connecting"&&(w="Connecting"),{children:x.jsxs("div",{className:"scxl:flex scxl:items-center scxl:gap-2",children:[w,x.jsx("span",{className:"scxl:w-4 scxl:h-4 scxl:border-2 scxl:border-white scxl:border-t-transparent scxl:rounded-full scxl:animate-spin"})]}),variant:"default",className:"scxl:bg-indigo-500 scxl:hover:bg-indigo-600 scxl:cursor-not-allowed scxl:px-10 scxl:rounded-full scxl:transition-colors scxl:duration-200",disabled:!0}}return y?{children:"Disconnect",variant:"destructive",className:"scxl:px-10 scxl:rounded-full scxl:transition-colors scxl:duration-200 scxl:bg-red-500 scxl:hover:bg-red-600 scxl:text-white"}:{children:"Connect",variant:"default",className:"scxl:bg-indigo-500 scxl:hover:bg-indigo-600 scxl:cursor-pointer scxl:transition-colors scxl:duration-200 scxl:px-10 scxl:rounded-full"}},l=()=>{console.log("Trying to call onClick"),n?.(),["connected","ready"].includes(a)?(console.log("Disconnecting from SmallWebRTC connection"),s?.()):(console.log("Connecting to SmallWebRTC connection"),o(!0),r?.())},{children:u,className:f,variant:h,disabled:p}=c();return x.jsx(rc,{className:Ae(f,e),onClick:l,variant:h,disabled:p,children:u})};function Zd(e,t){if(e==null)return{};var n,r,s=function(o,a){if(o==null)return{};var c={};for(var l in o)if({}.hasOwnProperty.call(o,l)){if(a.indexOf(l)!==-1)continue;c[l]=o[l]}return c}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function rt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function he(e){return he=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},he(e)}function Rv(e){var t=function(n,r){if(he(n)!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var i=s.call(n,r);if(he(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(e,"string");return he(t)=="symbol"?t:t+""}function ef(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Rv(r.key),r)}}function st(e,t,n){return t&&ef(e.prototype,t),n&&ef(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function oo(e,t){if(t&&(he(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function Ct(e){return Ct=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ct(e)}function bs(e,t){return bs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},bs(e,t)}function ao(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bs(e,t)}function Pt(e,t,n){return(t=Rv(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tf(e,t,n,r,s,i,o){try{var a=e[i](o),c=a.value}catch(l){return void n(l)}a.done?t(c):Promise.resolve(c).then(r,s)}function se(e){return function(){var t=this,n=arguments;return new Promise(function(r,s){var i=e.apply(t,n);function o(c){tf(i,r,s,o,a,"next",c)}function a(c){tf(i,r,s,o,a,"throw",c)}o(void 0)})}}function nf(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ye(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var s=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(s!=null){var i,o,a,c,l=[],u=!0,f=!1;try{if(a=(s=s.call(n)).next,r===0){if(Object(s)!==s)return;u=!1}else for(;!(u=(i=a.call(s)).done)&&(l.push(i.value),l.length!==r);u=!0);}catch(h){f=!0,o=h}finally{try{if(!u&&s.return!=null&&(c=s.return(),Object(c)!==c))return}finally{if(f)throw o}}return l}}(e,t)||function(n,r){if(n){if(typeof n=="string")return nf(n,r);var s={}.toString.call(n).slice(8,-1);return s==="Object"&&n.constructor&&(s=n.constructor.name),s==="Map"||s==="Set"?Array.from(n):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?nf(n,r):void 0}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function NT(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Lv,sc={exports:{}},fr=typeof Reflect=="object"?Reflect:null,rf=fr&&typeof fr.apply=="function"?fr.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};Lv=fr&&typeof fr.ownKeys=="function"?fr.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var sf=Number.isNaN||function(e){return e!=e};function ve(){ve.init.call(this)}sc.exports=ve,sc.exports.once=function(e,t){return new Promise(function(n,r){function s(o){e.removeListener(t,i),r(o)}function i(){typeof e.removeListener=="function"&&e.removeListener("error",s),n([].slice.call(arguments))}df(e,t,i,{once:!0}),t!=="error"&&function(o,a,c){typeof o.on=="function"&&df(o,"error",a,c)}(e,s,{once:!0})})},ve.EventEmitter=ve,ve.prototype._events=void 0,ve.prototype._eventsCount=0,ve.prototype._maxListeners=void 0;var of=10;function gi(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function jv(e){return e._maxListeners===void 0?ve.defaultMaxListeners:e._maxListeners}function af(e,t,n,r){var s,i,o,a;if(gi(n),(i=e._events)===void 0?(i=e._events=Object.create(null),e._eventsCount=0):(i.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),o=i[t]),o===void 0)o=i[t]=n,++e._eventsCount;else if(typeof o=="function"?o=i[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(s=jv(e))>0&&o.length>s&&!o.warned){o.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=o.length,a=c,console&&console.warn&&console.warn(a)}return e}function FT(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function cf(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},s=FT.bind(r);return s.listener=n,r.wrapFn=s,s}function lf(e,t,n){var r=e._events;if(r===void 0)return[];var s=r[t];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?function(i){for(var o=new Array(i.length),a=0;a<o.length;++a)o[a]=i[a].listener||i[a];return o}(s):Dv(s,s.length)}function uf(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}function Dv(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function df(e,t,n,r){if(typeof e.on=="function")r.once?e.once(t,n):e.on(t,n);else{if(typeof e.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function s(i){r.once&&e.removeEventListener(t,s),n(i)})}}Object.defineProperty(ve,"defaultMaxListeners",{enumerable:!0,get:function(){return of},set:function(e){if(typeof e!="number"||e<0||sf(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");of=e}}),ve.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},ve.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||sf(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},ve.prototype.getMaxListeners=function(){return jv(this)},ve.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r=e==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var o=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw o.context=i,o}var a=s[e];if(a===void 0)return!1;if(typeof a=="function")rf(a,this,t);else{var c=a.length,l=Dv(a,c);for(n=0;n<c;++n)rf(l[n],this,t)}return!0},ve.prototype.addListener=function(e,t){return af(this,e,t,!1)},ve.prototype.on=ve.prototype.addListener,ve.prototype.prependListener=function(e,t){return af(this,e,t,!0)},ve.prototype.once=function(e,t){return gi(t),this.on(e,cf(this,e,t)),this},ve.prototype.prependOnceListener=function(e,t){return gi(t),this.prependListener(e,cf(this,e,t)),this},ve.prototype.removeListener=function(e,t){var n,r,s,i,o;if(gi(t),(r=this._events)===void 0)return this;if((n=r[e])===void 0)return this;if(n===t||n.listener===t)--this._eventsCount==0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(s=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){o=n[i].listener,s=i;break}if(s<0)return this;s===0?n.shift():function(a,c){for(;c+1<a.length;c++)a[c]=a[c+1];a.pop()}(n,s),n.length===1&&(r[e]=n[0]),r.removeListener!==void 0&&this.emit("removeListener",e,o||t)}return this},ve.prototype.off=ve.prototype.removeListener,ve.prototype.removeAllListeners=function(e){var t,n,r;if((n=this._events)===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s,i=Object.keys(n);for(r=0;r<i.length;++r)(s=i[r])!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(t=n[e])=="function")this.removeListener(e,t);else if(t!==void 0)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},ve.prototype.listeners=function(e){return lf(this,e,!0)},ve.prototype.rawListeners=function(e){return lf(this,e,!1)},ve.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):uf.call(e,t)},ve.prototype.listenerCount=uf,ve.prototype.eventNames=function(){return this._eventsCount>0?Lv(this._events):[]};var ic=sc.exports,Hs=NT(ic),ff=Object.prototype.hasOwnProperty;function hf(e,t,n){for(n of e.keys())if(Ge(n,t))return n}function Ge(e,t){var n,r,s;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&Ge(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if((s=r)&&typeof s=="object"&&!(s=hf(t,s))||!t.has(s))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if((s=r[0])&&typeof s=="object"&&!(s=hf(t,s))||!Ge(r[1],t.get(s)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){for(n in r=0,e)if(ff.call(e,n)&&++r&&!ff.call(t,n)||!(n in t)||!Ge(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!=e&&t!=t}const BT={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},Iv={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},Me={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},He={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},rn={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class ${static getFirstMatch(t,n){const r=n.match(t);return r&&r.length>0&&r[1]||""}static getSecondMatch(t,n){const r=n.match(t);return r&&r.length>1&&r[2]||""}static matchAndReturnConst(t,n,r){if(t.test(n))return r}static getWindowsVersionName(t){switch(t){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(t){const n=t.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),n[0]===10)switch(n[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(t){const n=t.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),!(n[0]===1&&n[1]<5))return n[0]===1&&n[1]<6?"Cupcake":n[0]===1&&n[1]>=6?"Donut":n[0]===2&&n[1]<2?"Eclair":n[0]===2&&n[1]===2?"Froyo":n[0]===2&&n[1]>2?"Gingerbread":n[0]===3?"Honeycomb":n[0]===4&&n[1]<1?"Ice Cream Sandwich":n[0]===4&&n[1]<4?"Jelly Bean":n[0]===4&&n[1]>=4?"KitKat":n[0]===5?"Lollipop":n[0]===6?"Marshmallow":n[0]===7?"Nougat":n[0]===8?"Oreo":n[0]===9?"Pie":void 0}static getVersionPrecision(t){return t.split(".").length}static compareVersions(t,n,r=!1){const s=$.getVersionPrecision(t),i=$.getVersionPrecision(n);let o=Math.max(s,i),a=0;const c=$.map([t,n],l=>{const u=o-$.getVersionPrecision(l),f=l+new Array(u+1).join(".0");return $.map(f.split("."),h=>new Array(20-h.length).join("0")+h).reverse()});for(r&&(a=o-Math.min(s,i)),o-=1;o>=a;){if(c[0][o]>c[1][o])return 1;if(c[0][o]===c[1][o]){if(o===a)return 0;o-=1}else if(c[0][o]<c[1][o])return-1}}static map(t,n){const r=[];let s;if(Array.prototype.map)return Array.prototype.map.call(t,n);for(s=0;s<t.length;s+=1)r.push(n(t[s]));return r}static find(t,n){let r,s;if(Array.prototype.find)return Array.prototype.find.call(t,n);for(r=0,s=t.length;r<s;r+=1){const i=t[r];if(n(i,r))return i}}static assign(t,...n){const r=t;let s,i;if(Object.assign)return Object.assign(t,...n);for(s=0,i=n.length;s<i;s+=1){const o=n[s];typeof o=="object"&&o!==null&&Object.keys(o).forEach(a=>{r[a]=o[a]})}return t}static getBrowserAlias(t){return BT[t]}static getBrowserTypeByAlias(t){return Iv[t]||""}}const be=/version\/(\d+(\.?_?\d+)+)/i,$T=[{test:[/googlebot/i],describe(e){const t={name:"Googlebot"},n=$.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||$.getFirstMatch(be,e);return n&&(t.version=n),t}},{test:[/opera/i],describe(e){const t={name:"Opera"},n=$.getFirstMatch(be,e)||$.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe(e){const t={name:"Opera"},n=$.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||$.getFirstMatch(be,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe(e){const t={name:"Samsung Internet for Android"},n=$.getFirstMatch(be,e)||$.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe(e){const t={name:"NAVER Whale Browser"},n=$.getFirstMatch(be,e)||$.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe(e){const t={name:"MZ Browser"},n=$.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||$.getFirstMatch(be,e);return n&&(t.version=n),t}},{test:[/focus/i],describe(e){const t={name:"Focus"},n=$.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||$.getFirstMatch(be,e);return n&&(t.version=n),t}},{test:[/swing/i],describe(e){const t={name:"Swing"},n=$.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||$.getFirstMatch(be,e);return n&&(t.version=n),t}},{test:[/coast/i],describe(e){const t={name:"Opera Coast"},n=$.getFirstMatch(be,e)||$.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(e){const t={name:"Opera Touch"},n=$.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||$.getFirstMatch(be,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe(e){const t={name:"Yandex Browser"},n=$.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||$.getFirstMatch(be,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe(e){const t={name:"UC Browser"},n=$.getFirstMatch(be,e)||$.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe(e){const t={name:"Maxthon"},n=$.getFirstMatch(be,e)||$.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe(e){const t={name:"Epiphany"},n=$.getFirstMatch(be,e)||$.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe(e){const t={name:"Puffin"},n=$.getFirstMatch(be,e)||$.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe(e){const t={name:"Sleipnir"},n=$.getFirstMatch(be,e)||$.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe(e){const t={name:"K-Meleon"},n=$.getFirstMatch(be,e)||$.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe(e){const t={name:"WeChat"},n=$.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||$.getFirstMatch(be,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe(e){const t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=$.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||$.getFirstMatch(be,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe(e){const t={name:"Internet Explorer"},n=$.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe(e){const t={name:"Microsoft Edge"},n=$.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe(e){const t={name:"Microsoft Edge"},n=$.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe(e){const t={name:"Vivaldi"},n=$.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe(e){const t={name:"SeaMonkey"},n=$.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe(e){const t={name:"Sailfish"},n=$.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe(e){const t={name:"Amazon Silk"},n=$.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe(e){const t={name:"PhantomJS"},n=$.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe(e){const t={name:"SlimerJS"},n=$.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t={name:"BlackBerry"},n=$.getFirstMatch(be,e)||$.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe(e){const t={name:"WebOS Browser"},n=$.getFirstMatch(be,e)||$.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe(e){const t={name:"Bada"},n=$.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe(e){const t={name:"Tizen"},n=$.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||$.getFirstMatch(be,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe(e){const t={name:"QupZilla"},n=$.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||$.getFirstMatch(be,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe(e){const t={name:"Firefox"},n=$.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe(e){const t={name:"Electron"},n=$.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MiuiBrowser/i],describe(e){const t={name:"Miui"},n=$.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe(e){const t={name:"Chromium"},n=$.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||$.getFirstMatch(be,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe(e){const t={name:"Chrome"},n=$.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe(e){const t={name:"Google Search"},n=$.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test(e){const t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe(e){const t={name:"Android Browser"},n=$.getFirstMatch(be,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe(e){const t={name:"PlayStation 4"},n=$.getFirstMatch(be,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe(e){const t={name:"Safari"},n=$.getFirstMatch(be,e);return n&&(t.version=n),t}},{test:[/.*/i],describe(e){const t=e.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:$.getFirstMatch(t,e),version:$.getSecondMatch(t,e)}}}];var VT=[{test:[/Roku\/DVP/],describe(e){const t=$.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:He.Roku,version:t}}},{test:[/windows phone/i],describe(e){const t=$.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:He.WindowsPhone,version:t}}},{test:[/windows /i],describe(e){const t=$.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=$.getWindowsVersionName(t);return{name:He.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(e){const t={name:He.iOS},n=$.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe(e){const t=$.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=$.getMacOSVersionName(t),r={name:He.MacOS,version:t};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe(e){const t=$.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:He.iOS,version:t}}},{test(e){const t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe(e){const t=$.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=$.getAndroidVersionName(t),r={name:He.Android,version:t};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe(e){const t=$.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:He.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t=$.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||$.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||$.getFirstMatch(/\bbb(\d+)/i,e);return{name:He.BlackBerry,version:t}}},{test:[/bada/i],describe(e){const t=$.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:He.Bada,version:t}}},{test:[/tizen/i],describe(e){const t=$.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:He.Tizen,version:t}}},{test:[/linux/i],describe:()=>({name:He.Linux})},{test:[/CrOS/],describe:()=>({name:He.ChromeOS})},{test:[/PlayStation 4/],describe(e){const t=$.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:He.PlayStation4,version:t}}}],UT=[{test:[/googlebot/i],describe:()=>({type:"bot",vendor:"Google"})},{test:[/huawei/i],describe(e){const t=$.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:Me.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:()=>({type:Me.tablet,vendor:"Nexus"})},{test:[/ipad/i],describe:()=>({type:Me.tablet,vendor:"Apple",model:"iPad"})},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:()=>({type:Me.tablet,vendor:"Apple",model:"iPad"})},{test:[/kftt build/i],describe:()=>({type:Me.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"})},{test:[/silk/i],describe:()=>({type:Me.tablet,vendor:"Amazon"})},{test:[/tablet(?! pc)/i],describe:()=>({type:Me.tablet})},{test(e){const t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe(e){const t=$.getFirstMatch(/(ipod|iphone)/i,e);return{type:Me.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:()=>({type:Me.mobile,vendor:"Nexus"})},{test:[/[^-]mobi/i],describe:()=>({type:Me.mobile})},{test:e=>e.getBrowserName(!0)==="blackberry",describe:()=>({type:Me.mobile,vendor:"BlackBerry"})},{test:e=>e.getBrowserName(!0)==="bada",describe:()=>({type:Me.mobile})},{test:e=>e.getBrowserName()==="windows phone",describe:()=>({type:Me.mobile,vendor:"Microsoft"})},{test(e){const t=Number(String(e.getOSVersion()).split(".")[0]);return e.getOSName(!0)==="android"&&t>=3},describe:()=>({type:Me.tablet})},{test:e=>e.getOSName(!0)==="android",describe:()=>({type:Me.mobile})},{test:e=>e.getOSName(!0)==="macos",describe:()=>({type:Me.desktop,vendor:"Apple"})},{test:e=>e.getOSName(!0)==="windows",describe:()=>({type:Me.desktop})},{test:e=>e.getOSName(!0)==="linux",describe:()=>({type:Me.desktop})},{test:e=>e.getOSName(!0)==="playstation 4",describe:()=>({type:Me.tv})},{test:e=>e.getOSName(!0)==="roku",describe:()=>({type:Me.tv})}],zT=[{test:e=>e.getBrowserName(!0)==="microsoft edge",describe(e){if(/\sedg\//i.test(e))return{name:rn.Blink};const t=$.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:rn.EdgeHTML,version:t}}},{test:[/trident/i],describe(e){const t={name:rn.Trident},n=$.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:e=>e.test(/presto/i),describe(e){const t={name:rn.Presto},n=$.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test(e){const t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe(e){const t={name:rn.Gecko},n=$.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:()=>({name:rn.Blink})},{test:[/(apple)?webkit/i],describe(e){const t={name:rn.WebKit},n=$.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}];class pf{constructor(t,n=!1){if(t==null||t==="")throw new Error("UserAgent parameter can't be empty");this._ua=t,this.parsedResult={},n!==!0&&this.parse()}getUA(){return this._ua}test(t){return t.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const t=$.find($T,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(t){return t?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const t=$.find(VT,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os}getOSName(t){const{name:n}=this.getOS();return t?String(n).toLowerCase()||"":n||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(t=!1){const{type:n}=this.getPlatform();return t?String(n).toLowerCase()||"":n||""}parsePlatform(){this.parsedResult.platform={};const t=$.find(UT,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(t){return t?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const t=$.find(zT,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return $.assign({},this.parsedResult)}satisfies(t){const n={};let r=0;const s={};let i=0;if(Object.keys(t).forEach(o=>{const a=t[o];typeof a=="string"?(s[o]=a,i+=1):typeof a=="object"&&(n[o]=a,r+=1)}),r>0){const o=Object.keys(n),a=$.find(o,l=>this.isOS(l));if(a){const l=this.satisfies(n[a]);if(l!==void 0)return l}const c=$.find(o,l=>this.isPlatform(l));if(c){const l=this.satisfies(n[c]);if(l!==void 0)return l}}if(i>0){const o=Object.keys(s),a=$.find(o,c=>this.isBrowser(c,!0));if(a!==void 0)return this.compareVersion(s[a])}}isBrowser(t,n=!1){const r=this.getBrowserName().toLowerCase();let s=t.toLowerCase();const i=$.getBrowserTypeByAlias(s);return n&&i&&(s=i.toLowerCase()),s===r}compareVersion(t){let n=[0],r=t,s=!1;const i=this.getBrowserVersion();if(typeof i=="string")return t[0]===">"||t[0]==="<"?(r=t.substr(1),t[1]==="="?(s=!0,r=t.substr(2)):n=[],t[0]===">"?n.push(1):n.push(-1)):t[0]==="="?r=t.substr(1):t[0]==="~"&&(s=!0,r=t.substr(1)),n.indexOf($.compareVersions(i,r,s))>-1}isOS(t){return this.getOSName(!0)===String(t).toLowerCase()}isPlatform(t){return this.getPlatformType(!0)===String(t).toLowerCase()}isEngine(t){return this.getEngineName(!0)===String(t).toLowerCase()}is(t,n=!1){return this.isBrowser(t,n)||this.isOS(t)||this.isPlatform(t)}some(t=[]){return t.some(n=>this.is(n))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class WT{static getParser(t,n=!1){if(typeof t!="string")throw new Error("UserAgent should be a string");return new pf(t,n)}static parse(t){return new pf(t).getResult()}static get BROWSER_MAP(){return Iv}static get ENGINE_MAP(){return rn}static get OS_MAP(){return He}static get PLATFORMS_MAP(){return Me}}function co(){return Date.now()+Math.random().toString()}function Kr(){throw new Error("Method must be implemented in subclass")}function Nv(e,t){return t!=null&&t.proxyUrl?t.proxyUrl+(t.proxyUrl.slice(-1)==="/"?"":"/")+e.substring(8):e}function ji(e){return e!=null&&e.callObjectBundleUrlOverride?e.callObjectBundleUrlOverride:Nv("https://c.daily.co/call-machine/versioned/".concat("0.77.0","/static/call-machine-object-bundle.js"),e)}function Di(e){try{new URL(e)}catch{return!1}return!0}const xe=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,In="8.55.0",pe=globalThis;function Ii(e,t,n){const r=pe,s=r.__SENTRY__=r.__SENTRY__||{},i=s[In]=s[In]||{};return i[e]||(i[e]=t())}const Gn=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,oc=["debug","info","warn","error","log","assert","trace"],Ni={};function Ts(e){if(!("console"in pe))return e();const t=pe.console,n={},r=Object.keys(Ni);r.forEach(s=>{const i=Ni[s];n[s]=t[s],t[s]=i});try{return e()}finally{r.forEach(s=>{t[s]=n[s]})}}const oe=Ii("logger",function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return Gn?oc.forEach(n=>{t[n]=(...r)=>{e&&Ts(()=>{pe.console[n](`Sentry Logger [${n}]:`,...r)})}}):oc.forEach(n=>{t[n]=()=>{}}),t}),Ln="?",mf=/\(error: (.*)\)/,gf=/captureMessage|captureException/;function Gs(e){return e[e.length-1]||{}}const vf="<anonymous>";function hn(e){try{return e&&typeof e=="function"&&e.name||vf}catch{return vf}}function yf(e){const t=e.exception;if(t){const n=[];try{return t.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}const vi={},bf={};function Nn(e,t){vi[e]=vi[e]||[],vi[e].push(t)}function Fn(e,t){if(!bf[e]){bf[e]=!0;try{t()}catch(n){Gn&&oe.error(`Error while instrumenting ${e}`,n)}}}function St(e,t){const n=e&&vi[e];if(n)for(const r of n)try{r(t)}catch(s){Gn&&oe.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${hn(r)}
Error:`,s)}}let Jo=null;function qT(){Jo=pe.onerror,pe.onerror=function(e,t,n,r,s){return St("error",{column:r,error:s,line:n,msg:e,url:t}),!!Jo&&Jo.apply(this,arguments)},pe.onerror.__SENTRY_INSTRUMENTED__=!0}let Ko=null;function HT(){Ko=pe.onunhandledrejection,pe.onunhandledrejection=function(e){return St("unhandledrejection",e),!Ko||Ko.apply(this,arguments)},pe.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function lo(){return Ll(pe),pe}function Ll(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||In,t[In]=t[In]||{}}const Fv=Object.prototype.toString;function jl(e){switch(Fv.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return Vn(e,Error)}}function Fr(e,t){return Fv.call(e)===`[object ${t}]`}function Bv(e){return Fr(e,"ErrorEvent")}function wf(e){return Fr(e,"DOMError")}function $t(e){return Fr(e,"String")}function Dl(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function ac(e){return e===null||Dl(e)||typeof e!="object"&&typeof e!="function"}function xr(e){return Fr(e,"Object")}function uo(e){return typeof Event<"u"&&Vn(e,Event)}function fo(e){return!!(e&&e.then&&typeof e.then=="function")}function Vn(e,t){try{return e instanceof t}catch{return!1}}function $v(e){return!(typeof e!="object"||e===null||!e.__isVue&&!e._isVue)}const Il=pe;function Vv(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,s=[];let i=0,o=0;const a=" > ",c=a.length;let l;const u=Array.isArray(t)?t:t.keyAttrs,f=!Array.isArray(t)&&t.maxStringLength||80;for(;n&&i++<r&&(l=GT(n,u),!(l==="html"||i>1&&o+s.length*c+l.length>=f));)s.push(l),o+=l.length,n=n.parentNode;return s.reverse().join(a)}catch{return"<unknown>"}}function GT(e,t){const n=e,r=[];if(!n||!n.tagName)return"";if(Il.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const s=t&&t.length?t.filter(o=>n.getAttribute(o)).map(o=>[o,n.getAttribute(o)]):null;if(s&&s.length)s.forEach(o=>{r.push(`[${o[0]}="${o[1]}"]`)});else{n.id&&r.push(`#${n.id}`);const o=n.className;if(o&&$t(o)){const a=o.split(/\s+/);for(const c of a)r.push(`.${c}`)}}const i=["aria-label","type","name","title","alt"];for(const o of i){const a=n.getAttribute(o);a&&r.push(`[${o}="${a}"]`)}return r.join("")}function hr(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function xf(e,t){if(!Array.isArray(e))return"";const n=[];for(let r=0;r<e.length;r++){const s=e[r];try{$v(s)?n.push("[VueViewModel]"):n.push(String(s))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function JT(e,t,n=!1){return!!$t(e)&&(Fr(t,"RegExp")?t.test(e):!!$t(t)&&(n?e===t:e.includes(t)))}function Js(e,t=[],n=!1){return t.some(r=>JT(e,r,n))}function et(e,t,n){if(!(t in e))return;const r=e[t],s=n(r);typeof s=="function"&&Uv(s,r);try{e[t]=s}catch{Gn&&oe.log(`Failed to replace method "${t}" in object`,e)}}function Un(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{Gn&&oe.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function Uv(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,Un(e,"__sentry_original__",t)}catch{}}function Nl(e){return e.__sentry_original__}function zv(e){if(jl(e))return{message:e.message,name:e.name,stack:e.stack,..._f(e)};if(uo(e)){const t={type:e.type,target:Sf(e.target),currentTarget:Sf(e.currentTarget),..._f(e)};return typeof CustomEvent<"u"&&Vn(e,CustomEvent)&&(t.detail=e.detail),t}return e}function Sf(e){try{return t=e,typeof Element<"u"&&Vn(t,Element)?Vv(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}var t}function _f(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function lt(e){return cc(e,new Map)}function cc(e,t){if(function(n){if(!xr(n))return!1;try{const r=Object.getPrototypeOf(n).constructor.name;return!r||r==="Object"}catch{return!0}}(e)){const n=t.get(e);if(n!==void 0)return n;const r={};t.set(e,r);for(const s of Object.getOwnPropertyNames(e))e[s]!==void 0&&(r[s]=cc(e[s],t));return r}if(Array.isArray(e)){const n=t.get(e);if(n!==void 0)return n;const r=[];return t.set(e,r),e.forEach(s=>{r.push(cc(s,t))}),r}return e}function Ms(){return Date.now()/1e3}const Ut=function(){const{performance:e}=pe;if(!e||!e.now)return Ms;const t=Date.now()-e.now(),n=e.timeOrigin==null?t:e.timeOrigin;return()=>(n+e.now())/1e3}();function dt(){const e=pe,t=e.crypto||e.msCrypto;let n=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const r=new Uint8Array(1);return t.getRandomValues(r),r[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,r=>(r^(15&n())>>r/4).toString(16))}function Wv(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function on(e){const{message:t,event_id:n}=e;if(t)return t;const r=Wv(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function lc(e,t,n){const r=e.exception=e.exception||{},s=r.values=r.values||[],i=s[0]=s[0]||{};i.value||(i.value=t||""),i.type||(i.type="Error")}function Sr(e,t){const n=Wv(e);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...t},t&&"data"in t){const s={...r&&r.data,...t.data};n.mechanism.data=s}}function kf(e){if(function(t){try{return t.__sentry_captured__}catch{}}(e))return!0;try{Un(e,"__sentry_captured__",!0)}catch{}return!1}var Ft;function zn(e){return new ct(t=>{t(e)})}function Fi(e){return new ct((t,n)=>{n(e)})}(()=>{const{performance:e}=pe;!e||!e.now||(e.now(),e.timing&&e.timing.navigationStart)})(),function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"}(Ft||(Ft={}));class ct{constructor(t){ct.prototype.__init.call(this),ct.prototype.__init2.call(this),ct.prototype.__init3.call(this),ct.prototype.__init4.call(this),this._state=Ft.PENDING,this._handlers=[];try{t(this._resolve,this._reject)}catch(n){this._reject(n)}}then(t,n){return new ct((r,s)=>{this._handlers.push([!1,i=>{if(t)try{r(t(i))}catch(o){s(o)}else r(i)},i=>{if(n)try{r(n(i))}catch(o){s(o)}else s(i)}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new ct((n,r)=>{let s,i;return this.then(o=>{i=!1,s=o,t&&t()},o=>{i=!0,s=o,t&&t()}).then(()=>{i?r(s):n(s)})})}__init(){this._resolve=t=>{this._setResult(Ft.RESOLVED,t)}}__init2(){this._reject=t=>{this._setResult(Ft.REJECTED,t)}}__init3(){this._setResult=(t,n)=>{this._state===Ft.PENDING&&(fo(n)?n.then(this._resolve,this._reject):(this._state=t,this._value=n,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===Ft.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===Ft.RESOLVED&&n[1](this._value),this._state===Ft.REJECTED&&n[2](this._value),n[0]=!0)})}}}function KT(e){const t=Ut(),n={sid:dt(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(r){return lt({sid:`${r.sid}`,init:r.init,started:new Date(1e3*r.started).toISOString(),timestamp:new Date(1e3*r.timestamp).toISOString(),status:r.status,errors:r.errors,did:typeof r.did=="number"||typeof r.did=="string"?`${r.did}`:void 0,duration:r.duration,abnormal_mechanism:r.abnormal_mechanism,attrs:{release:r.release,environment:r.environment,ip_address:r.ipAddress,user_agent:r.userAgent}})}(n)};return e&&_r(n,e),n}function _r(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Ut(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:dt()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function Cf(){return dt()}function uc(){return dt().substring(16)}function ho(e,t,n=2){if(!t||typeof t!="object"||n<=0)return t;if(e&&t&&Object.keys(t).length===0)return e;const r={...e};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=ho(r[s],t[s],n-1));return r}const dc="_sentrySpan";function Ef(e,t){t?Un(e,dc,t):delete e[dc]}function Tf(e){return e[dc]}class Fl{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:Cf(),spanId:uc()}}clone(){const t=new Fl;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._requestSession=this._requestSession,t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,Ef(t,Tf(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&_r(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const n=typeof t=="function"?t(this):t,[r,s]=n instanceof pn?[n.getScopeData(),n.getRequestSession()]:xr(n)?[t,t.requestSession]:[],{tags:i,extra:o,user:a,contexts:c,level:l,fingerprint:u=[],propagationContext:f}=r||{};return this._tags={...this._tags,...i},this._extra={...this._extra,...o},this._contexts={...this._contexts,...c},a&&Object.keys(a).length&&(this._user=a),l&&(this._level=l),u.length&&(this._fingerprint=u),f&&(this._propagationContext=f),s&&(this._requestSession=s),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,Ef(this,void 0),this._attachments=[],this.setPropagationContext({traceId:Cf()}),this._notifyScopeListeners(),this}addBreadcrumb(t,n){const r=typeof n=="number"?n:100;if(r<=0)return this;const s={timestamp:Ms(),...t};return this._breadcrumbs.push(s),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),this._client&&this._client.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:Tf(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=ho(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext={spanId:uc(),...t},this}getPropagationContext(){return this._propagationContext}captureException(t,n){const r=n&&n.event_id?n.event_id:dt();if(!this._client)return oe.warn("No client configured on scope - will not capture exception!"),r;const s=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:s,...n,event_id:r},this),r}captureMessage(t,n,r){const s=r&&r.event_id?r.event_id:dt();if(!this._client)return oe.warn("No client configured on scope - will not capture message!"),s;const i=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:i,...r,event_id:s},this),s}captureEvent(t,n){const r=n&&n.event_id?n.event_id:dt();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(oe.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}const pn=Fl;class YT{constructor(t,n){let r,s;r=t||new pn,s=n||new pn,this._stack=[{scope:r}],this._isolationScope=s}withScope(t){const n=this._pushScope();let r;try{r=t(n)}catch(s){throw this._popScope(),s}return fo(r)?r.then(s=>(this._popScope(),s),s=>{throw this._popScope(),s}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function kr(){const e=Ll(lo());return e.stack=e.stack||new YT(Ii("defaultCurrentScope",()=>new pn),Ii("defaultIsolationScope",()=>new pn))}function XT(e){return kr().withScope(e)}function QT(e,t){const n=kr();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function Mf(e){return kr().withScope(()=>e(kr().getIsolationScope()))}function Bl(e){const t=Ll(e);return t.acs?t.acs:{withIsolationScope:Mf,withScope:XT,withSetScope:QT,withSetIsolationScope:(n,r)=>Mf(r),getCurrentScope:()=>kr().getScope(),getIsolationScope:()=>kr().getIsolationScope()}}function Jn(){return Bl(lo()).getCurrentScope()}function Ps(){return Bl(lo()).getIsolationScope()}function Ve(){return Jn().getClient()}function ZT(e){const t=e.getPropagationContext(),{traceId:n,spanId:r,parentSpanId:s}=t;return lt({trace_id:n,span_id:r,parent_span_id:s})}function eM(e){const t=e._sentryMetrics;if(!t)return;const n={};for(const[,[r,s]]of t)(n[r]||(n[r]=[])).push(lt(s));return n}const tM=/^sentry-/;function nM(e){const t=function(r){if(!(!r||!$t(r)&&!Array.isArray(r)))return Array.isArray(r)?r.reduce((s,i)=>{const o=Pf(i);return Object.entries(o).forEach(([a,c])=>{s[a]=c}),s},{}):Pf(r)}(e);if(!t)return;const n=Object.entries(t).reduce((r,[s,i])=>(s.match(tM)&&(r[s.slice(7)]=i),r),{});return Object.keys(n).length>0?n:void 0}function Pf(e){return e.split(",").map(t=>t.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((t,[n,r])=>(n&&r&&(t[n]=r),t),{})}let Af=!1;function rM(e){const{spanId:t,traceId:n,isRemote:r}=e.spanContext();return lt({parent_span_id:r?t:$l(e).parent_span_id,span_id:r?uc():t,trace_id:n})}function Of(e){return typeof e=="number"?Rf(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Rf(e.getTime()):Ut()}function Rf(e){return e>9999999999?e/1e3:e}function $l(e){if(function(t){return typeof t.getSpanJSON=="function"}(e))return e.getSpanJSON();try{const{spanId:t,traceId:n}=e.spanContext();if(function(r){const s=r;return!!(s.attributes&&s.startTime&&s.name&&s.endTime&&s.status)}(e)){const{attributes:r,startTime:s,name:i,endTime:o,parentSpanId:a,status:c}=e;return lt({span_id:t,trace_id:n,data:r,description:i,parent_span_id:a,start_timestamp:Of(s),timestamp:Of(o)||void 0,status:sM(c),op:r["sentry.op"],origin:r["sentry.origin"],_metrics_summary:eM(e)})}return{span_id:t,trace_id:n}}catch{return{}}}function sM(e){if(e&&e.code!==0)return e.code===1?"ok":e.message||"unknown_error"}function qv(e){return e._sentryRootSpan||e}function iM(){Af||(Ts(()=>{console.warn("[Sentry] Deprecation warning: Returning null from `beforeSendSpan` will be disallowed from SDK version 9.0.0 onwards. The callback will only support mutating spans. To drop certain spans, configure the respective integrations directly.")}),Af=!0)}const Vl="production";function Hv(e,t){const n=t.getOptions(),{publicKey:r}=t.getDsn()||{},s=lt({environment:n.environment||Vl,release:n.release,public_key:r,trace_id:e});return t.emit("createDsc",s),s}function oM(e){const t=Ve();if(!t)return{};const n=qv(e),r=n._frozenDsc;if(r)return r;const s=n.spanContext().traceState,i=s&&s.get("sentry.dsc"),o=i&&nM(i);if(o)return o;const a=Hv(e.spanContext().traceId,t),c=$l(n),l=c.data||{},u=l["sentry.sample_rate"];u!=null&&(a.sample_rate=`${u}`);const f=l["sentry.source"],h=c.description;return f!=="url"&&h&&(a.transaction=h),function(p){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const g=Ve(),y=g&&g.getOptions();return!!y&&(y.enableTracing||"tracesSampleRate"in y||"tracesSampler"in y)}()&&(a.sampled=String(function(p){const{traceFlags:g}=p.spanContext();return g===1}(n))),t.emit("createDsc",a,n),a}const aM=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Bi(e,t=!1){const{host:n,path:r,pass:s,port:i,projectId:o,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&s?`:${s}`:""}@${n}${i?`:${i}`:""}/${r&&`${r}/`}${o}`}function Lf(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function cM(e){const t=typeof e=="string"?function(n){const r=aM.exec(n);if(!r)return void Ts(()=>{console.error(`Invalid Sentry Dsn: ${n}`)});const[s,i,o="",a="",c="",l=""]=r.slice(1);let u="",f=l;const h=f.split("/");if(h.length>1&&(u=h.slice(0,-1).join("/"),f=h.pop()),f){const p=f.match(/^\d+/);p&&(f=p[0])}return Lf({host:a,pass:o,path:u,projectId:f,port:c,protocol:s,publicKey:i})}(e):Lf(e);if(t&&function(n){if(!Gn)return!0;const{port:r,projectId:s,protocol:i}=n;return!(["protocol","publicKey","host","projectId"].find(o=>!n[o]&&(oe.error(`Invalid Sentry Dsn: ${o} missing`),!0))||(s.match(/^\d+$/)?function(o){return o==="http"||o==="https"}(i)?r&&isNaN(parseInt(r,10))&&(oe.error(`Invalid Sentry Dsn: Invalid port ${r}`),1):(oe.error(`Invalid Sentry Dsn: Invalid protocol ${i}`),1):(oe.error(`Invalid Sentry Dsn: Invalid projectId ${s}`),1)))}(t))return t}function Bt(e,t=100,n=1/0){try{return fc("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function Gv(e,t=3,n=102400){const r=Bt(e,t);return s=r,function(i){return~-encodeURI(i).split(/%..|./).length}(JSON.stringify(s))>n?Gv(e,t-1,n):r;var s}function fc(e,t,n=1/0,r=1/0,s=function(){const i=typeof WeakSet=="function",o=i?new WeakSet:[];return[function(a){if(i)return!!o.has(a)||(o.add(a),!1);for(let c=0;c<o.length;c++)if(o[c]===a)return!0;return o.push(a),!1},function(a){if(i)o.delete(a);else for(let c=0;c<o.length;c++)if(o[c]===a){o.splice(c,1);break}}]}()){const[i,o]=s;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;const a=function(p,g){try{if(p==="domain"&&g&&typeof g=="object"&&g._events)return"[Domain]";if(p==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&g===global)return"[Global]";if(typeof window<"u"&&g===window)return"[Window]";if(typeof document<"u"&&g===document)return"[Document]";if($v(g))return"[VueViewModel]";if(xr(y=g)&&"nativeEvent"in y&&"preventDefault"in y&&"stopPropagation"in y)return"[SyntheticEvent]";if(typeof g=="number"&&!Number.isFinite(g))return`[${g}]`;if(typeof g=="function")return`[Function: ${hn(g)}]`;if(typeof g=="symbol")return`[${String(g)}]`;if(typeof g=="bigint")return`[BigInt: ${String(g)}]`;const b=function(w){const M=Object.getPrototypeOf(w);return M?M.constructor.name:"null prototype"}(g);return/^HTML(\w*)Element$/.test(b)?`[HTMLElement: ${b}]`:`[object ${b}]`}catch(b){return`**non-serializable** (${b})`}var y}(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const c=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(c===0)return a.replace("object ","");if(i(t))return"[Circular ~]";const l=t;if(l&&typeof l.toJSON=="function")try{return fc("",l.toJSON(),c-1,r,s)}catch{}const u=Array.isArray(t)?[]:{};let f=0;const h=zv(t);for(const p in h){if(!Object.prototype.hasOwnProperty.call(h,p))continue;if(f>=r){u[p]="[MaxProperties ~]";break}const g=h[p];u[p]=fc(p,g,c-1,r,s),f++}return o(t),u}function ws(e,t=[]){return[e,t]}function lM(e,t){const[n,r]=e;return[n,[...r,t]]}function jf(e,t){const n=e[1];for(const r of n)if(t(r,r[0].type))return!0;return!1}function hc(e){return pe.__SENTRY__&&pe.__SENTRY__.encodePolyfill?pe.__SENTRY__.encodePolyfill(e):new TextEncoder().encode(e)}function uM(e){const[t,n]=e;let r=JSON.stringify(t);function s(i){typeof r=="string"?r=typeof i=="string"?r+i:[hc(r),i]:r.push(typeof i=="string"?hc(i):i)}for(const i of n){const[o,a]=i;if(s(`
${JSON.stringify(o)}
`),typeof a=="string"||a instanceof Uint8Array)s(a);else{let c;try{c=JSON.stringify(a)}catch{c=JSON.stringify(Bt(a))}s(c)}}return typeof r=="string"?r:function(i){const o=i.reduce((l,u)=>l+u.length,0),a=new Uint8Array(o);let c=0;for(const l of i)a.set(l,c),c+=l.length;return a}(r)}function dM(e){const t=typeof e.data=="string"?hc(e.data):e.data;return[lt({type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),t]}const fM={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket",raw_security:"security"};function Df(e){return fM[e]}function Jv(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function hM(e,t,n,r){const s=Jv(n),i=e.type&&e.type!=="replay_event"?e.type:"event";(function(a,c){c&&(a.sdk=a.sdk||{},a.sdk.name=a.sdk.name||c.name,a.sdk.version=a.sdk.version||c.version,a.sdk.integrations=[...a.sdk.integrations||[],...c.integrations||[]],a.sdk.packages=[...a.sdk.packages||[],...c.packages||[]])})(e,n&&n.sdk);const o=function(a,c,l,u){const f=a.sdkProcessingMetadata&&a.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:a.event_id,sent_at:new Date().toISOString(),...c&&{sdk:c},...!!l&&u&&{dsn:Bi(u)},...f&&{trace:lt({...f})}}}(e,s,r,t);return delete e.sdkProcessingMetadata,ws(o,[[{type:i},e]])}function pc(e,t,n,r=0){return new ct((s,i)=>{const o=e[r];if(t===null||typeof o!="function")s(t);else{const a=o({...t},n);xe&&o.id&&a===null&&oe.log(`Event processor "${o.id}" dropped event`),fo(a)?a.then(c=>pc(e,c,n,r+1).then(s)).then(null,i):pc(e,a,n,r+1).then(s).then(null,i)}})}let Ks,If,Yo;function pM(e,t){const{fingerprint:n,span:r,breadcrumbs:s,sdkProcessingMetadata:i}=t;(function(o,a){const{extra:c,tags:l,user:u,contexts:f,level:h,transactionName:p}=a,g=lt(c);g&&Object.keys(g).length&&(o.extra={...g,...o.extra});const y=lt(l);y&&Object.keys(y).length&&(o.tags={...y,...o.tags});const b=lt(u);b&&Object.keys(b).length&&(o.user={...b,...o.user});const w=lt(f);w&&Object.keys(w).length&&(o.contexts={...w,...o.contexts}),h&&(o.level=h),p&&o.type!=="transaction"&&(o.transaction=p)})(e,t),r&&function(o,a){o.contexts={trace:rM(a),...o.contexts},o.sdkProcessingMetadata={dynamicSamplingContext:oM(a),...o.sdkProcessingMetadata};const c=qv(a),l=$l(c).description;l&&!o.transaction&&o.type==="transaction"&&(o.transaction=l)}(e,r),function(o,a){o.fingerprint=o.fingerprint?Array.isArray(o.fingerprint)?o.fingerprint:[o.fingerprint]:[],a&&(o.fingerprint=o.fingerprint.concat(a)),o.fingerprint&&!o.fingerprint.length&&delete o.fingerprint}(e,n),function(o,a){const c=[...o.breadcrumbs||[],...a];o.breadcrumbs=c.length?c:void 0}(e,s),function(o,a){o.sdkProcessingMetadata={...o.sdkProcessingMetadata,...a}}(e,i)}function Nf(e,t){const{extra:n,tags:r,user:s,contexts:i,level:o,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:l,eventProcessors:u,attachments:f,propagationContext:h,transactionName:p,span:g}=t;Ys(e,"extra",n),Ys(e,"tags",r),Ys(e,"user",s),Ys(e,"contexts",i),e.sdkProcessingMetadata=ho(e.sdkProcessingMetadata,a,2),o&&(e.level=o),p&&(e.transactionName=p),g&&(e.span=g),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),l.length&&(e.fingerprint=[...e.fingerprint,...l]),u.length&&(e.eventProcessors=[...e.eventProcessors,...u]),f.length&&(e.attachments=[...e.attachments,...f]),e.propagationContext={...e.propagationContext,...h}}function Ys(e,t,n){e[t]=ho(e[t],n,1)}function mM(e,t,n,r,s,i){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||dt(),timestamp:t.timestamp||Ms()},l=n.integrations||e.integrations.map(g=>g.name);(function(g,y){const{environment:b,release:w,dist:M,maxValueLength:C=250}=y;g.environment=g.environment||b||Vl,!g.release&&w&&(g.release=w),!g.dist&&M&&(g.dist=M),g.message&&(g.message=hr(g.message,C));const S=g.exception&&g.exception.values&&g.exception.values[0];S&&S.value&&(S.value=hr(S.value,C));const _=g.request;_&&_.url&&(_.url=hr(_.url,C))})(c,e),function(g,y){y.length>0&&(g.sdk=g.sdk||{},g.sdk.integrations=[...g.sdk.integrations||[],...y])}(c,l),s&&s.emit("applyFrameMetadata",t),t.type===void 0&&function(g,y){const b=function(w){const M=pe._sentryDebugIds;if(!M)return{};const C=Object.keys(M);return Yo&&C.length===If||(If=C.length,Yo=C.reduce((S,_)=>{Ks||(Ks={});const O=Ks[_];if(O)S[O[0]]=O[1];else{const k=w(_);for(let P=k.length-1;P>=0;P--){const L=k[P],j=L&&L.filename,N=M[_];if(j&&N){S[j]=N,Ks[_]=[j,N];break}}}return S},{})),Yo}(y);try{g.exception.values.forEach(w=>{w.stacktrace.frames.forEach(M=>{b&&M.filename&&(M.debug_id=b[M.filename])})})}catch{}}(c,e.stackParser);const u=function(g,y){if(!y)return g;const b=g?g.clone():new pn;return b.update(y),b}(r,n.captureContext);n.mechanism&&Sr(c,n.mechanism);const f=s?s.getEventProcessors():[],h=Ii("globalScope",()=>new pn).getScopeData();i&&Nf(h,i.getScopeData()),u&&Nf(h,u.getScopeData());const p=[...n.attachments||[],...h.attachments];return p.length&&(n.attachments=p),pM(c,h),pc([...f,...h.eventProcessors],c,n).then(g=>(g&&function(y){const b={};try{y.exception.values.forEach(M=>{M.stacktrace.frames.forEach(C=>{C.debug_id&&(C.abs_path?b[C.abs_path]=C.debug_id:C.filename&&(b[C.filename]=C.debug_id),delete C.debug_id)})})}catch{}if(Object.keys(b).length===0)return;y.debug_meta=y.debug_meta||{},y.debug_meta.images=y.debug_meta.images||[];const w=y.debug_meta.images;Object.entries(b).forEach(([M,C])=>{w.push({type:"sourcemap",code_file:M,debug_id:C})})}(g),typeof o=="number"&&o>0?function(y,b,w){if(!y)return null;const M={...y,...y.breadcrumbs&&{breadcrumbs:y.breadcrumbs.map(C=>({...C,...C.data&&{data:Bt(C.data,b,w)}}))},...y.user&&{user:Bt(y.user,b,w)},...y.contexts&&{contexts:Bt(y.contexts,b,w)},...y.extra&&{extra:Bt(y.extra,b,w)}};return y.contexts&&y.contexts.trace&&M.contexts&&(M.contexts.trace=y.contexts.trace,y.contexts.trace.data&&(M.contexts.trace.data=Bt(y.contexts.trace.data,b,w))),y.spans&&(M.spans=y.spans.map(C=>({...C,...C.data&&{data:Bt(C.data,b,w)}}))),y.contexts&&y.contexts.flags&&M.contexts&&(M.contexts.flags=Bt(y.contexts.flags,3,w)),M}(g,o,a):g))}function Ff(e,t){return Jn().captureEvent(e,t)}function Bf(e){const t=Ve(),n=Ps(),r=Jn(),{release:s,environment:i=Vl}=t&&t.getOptions()||{},{userAgent:o}=pe.navigator||{},a=KT({release:s,environment:i,user:r.getUser()||n.getUser(),...o&&{userAgent:o},...e}),c=n.getSession();return c&&c.status==="ok"&&_r(c,{status:"exited"}),Kv(),n.setSession(a),r.setSession(a),a}function Kv(){const e=Ps(),t=Jn(),n=t.getSession()||e.getSession();n&&function(r,s){let i={};r.status==="ok"&&(i={status:"exited"}),_r(r,i)}(n),Yv(),e.setSession(),t.setSession()}function Yv(){const e=Ps(),t=Jn(),n=Ve(),r=t.getSession()||e.getSession();r&&n&&n.captureSession(r)}function $f(e=!1){e?Kv():Yv()}function gM(e,t,n){return t||`${function(r){return`${function(s){const i=s.protocol?`${s.protocol}:`:"",o=s.port?`:${s.port}`:"";return`${i}//${s.host}${o}${s.path?`/${s.path}`:""}/api/`}(r)}${r.projectId}/envelope/`}(e)}?${function(r,s){const i={sentry_version:"7"};return r.publicKey&&(i.sentry_key=r.publicKey),s&&(i.sentry_client=`${s.name}/${s.version}`),new URLSearchParams(i).toString()}(e,n)}`}const Vf=[];function Uf(e,t){for(const n of t)n&&n.afterAllSetup&&n.afterAllSetup(e)}function zf(e,t,n){if(n[t.name])xe&&oe.log(`Integration skipped because it was already installed: ${t.name}`);else{if(n[t.name]=t,Vf.indexOf(t.name)===-1&&typeof t.setupOnce=="function"&&(t.setupOnce(),Vf.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(s,i)=>r(s,i,e))}if(typeof t.processEvent=="function"){const r=t.processEvent.bind(t),s=Object.assign((i,o)=>r(i,o,e),{id:t.name});e.addEventProcessor(s)}xe&&oe.log(`Integration installed: ${t.name}`)}}class vt extends Error{constructor(t,n="warn"){super(t),this.message=t,this.logLevel=n}}const Wf="Not capturing exception because it's already been captured.";class vM{constructor(t){if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=cM(t.dsn):xe&&oe.warn("No DSN provided, client will not send events."),this._dsn){const r=gM(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:r})}const n=["enableTracing","tracesSampleRate","tracesSampler"].find(r=>r in t&&t[r]==null);n&&Ts(()=>{console.warn(`[Sentry] Deprecation warning: \`${n}\` is set to undefined, which leads to tracing being enabled. In v9, a value of \`undefined\` will result in tracing being disabled.`)})}captureException(t,n,r){const s=dt();if(kf(t))return xe&&oe.log(Wf),s;const i={event_id:s,...n};return this._process(this.eventFromException(t,i).then(o=>this._captureEvent(o,i,r))),i.event_id}captureMessage(t,n,r,s){const i={event_id:dt(),...r},o=Dl(t)?t:String(t),a=ac(t)?this.eventFromMessage(o,n,i):this.eventFromException(t,i);return this._process(a.then(c=>this._captureEvent(c,i,s))),i.event_id}captureEvent(t,n,r){const s=dt();if(n&&n.originalException&&kf(n.originalException))return xe&&oe.log(Wf),s;const i={event_id:s,...n},o=(t.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(t,i,o||r)),i.event_id}captureSession(t){typeof t.release!="string"?xe&&oe.warn("Discarded session because of missing or non-string release"):(this.sendSession(t),_r(t,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const n=this._transport;return n?(this.emit("flush"),this._isClientDoneProcessing(t).then(r=>n.flush(t).then(s=>r&&s))):zn(!0)}close(t){return this.flush(t).then(n=>(this.getOptions().enabled=!1,this.emit("close"),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){const n=this._integrations[t.name];zf(this,t,this._integrations),n||Uf(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let r=hM(t,this._dsn,this._options._metadata,this._options.tunnel);for(const i of n.attachments||[])r=lM(r,dM(i));const s=this.sendEnvelope(r);s&&s.then(i=>this.emit("afterSendEvent",t,i),null)}sendSession(t){const n=function(r,s,i,o){const a=Jv(i);return ws({sent_at:new Date().toISOString(),...a&&{sdk:a},...!!o&&s&&{dsn:Bi(s)}},["aggregates"in r?[{type:"sessions"},r]:[{type:"session"},r.toJSON()]])}(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(n)}recordDroppedEvent(t,n,r){if(this._options.sendClientReports){const s=typeof r=="number"?r:1,i=`${t}:${n}`;xe&&oe.log(`Recording outcome: "${i}"${s>1?` (${s} times)`:""}`),this._outcomes[i]=(this._outcomes[i]||0)+s}}on(t,n){const r=this._hooks[t]=this._hooks[t]||[];return r.push(n),()=>{const s=r.indexOf(n);s>-1&&r.splice(s,1)}}emit(t,...n){const r=this._hooks[t];r&&r.forEach(s=>s(...n))}sendEnvelope(t){return this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport?this._transport.send(t).then(null,n=>(xe&&oe.error("Error while sending envelope:",n),n)):(xe&&oe.error("Transport disabled"),zn({}))}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=function(n,r){const s={};return r.forEach(i=>{i&&zf(n,i,s)}),s}(this,t),Uf(this,t)}_updateSessionFromEvent(t,n){let r=n.level==="fatal",s=!1;const i=n.exception&&n.exception.values;if(i){s=!0;for(const a of i){const c=a.mechanism;if(c&&c.handled===!1){r=!0;break}}}const o=t.status==="ok";(o&&t.errors===0||o&&r)&&(_r(t,{...r&&{status:"crashed"},errors:t.errors||Number(s||r)}),this.captureSession(t))}_isClientDoneProcessing(t){return new ct(n=>{let r=0;const s=setInterval(()=>{this._numProcessing==0?(clearInterval(s),n(!0)):(r+=1,t&&r>=t&&(clearInterval(s),n(!1)))},1)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,r=Jn(),s=Ps()){const i=this.getOptions(),o=Object.keys(this._integrations);return!n.integrations&&o.length>0&&(n.integrations=o),this.emit("preprocessEvent",t,n),t.type||s.setLastEventId(t.event_id||n.event_id),mM(i,t,n,r,this,s).then(a=>{if(a===null)return a;a.contexts={trace:ZT(r),...a.contexts};const c=function(l,u){const f=u.getPropagationContext();return f.dsc||Hv(f.traceId,l)}(this,r);return a.sdkProcessingMetadata={dynamicSamplingContext:c,...a.sdkProcessingMetadata},a})}_captureEvent(t,n={},r){return this._processEvent(t,n,r).then(s=>s.event_id,s=>{xe&&(s instanceof vt&&s.logLevel==="log"?oe.log(s.message):oe.warn(s))})}_processEvent(t,n,r){const s=this.getOptions(),{sampleRate:i}=s,o=Hf(t),a=qf(t),c=t.type||"error",l=`before send for type \`${c}\``,u=i===void 0?void 0:function(p){if(typeof p=="boolean")return Number(p);const g=typeof p=="string"?parseFloat(p):p;if(!(typeof g!="number"||isNaN(g)||g<0||g>1))return g;xe&&oe.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(p)} of type ${JSON.stringify(typeof p)}.`)}(i);if(a&&typeof u=="number"&&Math.random()>u)return this.recordDroppedEvent("sample_rate","error",t),Fi(new vt(`Discarding event because it's not included in the random sample (sampling rate = ${i})`,"log"));const f=c==="replay_event"?"replay":c,h=(t.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(t,n,r,h).then(p=>{if(p===null)throw this.recordDroppedEvent("event_processor",f,t),new vt("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return p;const g=function(y,b,w,M){const{beforeSend:C,beforeSendTransaction:S,beforeSendSpan:_}=b;if(qf(w)&&C)return C(w,M);if(Hf(w)){if(w.spans&&_){const O=[];for(const k of w.spans){const P=_(k);P?O.push(P):(iM(),y.recordDroppedEvent("before_send","span"))}w.spans=O}if(S){if(w.spans){const O=w.spans.length;w.sdkProcessingMetadata={...w.sdkProcessingMetadata,spanCountBeforeProcessing:O}}return S(w,M)}}return w}(this,s,p,n);return function(y,b){const w=`${b} must return \`null\` or a valid event.`;if(fo(y))return y.then(M=>{if(!xr(M)&&M!==null)throw new vt(w);return M},M=>{throw new vt(`${b} rejected with ${M}`)});if(!xr(y)&&y!==null)throw new vt(w);return y}(g,l)}).then(p=>{if(p===null){if(this.recordDroppedEvent("before_send",f,t),o){const b=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",b)}throw new vt(`${l} returned \`null\`, will not send event.`,"log")}const g=r&&r.getSession();if(!o&&g&&this._updateSessionFromEvent(g,p),o){const b=(p.sdkProcessingMetadata&&p.sdkProcessingMetadata.spanCountBeforeProcessing||0)-(p.spans?p.spans.length:0);b>0&&this.recordDroppedEvent("before_send","span",b)}const y=p.transaction_info;if(o&&y&&p.transaction!==t.transaction){const b="custom";p.transaction_info={...y,source:b}}return this.sendEvent(p,n),p}).then(null,p=>{throw p instanceof vt?p:(this.captureException(p,{data:{__sentry__:!0},originalException:p}),new vt(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${p}`))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.entries(t).map(([n,r])=>{const[s,i]=n.split(":");return{reason:s,category:i,quantity:r}})}_flushOutcomes(){xe&&oe.log("Flushing outcomes...");const t=this._clearOutcomes();if(t.length===0)return void(xe&&oe.log("No outcomes to send"));if(!this._dsn)return void(xe&&oe.log("No dsn provided, will not send outcomes"));xe&&oe.log("Sending outcomes:",t);const n=(r=t,ws((s=this._options.tunnel&&Bi(this._dsn))?{dsn:s}:{},[[{type:"client_report"},{timestamp:i||Ms(),discarded_events:r}]]));var r,s,i;this.sendEnvelope(n)}}function qf(e){return e.type===void 0}function Hf(e){return e.type==="transaction"}function yM(e){const t=[];function n(r){return t.splice(t.indexOf(r),1)[0]||Promise.resolve(void 0)}return{$:t,add:function(r){if(!(e===void 0||t.length<e))return Fi(new vt("Not adding Promise because buffer limit was reached."));const s=r();return t.indexOf(s)===-1&&t.push(s),s.then(()=>n(s)).then(null,()=>n(s).then(null,()=>{})),s},drain:function(r){return new ct((s,i)=>{let o=t.length;if(!o)return s(!0);const a=setTimeout(()=>{r&&r>0&&s(!1)},r);t.forEach(c=>{zn(c).then(()=>{--o||(clearTimeout(a),s(!0))},i)})})}}}function bM(e,{statusCode:t,headers:n},r=Date.now()){const s={...e},i=n&&n["x-sentry-rate-limits"],o=n&&n["retry-after"];if(i)for(const a of i.trim().split(",")){const[c,l,,,u]=a.split(":",5),f=parseInt(c,10),h=1e3*(isNaN(f)?60:f);if(l)for(const p of l.split(";"))p==="metric_bucket"&&u&&!u.split(";").includes("custom")||(s[p]=r+h);else s.all=r+h}else o?s.all=r+function(a,c=Date.now()){const l=parseInt(`${a}`,10);if(!isNaN(l))return 1e3*l;const u=Date.parse(`${a}`);return isNaN(u)?6e4:u-c}(o,r):t===429&&(s.all=r+6e4);return s}function wM(e,t,n=yM(e.bufferSize||64)){let r={};return{send:function(s){const i=[];if(jf(s,(c,l)=>{const u=Df(l);if(function(f,h,p=Date.now()){return function(g,y){return g[y]||g.all||0}(f,h)>p}(r,u)){const f=Gf(c,l);e.recordDroppedEvent("ratelimit_backoff",u,f)}else i.push(c)}),i.length===0)return zn({});const o=ws(s[0],i),a=c=>{jf(o,(l,u)=>{const f=Gf(l,u);e.recordDroppedEvent(c,Df(u),f)})};return n.add(()=>t({body:uM(o)}).then(c=>(c.statusCode!==void 0&&(c.statusCode<200||c.statusCode>=300)&&xe&&oe.warn(`Sentry responded with status code ${c.statusCode} to sent event.`),r=bM(r,c),c),c=>{throw a("network_error"),c})).then(c=>c,c=>{if(c instanceof vt)return xe&&oe.error("Skipped sending event because buffer is full."),a("queue_overflow"),zn({});throw c})},flush:s=>n.drain(s)}}function Gf(e,t){if(t==="event"||t==="transaction")return Array.isArray(e)?e[1]:void 0}const xM=100;function Sn(e,t){const n=Ve(),r=Ps();if(!n)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:i=xM}=n.getOptions();if(i<=0)return;const o={timestamp:Ms(),...e},a=s?Ts(()=>s(o,t)):o;a!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",a,t),r.addBreadcrumb(a,i))}let Jf;const Kf=new WeakMap,SM=()=>({name:"FunctionToString",setupOnce(){Jf=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=Nl(this),n=Kf.has(Ve())&&t!==void 0?t:this;return Jf.apply(n,e)}}catch{}},setup(e){Kf.set(e,!0)}}),_M=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/],kM=(e={})=>({name:"InboundFilters",processEvent(t,n,r){const s=r.getOptions(),i=function(o={},a={}){return{allowUrls:[...o.allowUrls||[],...a.allowUrls||[]],denyUrls:[...o.denyUrls||[],...a.denyUrls||[]],ignoreErrors:[...o.ignoreErrors||[],...a.ignoreErrors||[],...o.disableErrorDefaults?[]:_M],ignoreTransactions:[...o.ignoreTransactions||[],...a.ignoreTransactions||[]],ignoreInternal:o.ignoreInternal===void 0||o.ignoreInternal}}(e,s);return function(o,a){return a.ignoreInternal&&function(c){try{return c.exception.values[0].type==="SentryError"}catch{}return!1}(o)?(xe&&oe.warn(`Event dropped due to being internal Sentry Error.
Event: ${on(o)}`),!0):function(c,l){return c.type||!l||!l.length?!1:function(u){const f=[];u.message&&f.push(u.message);let h;try{h=u.exception.values[u.exception.values.length-1]}catch{}return h&&h.value&&(f.push(h.value),h.type&&f.push(`${h.type}: ${h.value}`)),f}(c).some(u=>Js(u,l))}(o,a.ignoreErrors)?(xe&&oe.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${on(o)}`),!0):function(c){return c.type||!c.exception||!c.exception.values||c.exception.values.length===0?!1:!c.message&&!c.exception.values.some(l=>l.stacktrace||l.type&&l.type!=="Error"||l.value)}(o)?(xe&&oe.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${on(o)}`),!0):function(c,l){if(c.type!=="transaction"||!l||!l.length)return!1;const u=c.transaction;return!!u&&Js(u,l)}(o,a.ignoreTransactions)?(xe&&oe.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${on(o)}`),!0):function(c,l){if(!l||!l.length)return!1;const u=Xs(c);return!!u&&Js(u,l)}(o,a.denyUrls)?(xe&&oe.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${on(o)}.
Url: ${Xs(o)}`),!0):function(c,l){if(!l||!l.length)return!0;const u=Xs(c);return!u||Js(u,l)}(o,a.allowUrls)?!1:(xe&&oe.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${on(o)}.
Url: ${Xs(o)}`),!0)}(t,i)?null:t}});function Xs(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch{}return t?function(n=[]){for(let r=n.length-1;r>=0;r--){const s=n[r];if(s&&s.filename!=="<anonymous>"&&s.filename!=="[native code]")return s.filename||null}return null}(t):null}catch{return xe&&oe.error(`Cannot extract url for event ${on(e)}`),null}}function CM(e,t,n=250,r,s,i,o){if(!(i.exception&&i.exception.values&&o&&Vn(o.originalException,Error)))return;const a=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;var c,l;a&&(i.exception.values=(c=mc(e,t,s,o.originalException,r,i.exception.values,a,0),l=n,c.map(u=>(u.value&&(u.value=hr(u.value,l)),u))))}function mc(e,t,n,r,s,i,o,a){if(i.length>=n+1)return i;let c=[...i];if(Vn(r[s],Error)){Yf(o,a);const l=e(t,r[s]),u=c.length;Xf(l,s,u,a),c=mc(e,t,n,r[s],s,[l,...c],l,u)}return Array.isArray(r.errors)&&r.errors.forEach((l,u)=>{if(Vn(l,Error)){Yf(o,a);const f=e(t,l),h=c.length;Xf(f,`errors[${u}]`,h,a),c=mc(e,t,n,l,s,[f,...c],f,h)}}),c}function Yf(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function Xf(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function Xo(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function EM(){"console"in pe&&oc.forEach(function(e){e in pe.console&&et(pe.console,e,function(t){return Ni[e]=t,function(...n){St("console",{args:n,level:e});const r=Ni[e];r&&r.apply(pe.console,n)}})})}function TM(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}const MM=()=>{let e;return{name:"Dedupe",processEvent(t){if(t.type)return t;try{if(function(n,r){return r?!!(function(s,i){const o=s.message,a=i.message;return!(!o&&!a||o&&!a||!o&&a||o!==a||!Zf(s,i)||!Qf(s,i))}(n,r)||function(s,i){const o=eh(i),a=eh(s);return!(!o||!a||o.type!==a.type||o.value!==a.value||!Zf(s,i)||!Qf(s,i))}(n,r)):!1}(t,e))return xe&&oe.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}};function Qf(e,t){let n=yf(e),r=yf(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||r.length!==n.length)return!1;for(let s=0;s<r.length;s++){const i=r[s],o=n[s];if(i.filename!==o.filename||i.lineno!==o.lineno||i.colno!==o.colno||i.function!==o.function)return!1}return!0}function Zf(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return n.join("")===r.join("")}catch{return!1}}function eh(e){return e.exception&&e.exception.values&&e.exception.values[0]}function th(e){return e===void 0?void 0:e>=400&&e<500?"warning":e>=500?"error":void 0}const Qo=pe;function gc(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function PM(){if(typeof EdgeRuntime=="string")return!0;if(!function(){if(!("fetch"in Qo))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}())return!1;if(gc(Qo.fetch))return!0;let e=!1;const t=Qo.document;if(t&&typeof t.createElement=="function")try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=gc(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){Gn&&oe.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}function AM(e,t){const n="fetch";Nn(n,e),Fn(n,()=>function(r,s=!1){s&&!PM()||et(pe,"fetch",function(i){return function(...o){const a=new Error,{method:c,url:l}=function(f){if(f.length===0)return{method:"GET",url:""};if(f.length===2){const[p,g]=f;return{url:nh(p),method:vc(g,"method")?String(g.method).toUpperCase():"GET"}}const h=f[0];return{url:nh(h),method:vc(h,"method")?String(h.method).toUpperCase():"GET"}}(o),u={args:o,fetchData:{method:c,url:l},startTimestamp:1e3*Ut(),virtualError:a};return r||St("fetch",{...u}),i.apply(pe,o).then(async f=>(r?r(f):St("fetch",{...u,endTimestamp:1e3*Ut(),response:f}),f),f=>{throw St("fetch",{...u,endTimestamp:1e3*Ut(),error:f}),jl(f)&&f.stack===void 0&&(f.stack=a.stack,Un(f,"framesToPop",1)),f})}})}(void 0,t))}function vc(e,t){return!!e&&typeof e=="object"&&!!e[t]}function nh(e){return typeof e=="string"?e:e?vc(e,"url")?e.url:e.toString?e.toString():"":""}const Qs=pe,je=pe;let yc=0;function rh(){return yc>0}function Cr(e,t={}){if(!function(r){return typeof r=="function"}(e))return e;try{const r=e.__sentry_wrapped__;if(r)return typeof r=="function"?r:e;if(Nl(e))return e}catch{return e}const n=function(...r){try{const s=r.map(i=>Cr(i,t));return e.apply(this,s)}catch(s){throw yc++,setTimeout(()=>{yc--}),function(...i){const o=Bl(lo());if(i.length===2){const[a,c]=i;return a?o.withSetScope(a,c):o.withScope(c)}o.withScope(i[0])}(i=>{var o;i.addEventProcessor(a=>(t.mechanism&&(lc(a,void 0),Sr(a,t.mechanism)),a.extra={...a.extra,arguments:r},a)),o=s,Jn().captureException(o,void 0)}),s}};try{for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}catch{}Uv(n,e),Un(e,"__sentry_wrapped__",n);try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get:()=>e.name})}catch{}return n}const po=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function Ul(e,t){const n=zl(e,t),r={type:LM(t),value:jM(t)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function OM(e,t,n,r){const s=Ve(),i=s&&s.getOptions().normalizeDepth,o=function(l){for(const u in l)if(Object.prototype.hasOwnProperty.call(l,u)){const f=l[u];if(f instanceof Error)return f}}(t),a={__serialized__:Gv(t,i)};if(o)return{exception:{values:[Ul(e,o)]},extra:a};const c={exception:{values:[{type:uo(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:DM(t,{isUnhandledRejection:r})}]},extra:a};if(n){const l=zl(e,n);l.length&&(c.exception.values[0].stacktrace={frames:l})}return c}function Zo(e,t){return{exception:{values:[Ul(e,t)]}}}function zl(e,t){const n=t.stacktrace||t.stack||"",r=function(i){return i&&RM.test(i.message)?1:0}(t),s=function(i){return typeof i.framesToPop=="number"?i.framesToPop:0}(t);try{return e(n,r,s)}catch{}return[]}const RM=/Minified React error #\d+;/i;function Xv(e){return typeof WebAssembly<"u"&&WebAssembly.Exception!==void 0&&e instanceof WebAssembly.Exception}function LM(e){const t=e&&e.name;return!t&&Xv(e)?e.message&&Array.isArray(e.message)&&e.message.length==2?e.message[0]:"WebAssembly.Exception":t}function jM(e){const t=e&&e.message;return t?t.error&&typeof t.error.message=="string"?t.error.message:Xv(e)&&Array.isArray(e.message)&&e.message.length==2?e.message[1]:t:"No error message"}function bc(e,t,n,r,s){let i;if(Bv(t)&&t.error)return Zo(e,t.error);if(wf(t)||Fr(t,"DOMException")){const o=t;if("stack"in t)i=Zo(e,t);else{const a=o.name||(wf(o)?"DOMError":"DOMException"),c=o.message?`${a}: ${o.message}`:a;i=wc(e,c,n,r),lc(i,c)}return"code"in o&&(i.tags={...i.tags,"DOMException.code":`${o.code}`}),i}return jl(t)?Zo(e,t):xr(t)||uo(t)?(i=OM(e,t,n,s),Sr(i,{synthetic:!0}),i):(i=wc(e,t,n,r),lc(i,`${t}`),Sr(i,{synthetic:!0}),i)}function wc(e,t,n,r){const s={};if(r&&n){const i=zl(e,n);i.length&&(s.exception={values:[{value:t,stacktrace:{frames:i}}]}),Sr(s,{synthetic:!0})}if(Dl(t)){const{__sentry_template_string__:i,__sentry_template_values__:o}=t;return s.logentry={message:i,params:o},s}return s.message=t,s}function DM(e,{isUnhandledRejection:t}){const n=function(s,i=40){const o=Object.keys(zv(s));o.sort();const a=o[0];if(!a)return"[object has no keys]";if(a.length>=i)return hr(a,i);for(let c=o.length;c>0;c--){const l=o.slice(0,c).join(", ");if(!(l.length>i))return c===o.length?l:hr(l,i)}return""}(e),r=t?"promise rejection":"exception";return Bv(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:uo(e)?`Event \`${function(s){try{const i=Object.getPrototypeOf(s);return i?i.constructor.name:void 0}catch{}}(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}class IM extends vM{constructor(t){const n={parentSpanIsAlwaysRootSpan:!0,...t};(function(r,s,i=[s],o="npm"){const a=r._metadata||{};a.sdk||(a.sdk={name:`sentry.javascript.${s}`,packages:i.map(c=>({name:`${o}:@sentry/${c}`,version:In})),version:In}),r._metadata=a})(n,"browser",["browser"],je.SENTRY_SDK_SOURCE||"npm"),super(n),n.sendClientReports&&je.document&&je.document.addEventListener("visibilitychange",()=>{je.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(t,n){return function(r,s,i,o){const a=bc(r,s,i&&i.syntheticException||void 0,o);return Sr(a),a.level="error",i&&i.event_id&&(a.event_id=i.event_id),zn(a)}(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",r){return function(s,i,o="info",a,c){const l=wc(s,i,a&&a.syntheticException||void 0,c);return l.level=o,a&&a.event_id&&(l.event_id=a.event_id),zn(l)}(this._options.stackParser,t,n,r,this._options.attachStacktrace)}captureUserFeedback(t){if(!this._isEnabled())return void(po&&oe.warn("SDK not enabled, will not capture user feedback."));const n=function(r,{metadata:s,tunnel:i,dsn:o}){const a={event_id:r.event_id,sent_at:new Date().toISOString(),...s&&s.sdk&&{sdk:{name:s.sdk.name,version:s.sdk.version}},...!!i&&!!o&&{dsn:Bi(o)}};return ws(a,[function(l){return[{type:"user_report"},l]}(r)])}(t,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(n)}_prepareEvent(t,n,r){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,r)}}const NM=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Je=pe;let sh,ea,ta,Zs;function FM(){if(!Je.document)return;const e=St.bind(null,"dom"),t=ih(e,!0);Je.document.addEventListener("click",t,!1),Je.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{const r=Je[n],s=r&&r.prototype;s&&s.hasOwnProperty&&s.hasOwnProperty("addEventListener")&&(et(s,"addEventListener",function(i){return function(o,a,c){if(o==="click"||o=="keypress")try{const l=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},u=l[o]=l[o]||{refCount:0};if(!u.handler){const f=ih(e);u.handler=f,i.call(this,o,f,c)}u.refCount++}catch{}return i.call(this,o,a,c)}}),et(s,"removeEventListener",function(i){return function(o,a,c){if(o==="click"||o=="keypress")try{const l=this.__sentry_instrumentation_handlers__||{},u=l[o];u&&(u.refCount--,u.refCount<=0&&(i.call(this,o,u.handler,c),u.handler=void 0,delete l[o]),Object.keys(l).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return i.call(this,o,a,c)}}))})}function ih(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=function(i){try{return i.target}catch{return null}}(n);if(function(i,o){return i==="keypress"&&(!o||!o.tagName||o.tagName!=="INPUT"&&o.tagName!=="TEXTAREA"&&!o.isContentEditable)}(n.type,r))return;Un(n,"_sentryCaptured",!0),r&&!r._sentryId&&Un(r,"_sentryId",dt());const s=n.type==="keypress"?"input":n.type;(function(i){if(i.type!==ea)return!1;try{if(!i.target||i.target._sentryId!==ta)return!1}catch{}return!0})(n)||(e({event:n,name:s,global:t}),ea=n.type,ta=r?r._sentryId:void 0),clearTimeout(sh),sh=Je.setTimeout(()=>{ta=void 0,ea=void 0},1e3)}}function Qv(e){const t="history";Nn(t,e),Fn(t,BM)}function BM(){if(!function(){const n=Qs.chrome,r=n&&n.app&&n.app.runtime,s="history"in Qs&&!!Qs.history.pushState&&!!Qs.history.replaceState;return!r&&s}())return;const e=Je.onpopstate;function t(n){return function(...r){const s=r.length>2?r[2]:void 0;if(s){const i=Zs,o=String(s);Zs=o,St("history",{from:i,to:o})}return n.apply(this,r)}}Je.onpopstate=function(...n){const r=Je.location.href,s=Zs;if(Zs=r,St("history",{from:s,to:r}),e)try{return e.apply(this,n)}catch{}},et(Je.history,"pushState",t),et(Je.history,"replaceState",t)}const yi={};function oh(e){yi[e]=void 0}const es="__sentry_xhr_v3__";function $M(){if(!Je.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(t,n,r){const s=new Error,i=1e3*Ut(),o=$t(r[0])?r[0].toUpperCase():void 0,a=function(l){if($t(l))return l;try{return l.toString()}catch{}}(r[1]);if(!o||!a)return t.apply(n,r);n[es]={method:o,url:a,request_headers:{}},o==="POST"&&a.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const c=()=>{const l=n[es];if(l&&n.readyState===4){try{l.status_code=n.status}catch{}St("xhr",{endTimestamp:1e3*Ut(),startTimestamp:i,xhr:n,virtualError:s})}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply:(l,u,f)=>(c(),l.apply(u,f))}):n.addEventListener("readystatechange",c),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(l,u,f){const[h,p]=f,g=u[es];return g&&$t(h)&&$t(p)&&(g.request_headers[h.toLowerCase()]=p),l.apply(u,f)}}),t.apply(n,r)}}),e.send=new Proxy(e.send,{apply(t,n,r){const s=n[es];return s?(r[0]!==void 0&&(s.body=r[0]),St("xhr",{startTimestamp:1e3*Ut(),xhr:n}),t.apply(n,r)):t.apply(n,r)}})}function VM(e,t=function(n){const r=yi[n];if(r)return r;let s=Je[n];if(gc(s))return yi[n]=s.bind(Je);const i=Je.document;if(i&&typeof i.createElement=="function")try{const o=i.createElement("iframe");o.hidden=!0,i.head.appendChild(o);const a=o.contentWindow;a&&a[n]&&(s=a[n]),i.head.removeChild(o)}catch(o){NM&&oe.warn(`Could not create sandbox iframe for ${n} check, bailing to window.${n}: `,o)}return s&&(yi[n]=s.bind(Je))}("fetch")){let n=0,r=0;return wM(e,function(s){const i=s.body.length;n+=i,r++;const o={body:s.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};if(!t)return oh("fetch"),Fi("No fetch implementation available");try{return t(e.url,o).then(a=>(n-=i,r--,{statusCode:a.status,headers:{"x-sentry-rate-limits":a.headers.get("X-Sentry-Rate-Limits"),"retry-after":a.headers.get("Retry-After")}}))}catch(a){return oh("fetch"),n-=i,r--,Fi(a)}})}function na(e,t,n,r){const s={filename:e,function:t==="<anonymous>"?Ln:t,in_app:!0};return n!==void 0&&(s.lineno=n),r!==void 0&&(s.colno=r),s}const UM=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,zM=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,WM=/\((\S*)(?::(\d+))(?::(\d+))\)/,qM=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,HM=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,GM=function(...e){const t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,s=0)=>{const i=[],o=n.split(`
`);for(let a=r;a<o.length;a++){const c=o[a];if(c.length>1024)continue;const l=mf.test(c)?c.replace(mf,"$1"):c;if(!l.match(/\S*Error: /)){for(const u of t){const f=u(l);if(f){i.push(f);break}}if(i.length>=50+s)break}}return function(a){if(!a.length)return[];const c=Array.from(a);return/sentryWrapped/.test(Gs(c).function||"")&&c.pop(),c.reverse(),gf.test(Gs(c).function||"")&&(c.pop(),gf.test(Gs(c).function||"")&&c.pop()),c.slice(0,50).map(l=>({...l,filename:l.filename||Gs(c).filename,function:l.function||Ln}))}(i.slice(s))}}([30,e=>{const t=UM.exec(e);if(t){const[,r,s,i]=t;return na(r,Ln,+s,+i)}const n=zM.exec(e);if(n){if(n[2]&&n[2].indexOf("eval")===0){const i=WM.exec(n[2]);i&&(n[2]=i[1],n[3]=i[2],n[4]=i[3])}const[r,s]=ah(n[1]||Ln,n[2]);return na(s,r,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}}],[50,e=>{const t=qM.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const s=HM.exec(t[3]);s&&(t[1]=t[1]||"eval",t[3]=s[1],t[4]=s[2],t[5]="")}let n=t[3],r=t[1]||Ln;return[r,n]=ah(r,n),na(n,r,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}]),ah=(e,t)=>{const n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:Ln,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},ch=1024,JM=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:"Breadcrumbs",setup(n){var r;t.console&&function(s){const i="console";Nn(i,s),Fn(i,EM)}(function(s){return function(i){if(Ve()!==s)return;const o={category:"console",data:{arguments:i.args,logger:"console"},level:TM(i.level),message:xf(i.args," ")};if(i.level==="assert"){if(i.args[0]!==!1)return;o.message=`Assertion failed: ${xf(i.args.slice(1)," ")||"console.assert"}`,o.data.arguments=i.args.slice(1)}Sn(o,{input:i.args,level:i.level})}}(n)),t.dom&&(r=function(s,i){return function(o){if(Ve()!==s)return;let a,c,l=typeof i=="object"?i.serializeAttribute:void 0,u=typeof i=="object"&&typeof i.maxStringLength=="number"?i.maxStringLength:void 0;u&&u>ch&&(po&&oe.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${u} was configured. Sentry will use 1024 instead.`),u=ch),typeof l=="string"&&(l=[l]);try{const h=o.event,p=function(g){return!!g&&!!g.target}(h)?h.target:h;a=Vv(p,{keyAttrs:l,maxStringLength:u}),c=function(g){if(!Il.HTMLElement)return null;let y=g;for(let b=0;b<5;b++){if(!y)return null;if(y instanceof HTMLElement){if(y.dataset.sentryComponent)return y.dataset.sentryComponent;if(y.dataset.sentryElement)return y.dataset.sentryElement}y=y.parentNode}return null}(p)}catch{a="<unknown>"}if(a.length===0)return;const f={category:`ui.${o.name}`,message:a};c&&(f.data={"ui.component_name":c}),Sn(f,{event:o.event,name:o.name,global:o.global})}}(n,t.dom),Nn("dom",r),Fn("dom",FM)),t.xhr&&function(s){Nn("xhr",s),Fn("xhr",$M)}(function(s){return function(i){if(Ve()!==s)return;const{startTimestamp:o,endTimestamp:a}=i,c=i.xhr[es];if(!o||!a||!c)return;const{method:l,url:u,status_code:f,body:h}=c,p={method:l,url:u,status_code:f},g={xhr:i.xhr,input:h,startTimestamp:o,endTimestamp:a};Sn({category:"xhr",data:p,type:"http",level:th(f)},g)}}(n)),t.fetch&&AM(function(s){return function(i){if(Ve()!==s)return;const{startTimestamp:o,endTimestamp:a}=i;if(a&&(!i.fetchData.url.match(/sentry_key/)||i.fetchData.method!=="POST"))if(i.error)Sn({category:"fetch",data:i.fetchData,level:"error",type:"http"},{data:i.error,input:i.args,startTimestamp:o,endTimestamp:a});else{const c=i.response,l={...i.fetchData,status_code:c&&c.status},u={input:i.args,response:c,startTimestamp:o,endTimestamp:a};Sn({category:"fetch",data:l,type:"http",level:th(l.status_code)},u)}}}(n)),t.history&&Qv(function(s){return function(i){if(Ve()!==s)return;let o=i.from,a=i.to;const c=Xo(je.location.href);let l=o?Xo(o):void 0;const u=Xo(a);l&&l.path||(l=c),c.protocol===u.protocol&&c.host===u.host&&(a=u.relative),c.protocol===l.protocol&&c.host===l.host&&(o=l.relative),Sn({category:"navigation",data:{from:o,to:a}})}}(n)),t.sentry&&n.on("beforeSendEvent",function(s){return function(i){Ve()===s&&Sn({category:"sentry."+(i.type==="transaction"?"transaction":"event"),event_id:i.event_id,level:i.level,message:on(i)},{event:i})}}(n))}}},KM=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],YM=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:"BrowserApiErrors",setupOnce(){t.setTimeout&&et(je,"setTimeout",lh),t.setInterval&&et(je,"setInterval",lh),t.requestAnimationFrame&&et(je,"requestAnimationFrame",XM),t.XMLHttpRequest&&"XMLHttpRequest"in je&&et(XMLHttpRequest.prototype,"send",QM);const n=t.eventTarget;n&&(Array.isArray(n)?n:KM).forEach(ZM)}}};function lh(e){return function(...t){const n=t[0];return t[0]=Cr(n,{mechanism:{data:{function:hn(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function XM(e){return function(t){return e.apply(this,[Cr(t,{mechanism:{data:{function:"requestAnimationFrame",handler:hn(e)},handled:!1,type:"instrument"}})])}}function QM(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(r=>{r in n&&typeof n[r]=="function"&&et(n,r,function(s){const i={mechanism:{data:{function:r,handler:hn(s)},handled:!1,type:"instrument"}},o=Nl(s);return o&&(i.mechanism.data.handler=hn(o)),Cr(s,i)})}),e.apply(this,t)}}function ZM(e){const t=je[e],n=t&&t.prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(et(n,"addEventListener",function(r){return function(s,i,o){try{typeof i.handleEvent=="function"&&(i.handleEvent=Cr(i.handleEvent,{mechanism:{data:{function:"handleEvent",handler:hn(i),target:e},handled:!1,type:"instrument"}}))}catch{}return r.apply(this,[s,Cr(i,{mechanism:{data:{function:"addEventListener",handler:hn(i),target:e},handled:!1,type:"instrument"}}),o])}}),et(n,"removeEventListener",function(r){return function(s,i,o){try{const a=i.__sentry_wrapped__;a&&r.call(this,s,a,o)}catch{}return r.call(this,s,i,o)}}))}const eP=()=>({name:"BrowserSession",setupOnce(){je.document!==void 0?(Bf({ignoreDuration:!0}),$f(),Qv(({from:e,to:t})=>{e!==void 0&&e!==t&&(Bf({ignoreDuration:!0}),$f())})):po&&oe.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.")}}),tP=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:"GlobalHandlers",setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(function(r){(function(s){const i="error";Nn(i,s),Fn(i,qT)})(s=>{const{stackParser:i,attachStacktrace:o}=dh();if(Ve()!==r||rh())return;const{msg:a,url:c,line:l,column:u,error:f}=s,h=function(p,g,y,b){const w=p.exception=p.exception||{},M=w.values=w.values||[],C=M[0]=M[0]||{},S=C.stacktrace=C.stacktrace||{},_=S.frames=S.frames||[],O=b,k=y,P=$t(g)&&g.length>0?g:function(){try{return Il.document.location.href}catch{return""}}();return _.length===0&&_.push({colno:O,filename:P,function:Ln,in_app:!0,lineno:k}),p}(bc(i,f||a,void 0,o,!1),c,l,u);h.level="error",Ff(h,{originalException:f,mechanism:{handled:!1,type:"onerror"}})})}(n),uh("onerror")),t.onunhandledrejection&&(function(r){(function(s){const i="unhandledrejection";Nn(i,s),Fn(i,HT)})(s=>{const{stackParser:i,attachStacktrace:o}=dh();if(Ve()!==r||rh())return;const a=function(l){if(ac(l))return l;try{if("reason"in l)return l.reason;if("detail"in l&&"reason"in l.detail)return l.detail.reason}catch{}return l}(s),c=ac(a)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(a)}`}]}}:bc(i,a,void 0,o,!0);c.level="error",Ff(c,{originalException:a,mechanism:{handled:!1,type:"onunhandledrejection"}})})}(n),uh("onunhandledrejection"))}}};function uh(e){po&&oe.log(`Global Handler attached: ${e}`)}function dh(){const e=Ve();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const nP=()=>({name:"HttpContext",preprocessEvent(e){if(!je.navigator&&!je.location&&!je.document)return;const t=e.request&&e.request.url||je.location&&je.location.href,{referrer:n}=je.document||{},{userAgent:r}=je.navigator||{},s={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},i={...e.request,...t&&{url:t},headers:s};e.request=i}}),rP=(e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:"LinkedErrors",preprocessEvent(r,s,i){const o=i.getOptions();CM(Ul,o.stackParser,o.maxValueLength,n,t,r,s)}}};var fh="new",hh="loading",ph="loaded",xc="joining-meeting",An="joined-meeting",_n="left-meeting",Qt="error",sP="playable",ra="unknown",iP="full",oP="base",mh="no-room",aP="end-of-life",cP="connection-error",lP="iframe-ready-for-launch-config",uP="iframe-launch-config",dP="theme-updated",fP="loading",hP="load-attempt-failed",gh="loaded",pP="started-camera",mP="camera-error",gP="joining-meeting",vP="joined-meeting",yP="left-meeting",bP="participant-joined",wP="participant-updated",xP="participant-left",SP="participant-counts-updated",_P="access-state-updated",kP="meeting-session-summary-updated",CP="meeting-session-state-updated",EP="waiting-participant-added",TP="waiting-participant-updated",MP="waiting-participant-removed",PP="track-started",AP="track-stopped",OP="transcription-started",RP="transcription-stopped",LP="transcription-error",vh="recording-started",yh="recording-stopped",jP="recording-stats",DP="recording-error",IP="recording-upload-completed",NP="recording-data",FP="app-message",BP="transcription-message",$P="remote-media-player-started",VP="remote-media-player-updated",UP="remote-media-player-stopped",zP="local-screen-share-started",WP="local-screen-share-stopped",qP="local-screen-share-canceled",HP="active-speaker-change",GP="active-speaker-mode-change",JP="network-quality-change",KP="network-connection",YP="cpu-load-change",XP="face-counts-updated",ei="fullscreen",ti="exited-fullscreen",QP="live-streaming-started",ZP="live-streaming-updated",eA="live-streaming-stopped",tA="live-streaming-error",nA="lang-updated",rA="receive-settings-updated",bh="input-settings-updated",wh="nonfatal-error",xh="error",sa=4096,Sh=102400,ia="iframe-call-message",_h="local-screen-start",kh="daily-method-update-live-streaming-endpoints",ni="transmit-log",Vt="daily-custom-track",bi={NONE:"none",BGBLUR:"background-blur",BGIMAGE:"background-image",FACE_DETECTION:"face-detection"},Zv={NONE:"none",NOISE_CANCELLATION:"noise-cancellation"},Sc={PLAY:"play",PAUSE:"pause"},oa=["jpg","png","jpeg"],sA="add-endpoints",iA="remove-endpoints",Ch="sip-call-transfer";function ft(){return!de()&&typeof window<"u"&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:""}function de(){return typeof navigator<"u"&&navigator.product&&navigator.product==="ReactNative"}function ey(){return navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia}function oA(){return!!(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)&&(function(e,t){if(!e||!t)return!0;switch(e){case"Chrome":return t.major>=75;case"Safari":return RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection")&&!(t.major===13&&t.minor===0&&t.point===0);case"Firefox":return t.major>=67}return!0}(Wn(),$i())||de())}function Eh(){if(de()||!document)return!1;var e=document.createElement("iframe");return!!e.requestFullscreen||!!e.webkitRequestFullscreen}var aA=function(){try{var e=document.createElement("canvas"),t=(navigator.webdriver?e.getContext("webgl2"):e.getContext("webgl2",{failIfMajorPerformanceCaveat:!0}))!=null;return e.remove(),t}catch{return!1}}();function ty(){var e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return!de()&&!!aA&&(e?function(){return Mh()?!1:["Chrome","Firefox"].includes(Wn())}():function(){if(Mh())return!1;var t=Wn();if(t==="Safari"){var n=ql();if(n.major<15||n.major===15&&n.minor<4)return!1}return t==="Chrome"?Wl().major>=77:t==="Firefox"?Hl().major>=97:["Chrome","Firefox","Safari"].includes(t)}())}function ny(){if(de()||ry()||typeof AudioWorkletNode>"u")return!1;switch(Wn()){case"Chrome":case"Firefox":return!0;case"Safari":var e=$i();return e.major>17||e.major===17&&e.minor>=4}return!1}function Th(){return ey()&&!function(){var e,t=Wn();if(!ft())return!0;switch(t){case"Chrome":return(e=Wl()).major&&e.major>0&&e.major<75;case"Firefox":return(e=Hl()).major<91;case"Safari":return(e=ql()).major<13||e.major===13&&e.minor<1;default:return!0}}()}function ry(){return ft().match(/Linux; Android/)}function Mh(){var e,t=ft(),n=t.match(/Mac/)&&(!de()&&typeof window<"u"&&(e=window)!==null&&e!==void 0&&(e=e.navigator)!==null&&e!==void 0&&e.maxTouchPoints?window.navigator.maxTouchPoints:0)>=5;return!!(t.match(/Mobi/)||t.match(/Android/)||n)||!!ft().match(/DailyAnd\//)||void 0}function Wn(){if(typeof window<"u"){var e=ft();return sy()?"Safari":e.indexOf("Edge")>-1?"Edge":e.match(/Chrome\//)?"Chrome":e.indexOf("Safari")>-1||iy()?"Safari":e.indexOf("Firefox")>-1?"Firefox":e.indexOf("MSIE")>-1||e.indexOf(".NET")>-1?"IE":"Unknown Browser"}}function $i(){switch(Wn()){case"Chrome":return Wl();case"Safari":return ql();case"Firefox":return Hl();case"Edge":return function(){var e=0,t=0;if(typeof window<"u"){var n=ft().match(/Edge\/(\d+).(\d+)/);if(n)try{e=parseInt(n[1]),t=parseInt(n[2])}catch{}}return{major:e,minor:t}}()}}function Wl(){var e=0,t=0,n=0,r=0,s=!1;if(typeof window<"u"){var i=ft(),o=i.match(/Chrome\/(\d+).(\d+).(\d+).(\d+)/);if(o)try{e=parseInt(o[1]),t=parseInt(o[2]),n=parseInt(o[3]),r=parseInt(o[4]),s=i.indexOf("OPR/")>-1}catch{}}return{major:e,minor:t,build:n,patch:r,opera:s}}function sy(){return!!ft().match(/iPad|iPhone|iPod/i)&&ey()}function iy(){return ft().indexOf("AppleWebKit/605.1.15")>-1}function ql(){var e=0,t=0,n=0;if(typeof window<"u"){var r=ft().match(/Version\/(\d+).(\d+)(.(\d+))?/);if(r)try{e=parseInt(r[1]),t=parseInt(r[2]),n=parseInt(r[4])}catch{}else(sy()||iy())&&(e=14,t=0,n=3)}return{major:e,minor:t,point:n}}function Hl(){var e=0,t=0;if(typeof window<"u"){var n=ft().match(/Firefox\/(\d+).(\d+)/);if(n)try{e=parseInt(n[1]),t=parseInt(n[2])}catch{}}return{major:e,minor:t}}var oy=function(){return st(function e(){rt(this,e)},[{key:"addListenerForMessagesFromCallMachine",value:function(e,t,n){Kr()}},{key:"addListenerForMessagesFromDailyJs",value:function(e,t,n){Kr()}},{key:"sendMessageToCallMachine",value:function(e,t,n,r){Kr()}},{key:"sendMessageToDailyJs",value:function(e,t){Kr()}},{key:"removeListener",value:function(e){Kr()}}])}();function Ph(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function aa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ph(Object(n),!0).forEach(function(r){Pt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ph(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ay(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ay=function(){return!!e})()}var cA=function(){function e(){var t,n,r,s;return rt(this,e),n=this,r=Ct(r=e),(t=oo(n,ay()?Reflect.construct(r,[],Ct(n).constructor):r.apply(n,s)))._wrappedListeners={},t._messageCallbacks={},t}return ao(e,oy),st(e,[{key:"addListenerForMessagesFromCallMachine",value:function(t,n,r){var s=this,i=function(o){if(o.data&&o.data.what==="iframe-call-message"&&(!o.data.callClientId||o.data.callClientId===n)&&(!o.data.from||o.data.from!=="module")){var a=aa({},o.data);if(delete a.from,a.callbackStamp&&s._messageCallbacks[a.callbackStamp]){var c=a.callbackStamp;s._messageCallbacks[c].call(r,a),delete s._messageCallbacks[c]}delete a.what,delete a.callbackStamp,t.call(r,a)}};this._wrappedListeners[t]=i,window.addEventListener("message",i)}},{key:"addListenerForMessagesFromDailyJs",value:function(t,n,r){var s=function(i){var o;if(!(!i.data||i.data.what!==ia||!i.data.action||i.data.from&&i.data.from!=="module"||i.data.callClientId&&n&&i.data.callClientId!==n||i!=null&&(o=i.data)!==null&&o!==void 0&&o.callFrameId)){var a=i.data;t.call(r,a)}};this._wrappedListeners[t]=s,window.addEventListener("message",s)}},{key:"sendMessageToCallMachine",value:function(t,n,r,s){if(!r)throw new Error("undefined callClientId. Are you trying to use a DailyCall instance previously destroyed?");var i=aa({},t);if(i.what=ia,i.from="module",i.callClientId=r,n){var o=co();this._messageCallbacks[o]=n,i.callbackStamp=o}var a=s?s.contentWindow:window,c=this._callMachineTargetOrigin(s);c&&a.postMessage(i,c)}},{key:"sendMessageToDailyJs",value:function(t,n){t.what=ia,t.callClientId=n,t.from="embedded",window.postMessage(t,this._targetOriginFromWindowLocation())}},{key:"removeListener",value:function(t){var n=this._wrappedListeners[t];n&&(window.removeEventListener("message",n),delete this._wrappedListeners[t])}},{key:"forwardPackagedMessageToCallMachine",value:function(t,n,r){var s=aa({},t);s.callClientId=r;var i=n?n.contentWindow:window,o=this._callMachineTargetOrigin(n);o&&i.postMessage(s,o)}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(t,n){var r=function(s){if(s.data&&s.data.what==="iframe-call-message"&&(!s.data.callClientId||s.data.callClientId===n)&&(!s.data.from||s.data.from!=="module")){var i=s.data;t(i)}};return this._wrappedListeners[t]=r,window.addEventListener("message",r),t}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(t){var n=this._wrappedListeners[t];n&&(window.removeEventListener("message",n),delete this._wrappedListeners[t])}},{key:"_callMachineTargetOrigin",value:function(t){return t?t.src?new URL(t.src).origin:void 0:this._targetOriginFromWindowLocation()}},{key:"_targetOriginFromWindowLocation",value:function(){return window.location.protocol==="file:"?"*":window.location.origin}}])}();function Ah(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function cy(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cy=function(){return!!e})()}var lA=function(){function e(){var t,n,r,s;return rt(this,e),n=this,r=Ct(r=e),t=oo(n,cy()?Reflect.construct(r,[],Ct(n).constructor):r.apply(n,s)),global.callMachineToDailyJsEmitter=global.callMachineToDailyJsEmitter||new ic.EventEmitter,global.dailyJsToCallMachineEmitter=global.dailyJsToCallMachineEmitter||new ic.EventEmitter,t._wrappedListeners={},t._messageCallbacks={},t}return ao(e,oy),st(e,[{key:"addListenerForMessagesFromCallMachine",value:function(t,n,r){this._addListener(t,global.callMachineToDailyJsEmitter,n,r,"received call machine message")}},{key:"addListenerForMessagesFromDailyJs",value:function(t,n,r){this._addListener(t,global.dailyJsToCallMachineEmitter,n,r,"received daily-js message")}},{key:"sendMessageToCallMachine",value:function(t,n,r){this._sendMessage(t,global.dailyJsToCallMachineEmitter,r,n,"sending message to call machine")}},{key:"sendMessageToDailyJs",value:function(t,n){this._sendMessage(t,global.callMachineToDailyJsEmitter,n,null,"sending message to daily-js")}},{key:"removeListener",value:function(t){var n=this._wrappedListeners[t];n&&(global.callMachineToDailyJsEmitter.removeListener("message",n),global.dailyJsToCallMachineEmitter.removeListener("message",n),delete this._wrappedListeners[t])}},{key:"_addListener",value:function(t,n,r,s,i){var o=this,a=function(c){if(c.callClientId===r){if(c.callbackStamp&&o._messageCallbacks[c.callbackStamp]){var l=c.callbackStamp;o._messageCallbacks[l].call(s,c),delete o._messageCallbacks[l]}t.call(s,c)}};this._wrappedListeners[t]=a,n.addListener("message",a)}},{key:"_sendMessage",value:function(t,n,r,s,i){var o=function(c){for(var l=1;l<arguments.length;l++){var u=arguments[l]!=null?arguments[l]:{};l%2?Ah(Object(u),!0).forEach(function(f){Pt(c,f,u[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(u)):Ah(Object(u)).forEach(function(f){Object.defineProperty(c,f,Object.getOwnPropertyDescriptor(u,f))})}return c}({},t);if(o.callClientId=r,s){var a=co();this._messageCallbacks[a]=s,o.callbackStamp=a}n.emit("message",o)}}])}(),_c="replace",kc="shallow-merge",Oh=[_c,kc],uA=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.data,r=t.mergeStrategy,s=r===void 0?_c:r;rt(this,e),e._validateMergeStrategy(s),e._validateData(n,s),this.mergeStrategy=s,this.data=n}return st(e,[{key:"isNoOp",value:function(){return e.isNoOpUpdate(this.data,this.mergeStrategy)}}],[{key:"isNoOpUpdate",value:function(t,n){return Object.keys(t).length===0&&n===kc}},{key:"_validateMergeStrategy",value:function(t){if(!Oh.includes(t))throw Error("Unrecognized mergeStrategy provided. Options are: [".concat(Oh,"]"))}},{key:"_validateData",value:function(t,n){if(!function(a){if(a==null||he(a)!=="object")return!1;var c=Object.getPrototypeOf(a);return c==null||c===Object.prototype}(t))throw Error("Meeting session data must be a plain (map-like) object");var r;try{if(r=JSON.stringify(t),n===_c){var s=JSON.parse(r);Ge(s,t)||console.warn("The meeting session data provided will be modified when serialized.",s,t)}else if(n===kc){for(var i in t)if(Object.hasOwnProperty.call(t,i)&&t[i]!==void 0){var o=JSON.parse(JSON.stringify(t[i]));Ge(t[i],o)||console.warn("At least one key in the meeting session data provided will be modified when serialized.",o,t[i])}}}catch(a){throw Error("Meeting session data must be serializable to JSON: ".concat(a))}if(r.length>Sh)throw Error("Meeting session data is too large (".concat(r.length," characters). Maximum size suppported is ").concat(Sh,"."))}}])}();function ly(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ly=function(){return!!e})()}function Cc(e){var t=typeof Map=="function"?new Map:void 0;return Cc=function(n){if(n===null||!function(s){try{return Function.toString.call(s).indexOf("[native code]")!==-1}catch{return typeof s=="function"}}(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(t!==void 0){if(t.has(n))return t.get(n);t.set(n,r)}function r(){return function(s,i,o){if(ly())return Reflect.construct.apply(null,arguments);var a=[null];a.push.apply(a,i);var c=new(s.bind.apply(s,a));return o&&bs(c,o.prototype),c}(n,arguments,Ct(this).constructor)}return r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),bs(r,n)},Cc(e)}function uy(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uy=function(){return!!e})()}function Rh(e){var t,n=(t=window._daily)===null||t===void 0?void 0:t.pendings;if(n){var r=n.indexOf(e);r!==-1&&n.splice(r,1)}}var dA=function(){return st(function e(t){rt(this,e),this._currentLoad=null,this._callClientId=t},[{key:"load",value:function(){var e,t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0;if(this.loaded)return window._daily.instances[this._callClientId].callMachine.reset(),void r(!0);e=this._callClientId,window._daily.pendings.push(e),this._currentLoad&&this._currentLoad.cancel(),this._currentLoad=new fA(n,function(){r(!1)},function(i,o){o||Rh(t._callClientId),s(i,o)}),this._currentLoad.start()}},{key:"cancel",value:function(){this._currentLoad&&this._currentLoad.cancel(),Rh(this._callClientId)}},{key:"loaded",get:function(){return this._currentLoad&&this._currentLoad.succeeded}}])}(),fA=function(){return st(function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;rt(this,e),this._attemptsRemaining=3,this._currentAttempt=null,this._dailyConfig=t,this._successCallback=n,this._failureCallback=r},[{key:"start",value:function(){var e=this;if(!this._currentAttempt){var t=function(n){e._currentAttempt.cancelled||(e._attemptsRemaining--,e._failureCallback(n,e._attemptsRemaining>0),e._attemptsRemaining<=0||setTimeout(function(){e._currentAttempt.cancelled||(e._currentAttempt=new Lh(e._dailyConfig,e._successCallback,t),e._currentAttempt.start())},3e3))};this._currentAttempt=new Lh(this._dailyConfig,this._successCallback,t),this._currentAttempt.start()}}},{key:"cancel",value:function(){this._currentAttempt&&this._currentAttempt.cancel()}},{key:"cancelled",get:function(){return this._currentAttempt&&this._currentAttempt.cancelled}},{key:"succeeded",get:function(){return this._currentAttempt&&this._currentAttempt.succeeded}}])}(),ca=function(){function e(){return rt(this,e),t=this,r=arguments,n=Ct(n=e),oo(t,uy()?Reflect.construct(n,r||[],Ct(t).constructor):n.apply(t,r));var t,n,r}return ao(e,Cc(Error)),st(e)}(),Vi=2e4,Lh=function(){return st(function t(n,r,s){rt(this,t),this._loadAttemptImpl=de()||!n.avoidEval?new hA(n,r,s):new pA(n,r,s)},[{key:"start",value:(e=se(function*(){return this._loadAttemptImpl.start()}),function(){return e.apply(this,arguments)})},{key:"cancel",value:function(){this._loadAttemptImpl.cancel()}},{key:"cancelled",get:function(){return this._loadAttemptImpl.cancelled}},{key:"succeeded",get:function(){return this._loadAttemptImpl.succeeded}}]);var e}(),hA=function(){return st(function s(i,o,a){rt(this,s),this.cancelled=!1,this.succeeded=!1,this._networkTimedOut=!1,this._networkTimeout=null,this._iosCache=typeof iOSCallObjectBundleCache<"u"&&iOSCallObjectBundleCache,this._refetchHeaders=null,this._dailyConfig=i,this._successCallback=o,this._failureCallback=a},[{key:"start",value:(r=se(function*(){var s=ji(this._dailyConfig);!(yield this._tryLoadFromIOSCache(s))&&this._loadFromNetwork(s)}),function(){return r.apply(this,arguments)})},{key:"cancel",value:function(){clearTimeout(this._networkTimeout),this.cancelled=!0}},{key:"_tryLoadFromIOSCache",value:(n=se(function*(s){if(!this._iosCache)return!1;try{var i=yield this._iosCache.get(s);return!!this.cancelled||!!i&&(i.code?(Function('"use strict";'+i.code)(),this.succeeded=!0,this._successCallback(),!0):(this._refetchHeaders=i.refetchHeaders,!1))}catch{return!1}}),function(s){return n.apply(this,arguments)})},{key:"_loadFromNetwork",value:(t=se(function*(s){var i=this;this._networkTimeout=setTimeout(function(){i._networkTimedOut=!0,i._failureCallback({msg:"Timed out (>".concat(Vi," ms) when loading call object bundle ").concat(s),type:"timeout"})},Vi);try{var o=this._refetchHeaders?{headers:this._refetchHeaders}:{},a=yield fetch(s,o);if(clearTimeout(this._networkTimeout),this.cancelled||this._networkTimedOut)throw new ca;var c=yield this._getBundleCodeFromResponse(s,a);if(this.cancelled)throw new ca;Function('"use strict";'+c)(),this._iosCache&&this._iosCache.set(s,c,a.headers),this.succeeded=!0,this._successCallback()}catch(l){if(clearTimeout(this._networkTimeout),l instanceof ca||this.cancelled||this._networkTimedOut)return;this._failureCallback({msg:"Failed to load call object bundle ".concat(s,": ").concat(l),type:l.message})}}),function(s){return t.apply(this,arguments)})},{key:"_getBundleCodeFromResponse",value:(e=se(function*(s,i){if(i.ok)return yield i.text();if(this._iosCache&&i.status===304)return(yield this._iosCache.renew(s,i.headers)).code;throw new Error("Received ".concat(i.status," response"))}),function(s,i){return e.apply(this,arguments)})}]);var e,t,n,r}(),pA=function(){return st(function e(t,n,r){rt(this,e),this.cancelled=!1,this.succeeded=!1,this._dailyConfig=t,this._successCallback=n,this._failureCallback=r,this._attemptId=co(),this._networkTimeout=null,this._scriptElement=null},[{key:"start",value:function(){window._dailyCallMachineLoadWaitlist||(window._dailyCallMachineLoadWaitlist=new Set);var e=ji(this._dailyConfig);(typeof document>"u"?"undefined":he(document))==="object"?this._startLoading(e):this._failureCallback({msg:"Call object bundle must be loaded in a DOM/web context",type:"missing context"})}},{key:"cancel",value:function(){this._stopLoading(),this.cancelled=!0}},{key:"_startLoading",value:function(e){var t=this;this._signUpForCallMachineLoadWaitlist(),this._networkTimeout=setTimeout(function(){t._stopLoading(),t._failureCallback({msg:"Timed out (>".concat(Vi," ms) when loading call object bundle ").concat(e),type:"timeout"})},Vi);var n=document.getElementsByTagName("head")[0],r=document.createElement("script");this._scriptElement=r,r.onload=function(){t._stopLoading(),t.succeeded=!0,t._successCallback()},r.onerror=function(s){t._stopLoading(),t._failureCallback({msg:"Failed to load call object bundle ".concat(s.target.src),type:s.message})},r.src=e,n.appendChild(r)}},{key:"_stopLoading",value:function(){this._withdrawFromCallMachineLoadWaitlist(),clearTimeout(this._networkTimeout),this._scriptElement&&(this._scriptElement.onload=null,this._scriptElement.onerror=null)}},{key:"_signUpForCallMachineLoadWaitlist",value:function(){window._dailyCallMachineLoadWaitlist.add(this._attemptId)}},{key:"_withdrawFromCallMachineLoadWaitlist",value:function(){window._dailyCallMachineLoadWaitlist.delete(this._attemptId)}}])}(),ri=function(e,t,n){return gA(e.local,t,n)===!0},mA=function(e,t,n){return e.local.streams&&e.local.streams[t]&&e.local.streams[t].stream&&e.local.streams[t].stream["get".concat(n==="video"?"Video":"Audio","Tracks")]()[0]},ar=function(e,t,n,r){var s=vA(e,t,n,r);return s&&s.pendingTrack},gA=function(e,t,n){if(!e)return!1;var r=function(i){switch(i){case"avatar":return!0;case"staged":return i;default:return!!i}},s=e.public.subscribedTracks;return s&&s[t]?["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo"].indexOf(n)===-1&&s[t].custom?[!0,"staged"].includes(s[t].custom)?r(s[t].custom):r(s[t].custom[n]):r(s[t][n]):!s||r(s.ALL)},vA=function(e,t,n,r){var s=Object.values(e.streams||{}).filter(function(i){return i.participantId===t&&i.type===n&&i.pendingTrack&&i.pendingTrack.kind===r}).sort(function(i,o){return new Date(o.starttime)-new Date(i.starttime)});return s&&s[0]},yA=function(e,t){var n=e.local.public.customTracks;if(n&&n[t])return n[t].track};function jh(e,t){for(var n=t.getState(),r=0,s=["cam","screen"];r<s.length;r++)for(var i=s[r],o=0,a=["video","audio"];o<a.length;o++){var c=a[o],l=i==="cam"?c:"screen".concat(c.charAt(0).toUpperCase()+c.slice(1)),u=e.tracks[l];if(u){var f=e.local?mA(n,i,c):ar(n,e.session_id,i,c);u.state==="playable"&&(u.track=f),u.persistentTrack=f}}}function Dh(e,t){try{var n=t.getState();for(var r in e.tracks)if(!bA(r)){var s=e.tracks[r].kind;if(s){var i=e.tracks[r];if(i){var o=e.local?yA(n,r):ar(n,e.session_id,r,s);i.state==="playable"&&(e.tracks[r].track=o),i.persistentTrack=o}}else console.error("unknown type for custom track")}}catch(a){console.error(a)}}function bA(e){return["video","audio","screenVideo","screenAudio"].includes(e)}function Ih(e,t,n){var r=n.getState();if(e.local){if(e.audio)try{e.audioTrack=r.local.streams.cam.stream.getAudioTracks()[0],e.audioTrack||(e.audio=!1)}catch{}if(e.video)try{e.videoTrack=r.local.streams.cam.stream.getVideoTracks()[0],e.videoTrack||(e.video=!1)}catch{}if(e.screen)try{e.screenVideoTrack=r.local.streams.screen.stream.getVideoTracks()[0],e.screenAudioTrack=r.local.streams.screen.stream.getAudioTracks()[0],e.screenVideoTrack||e.screenAudioTrack||(e.screen=!1)}catch{}}else{var s=!0;try{var i=r.participants[e.session_id];i&&i.public&&i.public.rtcType&&i.public.rtcType.impl==="peer-to-peer"&&i.private&&!["connected","completed"].includes(i.private.peeringState)&&(s=!1)}catch(u){console.error(u)}if(!s)return e.audio=!1,e.audioTrack=!1,e.video=!1,e.videoTrack=!1,e.screen=!1,void(e.screenTrack=!1);try{if(r.streams,e.audio&&ri(r,e.session_id,"cam-audio")){var o=ar(r,e.session_id,"cam","audio");o&&(t&&t.audioTrack&&t.audioTrack.id===o.id?e.audioTrack=o:o.muted||(e.audioTrack=o)),e.audioTrack||(e.audio=!1)}if(e.video&&ri(r,e.session_id,"cam-video")){var a=ar(r,e.session_id,"cam","video");a&&(t&&t.videoTrack&&t.videoTrack.id===a.id?e.videoTrack=a:a.muted||(e.videoTrack=a)),e.videoTrack||(e.video=!1)}if(e.screen&&ri(r,e.session_id,"screen-audio")){var c=ar(r,e.session_id,"screen","audio");c&&(t&&t.screenAudioTrack&&t.screenAudioTrack.id===c.id?e.screenAudioTrack=c:c.muted||(e.screenAudioTrack=c))}if(e.screen&&ri(r,e.session_id,"screen-video")){var l=ar(r,e.session_id,"screen","video");l&&(t&&t.screenVideoTrack&&t.screenVideoTrack.id===l.id?e.screenVideoTrack=l:l.muted||(e.screenVideoTrack=l))}e.screenVideoTrack||e.screenAudioTrack||(e.screen=!1)}catch(u){console.error("unexpected error matching up tracks",u)}}}function wA(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(c,l){if(c){if(typeof c=="string")return Nh(c,l);var u={}.toString.call(c).slice(8,-1);return u==="Object"&&c.constructor&&(u=c.constructor.name),u==="Map"||u==="Set"?Array.from(c):u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?Nh(c,l):void 0}}(e))||t){n&&(e=n);var r=0,s=function(){};return{s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(c){throw c},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var c=n.next();return o=c.done,c},e:function(c){a=!0,i=c},f:function(){try{o||n.return==null||n.return()}finally{if(a)throw i}}}}function Nh(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Tt=new Map,pr=null;function xA(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(c,l){if(c){if(typeof c=="string")return Fh(c,l);var u={}.toString.call(c).slice(8,-1);return u==="Object"&&c.constructor&&(u=c.constructor.name),u==="Map"||u==="Set"?Array.from(c):u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?Fh(c,l):void 0}}(e))||t){n&&(e=n);var r=0,s=function(){};return{s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(c){throw c},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var c=n.next();return o=c.done,c},e:function(c){a=!0,i=c},f:function(){try{o||n.return==null||n.return()}finally{if(a)throw i}}}}function Fh(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Mt=new Map,os=null;function SA(e){dy()?function(t){Tt.has(t)||(Tt.set(t,{}),navigator.mediaDevices.enumerateDevices().then(function(n){Tt.has(t)&&(Tt.get(t).lastDevicesString=JSON.stringify(n),pr||(pr=function(){var r=se(function*(){var s,i=yield navigator.mediaDevices.enumerateDevices(),o=wA(Tt.keys());try{for(o.s();!(s=o.n()).done;){var a=s.value,c=JSON.stringify(i);c!==Tt.get(a).lastDevicesString&&(Tt.get(a).lastDevicesString=c,a(i))}}catch(l){o.e(l)}finally{o.f()}});return function(){return r.apply(this,arguments)}}(),navigator.mediaDevices.addEventListener("devicechange",pr)))}).catch(function(){}))}(e):function(t){Mt.has(t)||(Mt.set(t,{}),navigator.mediaDevices.enumerateDevices().then(function(n){Mt.has(t)&&(Mt.get(t).lastDevicesString=JSON.stringify(n),os||(os=setInterval(se(function*(){var r,s=yield navigator.mediaDevices.enumerateDevices(),i=xA(Mt.keys());try{for(i.s();!(r=i.n()).done;){var o=r.value,a=JSON.stringify(s);a!==Mt.get(o).lastDevicesString&&(Mt.get(o).lastDevicesString=a,o(s))}}catch(c){i.e(c)}finally{i.f()}}),3e3)))}))}(e)}function _A(e){dy()?function(t){Tt.has(t)&&(Tt.delete(t),Tt.size===0&&pr&&(navigator.mediaDevices.removeEventListener("devicechange",pr),pr=null))}(e):function(t){Mt.has(t)&&(Mt.delete(t),Mt.size===0&&os&&(clearInterval(os),os=null))}(e)}function dy(){var e;return de()||((e=navigator.mediaDevices)===null||e===void 0?void 0:e.ondevicechange)!==void 0}var kA=new Set;function CA(e,t){return e&&e.readyState==="live"&&!function(n,r){return n.muted&&!kA.has(n.id)}(e)}function Bh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Zt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Bh(Object(n),!0).forEach(function(r){Pt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bh(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var ts=Object.freeze({VIDEO:"video",AUDIO:"audio",SCREEN_VIDEO:"screenVideo",SCREEN_AUDIO:"screenAudio",CUSTOM_VIDEO:"customVideo",CUSTOM_AUDIO:"customAudio"}),EA=Object.freeze({PARTICIPANTS:"participants",STREAMING:"streaming",TRANSCRIPTION:"transcription"}),as=Object.values(ts),$h=["v","a","sv","sa","cv","ca"];Object.freeze(as.reduce(function(e,t,n){return e[t]=$h[n],e},{})),Object.freeze($h.reduce(function(e,t,n){return e[t]=as[n],e},{}));var TA=[ts.VIDEO,ts.AUDIO,ts.SCREEN_VIDEO,ts.SCREEN_AUDIO],Vh=Object.values(EA),Uh=["p","s","t"];Object.freeze(Vh.reduce(function(e,t,n){return e[t]=Uh[n],e},{})),Object.freeze(Uh.reduce(function(e,t,n){return e[t]=Vh[n],e},{}));var MA=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.base,r=t.byUserId,s=t.byParticipantId;rt(this,e),this.base=n,this.byUserId=r,this.byParticipantId=s}return st(e,[{key:"clone",value:function(){var t=new e;if(this.base instanceof Ne?t.base=this.base.clone():t.base=this.base,this.byUserId!==void 0)for(var n in t.byUserId={},this.byUserId){var r=this.byUserId[n];t.byUserId[n]=r instanceof Ne?r.clone():r}if(this.byParticipantId!==void 0)for(var s in t.byParticipantId={},this.byParticipantId){var i=this.byParticipantId[s];t.byParticipantId[s]=i instanceof Ne?i.clone():i}return t}},{key:"toJSONObject",value:function(){var t={};if(typeof this.base=="boolean"?t.base=this.base:this.base instanceof Ne&&(t.base=this.base.toJSONObject()),this.byUserId!==void 0)for(var n in t.byUserId={},this.byUserId){var r=this.byUserId[n];t.byUserId[n]=r instanceof Ne?r.toJSONObject():r}if(this.byParticipantId!==void 0)for(var s in t.byParticipantId={},this.byParticipantId){var i=this.byParticipantId[s];t.byParticipantId[s]=i instanceof Ne?i.toJSONObject():i}return t}},{key:"toMinifiedJSONObject",value:function(){var t={};if(this.base!==void 0&&(typeof this.base=="boolean"?t.b=this.base:t.b=this.base.toMinifiedJSONObject()),this.byUserId!==void 0)for(var n in t.u={},this.byUserId){var r=this.byUserId[n];t.u[n]=typeof r=="boolean"?r:r.toMinifiedJSONObject()}if(this.byParticipantId!==void 0)for(var s in t.p={},this.byParticipantId){var i=this.byParticipantId[s];t.p[s]=typeof i=="boolean"?i:i.toMinifiedJSONObject()}return t}},{key:"normalize",value:function(){return this.base instanceof Ne&&(this.base=this.base.normalize()),this.byUserId&&(this.byUserId=Object.fromEntries(Object.entries(this.byUserId).map(function(t){var n=Ye(t,2),r=n[0],s=n[1];return[r,s instanceof Ne?s.normalize():s]}))),this.byParticipantId&&(this.byParticipantId=Object.fromEntries(Object.entries(this.byParticipantId).map(function(t){var n=Ye(t,2),r=n[0],s=n[1];return[r,s instanceof Ne?s.normalize():s]}))),this}}],[{key:"fromJSONObject",value:function(t){var n,r,s;if(t.base!==void 0&&(n=typeof t.base=="boolean"?t.base:Ne.fromJSONObject(t.base)),t.byUserId!==void 0)for(var i in r={},t.byUserId){var o=t.byUserId[i];r[i]=typeof o=="boolean"?o:Ne.fromJSONObject(o)}if(t.byParticipantId!==void 0)for(var a in s={},t.byParticipantId){var c=t.byParticipantId[a];s[a]=typeof c=="boolean"?c:Ne.fromJSONObject(c)}return new e({base:n,byUserId:r,byParticipantId:s})}},{key:"fromMinifiedJSONObject",value:function(t){var n,r,s;if(t.b!==void 0&&(n=typeof t.b=="boolean"?t.b:Ne.fromMinifiedJSONObject(t.b)),t.u!==void 0)for(var i in r={},t.u){var o=t.u[i];r[i]=typeof o=="boolean"?o:Ne.fromMinifiedJSONObject(o)}if(t.p!==void 0)for(var a in s={},t.p){var c=t.p[a];s[a]=typeof c=="boolean"?c:Ne.fromMinifiedJSONObject(c)}return new e({base:n,byUserId:r,byParticipantId:s})}},{key:"validateJSONObject",value:function(t){if(he(t)!=="object")return[!1,"canReceive must be an object"];for(var n=["base","byUserId","byParticipantId"],r=0,s=Object.keys(t);r<s.length;r++){var i=s[r];if(!n.includes(i))return[!1,"canReceive can only contain keys (".concat(n.join(", "),")")];if(i==="base"){var o=Ye(Ne.validateJSONObject(t.base,!0),2),a=o[0],c=o[1];if(!a)return[!1,c]}else{if(he(t[i])!=="object")return[!1,"invalid (non-object) value for field '".concat(i,"' in canReceive")];for(var l=0,u=Object.values(t[i]);l<u.length;l++){var f=u[l],h=Ye(Ne.validateJSONObject(f),2),p=h[0],g=h[1];if(!p)return[!1,g]}}}return[!0]}}])}(),Ne=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.video,r=t.audio,s=t.screenVideo,i=t.screenAudio,o=t.customVideo,a=t.customAudio;rt(this,e),this.video=n,this.audio=r,this.screenVideo=s,this.screenAudio=i,this.customVideo=o,this.customAudio=a}return st(e,[{key:"clone",value:function(){var t=new e;return this.video!==void 0&&(t.video=this.video),this.audio!==void 0&&(t.audio=this.audio),this.screenVideo!==void 0&&(t.screenVideo=this.screenVideo),this.screenAudio!==void 0&&(t.screenAudio=this.screenAudio),this.customVideo!==void 0&&(t.customVideo=Zt({},this.customVideo)),this.customAudio!==void 0&&(t.customAudio=Zt({},this.customAudio)),t}},{key:"toJSONObject",value:function(){var t={};return this.video!==void 0&&(t.video=this.video),this.audio!==void 0&&(t.audio=this.audio),this.screenVideo!==void 0&&(t.screenVideo=this.screenVideo),this.screenAudio!==void 0&&(t.screenAudio=this.screenAudio),this.customVideo!==void 0&&(t.customVideo=Zt({},this.customVideo)),this.customAudio!==void 0&&(t.customAudio=Zt({},this.customAudio)),t}},{key:"toMinifiedJSONObject",value:function(){var t={};return this.video!==void 0&&(t.v=this.video),this.audio!==void 0&&(t.a=this.audio),this.screenVideo!==void 0&&(t.sv=this.screenVideo),this.screenAudio!==void 0&&(t.sa=this.screenAudio),this.customVideo!==void 0&&(t.cv=Zt({},this.customVideo)),this.customAudio!==void 0&&(t.ca=Zt({},this.customAudio)),t}},{key:"normalize",value:function(){function t(n,r){return n&&Object.keys(n).length===1&&n["*"]===r}return!(this.video!==!0||this.audio!==!0||this.screenVideo!==!0||this.screenAudio!==!0||!t(this.customVideo,!0)||!t(this.customAudio,!0))||(this.video!==!1||this.audio!==!1||this.screenVideo!==!1||this.screenAudio!==!1||!t(this.customVideo,!1)||!t(this.customAudio,!1))&&this}}],[{key:"fromBoolean",value:function(t){return new e({video:t,audio:t,screenVideo:t,screenAudio:t,customVideo:{"*":t},customAudio:{"*":t}})}},{key:"fromJSONObject",value:function(t){return new e({video:t.video,audio:t.audio,screenVideo:t.screenVideo,screenAudio:t.screenAudio,customVideo:t.customVideo!==void 0?Zt({},t.customVideo):void 0,customAudio:t.customAudio!==void 0?Zt({},t.customAudio):void 0})}},{key:"fromMinifiedJSONObject",value:function(t){return new e({video:t.v,audio:t.a,screenVideo:t.sv,screenAudio:t.sa,customVideo:t.cv,customAudio:t.ca})}},{key:"validateJSONObject",value:function(t,n){if(typeof t=="boolean")return[!0];if(he(t)!=="object")return[!1,"invalid (non-object, non-boolean) value in canReceive"];for(var r=Object.keys(t),s=0,i=r;s<i.length;s++){var o=i[s];if(!as.includes(o))return[!1,"invalid media type '".concat(o,"' in canReceive")];if(TA.includes(o)){if(typeof t[o]!="boolean")return[!1,"invalid (non-boolean) value for media type '".concat(o,"' in canReceive")]}else{if(he(t[o])!=="object")return[!1,"invalid (non-object) value for media type '".concat(o,"' in canReceive")];for(var a=0,c=Object.values(t[o]);a<c.length;a++)if(typeof c[a]!="boolean")return[!1,"invalid (non-boolean) value for entry within '".concat(o,"' in canReceive")];if(n&&t[o]["*"]===void 0)return[!1,`canReceive "base" permission must specify "*" as an entry within '`.concat(o,"'")]}}return n&&r.length!==as.length?[!1,'canReceive "base" permission must specify all media types: '.concat(as.join(", ")," (or be set to a boolean shorthand)")]:[!0]}}])}(),PA=["result"],AA=["preserveIframe"];function zh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zh(Object(n),!0).forEach(function(r){Pt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zh(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fy(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fy=function(){return!!e})()}function Wh(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(c,l){if(c){if(typeof c=="string")return qh(c,l);var u={}.toString.call(c).slice(8,-1);return u==="Object"&&c.constructor&&(u=c.constructor.name),u==="Map"||u==="Set"?Array.from(c):u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?qh(c,l):void 0}}(e))||t){n&&(e=n);var r=0,s=function(){};return{s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(c){throw c},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var c=n.next();return o=c.done,c},e:function(c){a=!0,i=c},f:function(){try{o||n.return==null||n.return()}finally{if(a)throw i}}}}function qh(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var kn={},Hh="video",OA="voice",Gh=de()?{data:{}}:{data:{},topology:"none"},Jh={present:0,hidden:0},hy={maxBitrate:{min:1e5,max:25e5},maxFramerate:{min:1,max:30},scaleResolutionDownBy:{min:1,max:8}},la=Object.keys(hy),Kh=["state","volume","simulcastEncodings"],Yh={androidInCallNotification:{title:"string",subtitle:"string",iconName:"string",disableForCustomOverride:"boolean"},disableAutoDeviceManagement:{audio:"boolean",video:"boolean"}},Ui={id:{iconPath:"string",iconPathDarkMode:"string",label:"string",tooltip:"string",visualState:"'default' | 'sidebar-open' | 'active'"}},Ec={id:{allow:"string",controlledBy:"'*' | 'owners' | string[]",csp:"string",iconURL:"string",label:"string",loading:"'eager' | 'lazy'",location:"'main' | 'sidebar'",name:"string",referrerPolicy:"string",sandbox:"string",src:"string",srcdoc:"string",shared:"string[] | 'owners' | boolean"}},Cn={customIntegrations:{validate:xy,help:by()},customTrayButtons:{validate:wy,help:"customTrayButtons should be a dictionary of the type ".concat(JSON.stringify(Ui))},url:{validate:function(e){return typeof e=="string"},help:"url should be a string"},baseUrl:{validate:function(e){return typeof e=="string"},help:"baseUrl should be a string"},token:{validate:function(e){return typeof e=="string"},help:"token should be a string",queryString:"t"},dailyConfig:{validate:function(e,t){try{return t.validateDailyConfig(e),!0}catch(n){console.error("Failed to validate dailyConfig",n)}return!1},help:"Unsupported dailyConfig. Check error logs for detailed info."},reactNativeConfig:{validate:function(e){return Sy(e,Yh)},help:"reactNativeConfig should look like ".concat(JSON.stringify(Yh),", all fields optional")},lang:{validate:function(e){return["da","de","en-us","en","es","fi","fr","it","jp","ka","nl","no","pl","pt","pt-BR","ru","sv","tr","user"].includes(e)},help:"language not supported. Options are: da, de, en-us, en, es, fi, fr, it, jp, ka, nl, no, pl, pt, pt-BR, ru, sv, tr, user"},userName:!0,userData:{validate:function(e){try{return py(e),!0}catch(t){return console.error(t),!1}},help:"invalid userData type provided"},startVideoOff:!0,startAudioOff:!0,allowLocalVideo:!0,allowLocalAudio:!0,activeSpeakerMode:!0,showLeaveButton:!0,showLocalVideo:!0,showParticipantsBar:!0,showFullscreenButton:!0,showUserNameChangeUI:!0,iframeStyle:!0,customLayout:!0,cssFile:!0,cssText:!0,bodyClass:!0,videoSource:{validate:function(e,t){if(typeof e=="boolean")return t._preloadCache.allowLocalVideo=e,!0;var n;if(e instanceof MediaStreamTrack)t._sharedTracks.videoTrack=e,n={customTrack:Vt};else{if(delete t._sharedTracks.videoTrack,typeof e!="string")return console.error("videoSource must be a MediaStreamTrack, boolean, or a string"),!1;n={deviceId:e}}return t._updatePreloadCacheInputSettings({video:{settings:n}},!1),!0}},audioSource:{validate:function(e,t){if(typeof e=="boolean")return t._preloadCache.allowLocalAudio=e,!0;var n;if(e instanceof MediaStreamTrack)t._sharedTracks.audioTrack=e,n={customTrack:Vt};else{if(delete t._sharedTracks.audioTrack,typeof e!="string")return console.error("audioSource must be a MediaStreamTrack, boolean, or a string"),!1;n={deviceId:e}}return t._updatePreloadCacheInputSettings({audio:{settings:n}},!1),!0}},subscribeToTracksAutomatically:{validate:function(e,t){return t._preloadCache.subscribeToTracksAutomatically=e,!0}},theme:{validate:function(e){var t=["accent","accentText","background","backgroundAccent","baseText","border","mainAreaBg","mainAreaBgAccent","mainAreaText","supportiveText"],n=function(r){for(var s=0,i=Object.keys(r);s<i.length;s++){var o=i[s];if(!t.includes(o))return console.error('unsupported color "'.concat(o,'". Valid colors: ').concat(t.join(", "))),!1;if(!r[o].match(/^#[0-9a-f]{6}|#[0-9a-f]{3}$/i))return console.error("".concat(o,' theme color should be provided in valid hex color format. Received: "').concat(r[o],'"')),!1}return!0};return he(e)==="object"&&("light"in e&&"dark"in e||"colors"in e)?"light"in e&&"dark"in e?"colors"in e.light?"colors"in e.dark?n(e.light.colors)&&n(e.dark.colors):(console.error('Dark theme is missing "colors" property.',e),!1):(console.error('Light theme is missing "colors" property.',e),!1):n(e.colors):(console.error('Theme must contain either both "light" and "dark" properties, or "colors".',e),!1)},help:"unsupported theme configuration. Check error logs for detailed info."},layoutConfig:{validate:function(e){if("grid"in e){var t=e.grid;if("maxTilesPerPage"in t){if(!Number.isInteger(t.maxTilesPerPage))return console.error("grid.maxTilesPerPage should be an integer. You passed ".concat(t.maxTilesPerPage,".")),!1;if(t.maxTilesPerPage>49)return console.error("grid.maxTilesPerPage can't be larger than 49 without sacrificing browser performance. Please contact us at https://www.daily.co/contact to talk about your use case."),!1}if("minTilesPerPage"in t){if(!Number.isInteger(t.minTilesPerPage))return console.error("grid.minTilesPerPage should be an integer. You passed ".concat(t.minTilesPerPage,".")),!1;if(t.minTilesPerPage<1)return console.error("grid.minTilesPerPage can't be lower than 1."),!1;if("maxTilesPerPage"in t&&t.minTilesPerPage>t.maxTilesPerPage)return console.error("grid.minTilesPerPage can't be higher than grid.maxTilesPerPage."),!1}}return!0},help:"unsupported layoutConfig. Check error logs for detailed info."},receiveSettings:{validate:function(e){return my(e,{allowAllParticipantsKey:!1})},help:yy({allowAllParticipantsKey:!1})},sendSettings:{validate:function(e,t){return!!function(n,r){try{return r.validateUpdateSendSettings(n),!0}catch(s){return console.error("Failed to validate send settings",s),!1}}(e,t)&&(t._preloadCache.sendSettings=e,!0)},help:"Invalid sendSettings provided. Check error logs for detailed info."},inputSettings:{validate:function(e,t){var n;return!!gy(e)&&(t._inputSettings||(t._inputSettings={}),vy(e,(n=t.properties)===null||n===void 0?void 0:n.dailyConfig,t._sharedTracks),t._updatePreloadCacheInputSettings(e,!0),!0)},help:Tc()},layout:{validate:function(e){return e==="custom-v1"||e==="browser"||e==="none"},help:'layout may only be set to "custom-v1"',queryString:"layout"},emb:{queryString:"emb"},embHref:{queryString:"embHref"},dailyJsVersion:{queryString:"dailyJsVersion"},proxy:{queryString:"proxy"},strictMode:!0,allowMultipleCallInstances:!0},si={styles:{validate:function(e){for(var t in e)if(t!=="cam"&&t!=="screen")return!1;if(e.cam){for(var n in e.cam)if(n!=="div"&&n!=="video")return!1}if(e.screen){for(var r in e.screen)if(r!=="div"&&r!=="video")return!1}return!0},help:"styles format should be a subset of: { cam: {div: {}, video: {}}, screen: {div: {}, video: {}} }"},setSubscribedTracks:{validate:function(e,t){if(t._preloadCache.subscribeToTracksAutomatically)return!1;var n=[!0,!1,"staged"];if(n.includes(e)||!de()&&e==="avatar")return!0;var r=["audio","video","screenAudio","screenVideo","rmpAudio","rmpVideo"],s=function(i){var o=arguments.length>1&&arguments[1]!==void 0&&arguments[1];for(var a in i)if(a==="custom"){if(!n.includes(i[a])&&!s(i[a],!0))return!1}else{var c=!o&&!r.includes(a),l=!n.includes(i[a]);if(c||l)return!1}return!0};return s(e)},help:"setSubscribedTracks cannot be used when setSubscribeToTracksAutomatically is enabled, and should be of the form: "+"true".concat(de()?"":" | 'avatar'"," | false | 'staged' | { [audio: true|false|'staged'], [video: true|false|'staged'], [screenAudio: true|false|'staged'], [screenVideo: true|false|'staged'] }")},setAudio:!0,setVideo:!0,setScreenShare:{validate:function(e){return e===!1},help:"setScreenShare must be false, as it's only meant for stopping remote participants' screen shares"},eject:!0,updatePermissions:{validate:function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var r=Ye(n[t],2),s=r[0],i=r[1];switch(s){case"hasPresence":if(typeof i!="boolean")return!1;break;case"canSend":if(i instanceof Set||i instanceof Array||Array.isArray(i)){var o,a=["video","audio","screenVideo","screenAudio","customVideo","customAudio"],c=Wh(i);try{for(c.s();!(o=c.n()).done;){var l=o.value;if(!a.includes(l))return!1}}catch(w){c.e(w)}finally{c.f()}}else if(typeof i!="boolean")return!1;(i instanceof Array||Array.isArray(i))&&(e.canSend=new Set(i));break;case"canReceive":var u=Ye(MA.validateJSONObject(i),2),f=u[0],h=u[1];if(!f)return console.error(h),!1;break;case"canAdmin":if(i instanceof Set||i instanceof Array||Array.isArray(i)){var p,g=["participants","streaming","transcription"],y=Wh(i);try{for(y.s();!(p=y.n()).done;){var b=p.value;if(!g.includes(b))return!1}}catch(w){y.e(w)}finally{y.f()}}else if(typeof i!="boolean")return!1;(i instanceof Array||Array.isArray(i))&&(e.canAdmin=new Set(i));break;default:return!1}}return!0},help:"updatePermissions can take hasPresence, canSend, canReceive, and canAdmin permissions. hasPresence must be a boolean. canSend can be a boolean or an Array or Set of media types (video, audio, screenVideo, screenAudio, customVideo, customAudio). canReceive must be an object specifying base, byUserId, and/or byParticipantId fields (see documentation for more details). canAdmin can be a boolean or an Array or Set of admin types (participants, streaming, transcription)."}};Promise.any||(Promise.any=function(){var e=se(function*(t){return new Promise(function(n,r){var s=[];t.forEach(function(i){return Promise.resolve(i).then(function(o){n(o)}).catch(function(o){s.push(o),s.length===t.length&&r(s)})})})});return function(t){return e.apply(this,arguments)}}());var Xh=function(){function e(d){var v,m,E,T,D,z,W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(rt(this,e),E=this,T=Ct(T=e),Pt(m=oo(E,fy()?Reflect.construct(T,[],Ct(E).constructor):T.apply(E,D)),"startListeningForDeviceChanges",function(){SA(m.handleDeviceChange)}),Pt(m,"stopListeningForDeviceChanges",function(){_A(m.handleDeviceChange)}),Pt(m,"handleDeviceChange",function(ie){ie=ie.map(function(ae){return JSON.parse(JSON.stringify(ae))}),m.emitDailyJSEvent({action:"available-devices-updated",availableDevices:ie})}),Pt(m,"handleNativeAppStateChange",function(){var ie=se(function*(ae){if(ae==="destroyed")return console.warn("App has been destroyed before leaving the meeting. Cleaning up all the resources!"),void(yield m.destroy());var Et=ae==="active";m.disableReactNativeAutoDeviceManagement("video")||(Et?m.camUnmutedBeforeLosingNativeActiveState&&m.setLocalVideo(!0):(m.camUnmutedBeforeLosingNativeActiveState=m.localVideo(),m.camUnmutedBeforeLosingNativeActiveState&&m.setLocalVideo(!1)))});return function(ae){return ie.apply(this,arguments)}}()),Pt(m,"handleNativeAudioFocusChange",function(ie){m.disableReactNativeAutoDeviceManagement("audio")||(m._hasNativeAudioFocus=ie,m.toggleParticipantAudioBasedOnNativeAudioFocus(),m._hasNativeAudioFocus?m.micUnmutedBeforeLosingNativeAudioFocus&&m.setLocalAudio(!0):(m.micUnmutedBeforeLosingNativeAudioFocus=m.localAudio(),m.setLocalAudio(!1)))}),Pt(m,"handleNativeSystemScreenCaptureStop",function(){m.stopScreenShare()}),m.strictMode=W.strictMode===void 0||W.strictMode,m.allowMultipleCallInstances=(v=W.allowMultipleCallInstances)!==null&&v!==void 0&&v,Object.keys(kn).length&&(m._logDuplicateInstanceAttempt(),!m.allowMultipleCallInstances)){if(m.strictMode)throw new Error("Duplicate DailyIframe instances are not allowed");console.warn("Using strictMode: false to allow multiple call instances is now deprecated. Set `allowMultipleCallInstances: true`")}if(window._daily||(window._daily={pendings:[],instances:{}}),m.callClientId=co(),kn[(z=m).callClientId]=z,window._daily.instances[m.callClientId]={},m._sharedTracks={},window._daily.instances[m.callClientId].tracks=m._sharedTracks,W.dailyJsVersion=e.version(),m._iframe=d,m._callObjectMode=W.layout==="none"&&!m._iframe,m._preloadCache={subscribeToTracksAutomatically:!0,outputDeviceId:null,inputSettings:null,sendSettings:null,videoTrackForNetworkConnectivityTest:null,videoTrackForConnectionQualityTest:null},W.showLocalVideo!==void 0?m._callObjectMode?console.error("showLocalVideo is not available in call object mode"):m._showLocalVideo=!!W.showLocalVideo:m._showLocalVideo=!0,W.showParticipantsBar!==void 0?m._callObjectMode?console.error("showParticipantsBar is not available in call object mode"):m._showParticipantsBar=!!W.showParticipantsBar:m._showParticipantsBar=!0,W.customIntegrations!==void 0?m._callObjectMode?console.error("customIntegrations is not available in call object mode"):m._customIntegrations=W.customIntegrations:m._customIntegrations={},W.customTrayButtons!==void 0?m._callObjectMode?console.error("customTrayButtons is not available in call object mode"):m._customTrayButtons=W.customTrayButtons:m._customTrayButtons={},W.activeSpeakerMode!==void 0?m._callObjectMode?console.error("activeSpeakerMode is not available in call object mode"):m._activeSpeakerMode=!!W.activeSpeakerMode:m._activeSpeakerMode=!1,W.receiveSettings?m._callObjectMode?m._receiveSettings=W.receiveSettings:console.error("receiveSettings is only available in call object mode"):m._receiveSettings={},m.validateProperties(W),m.properties=Z({},W),m._inputSettings||(m._inputSettings={}),m._callObjectLoader=m._callObjectMode?new dA(m.callClientId):null,m._callState=fh,m._isPreparingToJoin=!1,m._accessState={access:ra},m._meetingSessionSummary={},m._finalSummaryOfPrevSession={},m._meetingSessionState=fa(Gh,m._callObjectMode),m._nativeInCallAudioMode=Hh,m._participants={},m._isScreenSharing=!1,m._participantCounts=Jh,m._rmpPlayerState={},m._waitingParticipants={},m._network={threshold:"good",quality:100,networkState:"unknown",stats:{}},m._activeSpeaker={},m._localAudioLevel=0,m._isLocalAudioLevelObserverRunning=!1,m._remoteParticipantsAudioLevel={},m._isRemoteParticipantsAudioLevelObserverRunning=!1,m._maxAppMessageSize=sa,m._messageChannel=de()?new lA:new cA,m._iframe&&(m._iframe.requestFullscreen?m._iframe.addEventListener("fullscreenchange",function(){document.fullscreenElement===m._iframe?(m.emitDailyJSEvent({action:ei}),m.sendMessageToCallMachine({action:ei})):(m.emitDailyJSEvent({action:ti}),m.sendMessageToCallMachine({action:ti}))}):m._iframe.webkitRequestFullscreen&&m._iframe.addEventListener("webkitfullscreenchange",function(){document.webkitFullscreenElement===m._iframe?(m.emitDailyJSEvent({action:ei}),m.sendMessageToCallMachine({action:ei})):(m.emitDailyJSEvent({action:ti}),m.sendMessageToCallMachine({action:ti}))})),de()){var J=m.nativeUtils();J.addAudioFocusChangeListener&&J.removeAudioFocusChangeListener&&J.addAppStateChangeListener&&J.removeAppStateChangeListener&&J.addSystemScreenCaptureStopListener&&J.removeSystemScreenCaptureStopListener||console.warn("expected (add|remove)(AudioFocusChange|AppActiveStateChange|SystemScreenCaptureStop)Listener to be available in React Native"),m._hasNativeAudioFocus=!0,J.addAudioFocusChangeListener(m.handleNativeAudioFocusChange),J.addAppStateChangeListener(m.handleNativeAppStateChange),J.addSystemScreenCaptureStopListener(m.handleNativeSystemScreenCaptureStop)}return m._callObjectMode&&m.startListeningForDeviceChanges(),m._messageChannel.addListenerForMessagesFromCallMachine(m.handleMessageFromCallMachine,m.callClientId,m),m}return ao(e,Hs),st(e,[{key:"destroy",value:(fe=se(function*(){var d;try{yield this.leave()}catch{}var v=this._iframe;if(v){var m=v.parentElement;m&&m.removeChild(v)}if(this._messageChannel.removeListener(this.handleMessageFromCallMachine),de()){var E=this.nativeUtils();E.removeAudioFocusChangeListener(this.handleNativeAudioFocusChange),E.removeAppStateChangeListener(this.handleNativeAppStateChange),E.removeSystemScreenCaptureStopListener(this.handleNativeSystemScreenCaptureStop)}this._callObjectMode&&this.stopListeningForDeviceChanges(),this.resetMeetingDependentVars(),this._destroyed=!0,this.emitDailyJSEvent({action:"call-instance-destroyed"}),delete kn[this.callClientId],!((d=window)===null||d===void 0||(d=d._daily)===null||d===void 0)&&d.instances&&delete window._daily.instances[this.callClientId],this.strictMode&&(this.callClientId=void 0)}),function(){return fe.apply(this,arguments)})},{key:"isDestroyed",value:function(){return!!this._destroyed}},{key:"loadCss",value:function(d){var v=d.bodyClass,m=d.cssFile,E=d.cssText;return le(),this.sendMessageToCallMachine({action:"load-css",cssFile:this.absoluteUrl(m),bodyClass:v,cssText:E}),this}},{key:"iframe",value:function(){return le(),this._iframe}},{key:"meetingState",value:function(){return this._callState}},{key:"accessState",value:function(){return ht(this._callObjectMode,"accessState()"),this._accessState}},{key:"participants",value:function(){return this._participants}},{key:"participantCounts",value:function(){return this._participantCounts}},{key:"waitingParticipants",value:function(){return ht(this._callObjectMode,"waitingParticipants()"),this._waitingParticipants}},{key:"validateParticipantProperties",value:function(d,v){for(var m in v){if(!si[m])throw new Error("unrecognized updateParticipant property ".concat(m));if(si[m].validate&&!si[m].validate(v[m],this,this._participants[d]))throw new Error(si[m].help)}}},{key:"updateParticipant",value:function(d,v){return this._participants.local&&this._participants.local.session_id===d&&(d="local"),d&&v&&(this.validateParticipantProperties(d,v),this.sendMessageToCallMachine({action:"update-participant",id:d,properties:v})),this}},{key:"updateParticipants",value:function(d){var v=this._participants.local&&this._participants.local.session_id;for(var m in d)m===v&&(m="local"),m&&d[m]&&this.validateParticipantProperties(m,d[m]);return this.sendMessageToCallMachine({action:"update-participants",participants:d}),this}},{key:"updateWaitingParticipant",value:(te=se(function*(){var d=this,v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ht(this._callObjectMode,"updateWaitingParticipant()"),we(this._callState,"updateWaitingParticipant()"),typeof v!="string"||he(m)!=="object")throw new Error("updateWaitingParticipant() must take an id string and a updates object");return new Promise(function(E,T){d.sendMessageToCallMachine({action:"daily-method-update-waiting-participant",id:v,updates:m},function(D){D.error&&T(D.error),D.id||T(new Error("unknown error in updateWaitingParticipant()")),E({id:D.id})})})}),function(){return te.apply(this,arguments)})},{key:"updateWaitingParticipants",value:(F=se(function*(){var d=this,v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(ht(this._callObjectMode,"updateWaitingParticipants()"),we(this._callState,"updateWaitingParticipants()"),he(v)!=="object")throw new Error("updateWaitingParticipants() must take a mapping between ids and update objects");return new Promise(function(m,E){d.sendMessageToCallMachine({action:"daily-method-update-waiting-participants",updatesById:v},function(T){T.error&&E(T.error),T.ids||E(new Error("unknown error in updateWaitingParticipants()")),m({ids:T.ids})})})}),function(){return F.apply(this,arguments)})},{key:"requestAccess",value:(ne=se(function*(){var d=this,v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},m=v.access,E=m===void 0?{level:iP}:m,T=v.name,D=T===void 0?"":T;return ht(this._callObjectMode,"requestAccess()"),we(this._callState,"requestAccess()"),new Promise(function(z,W){d.sendMessageToCallMachine({action:"daily-method-request-access",access:E,name:D},function(J){J.error&&W(J.error),J.access||W(new Error("unknown error in requestAccess()")),z({access:J.access,granted:J.granted})})})}),function(){return ne.apply(this,arguments)})},{key:"localAudio",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.audio.state):null}},{key:"localVideo",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.video.state):null}},{key:"setLocalAudio",value:function(d){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return"forceDiscardTrack"in v&&(de()?(console.warn("forceDiscardTrack option not supported in React Native; ignoring"),v={}):d&&(console.warn("forceDiscardTrack option only supported when calling setLocalAudio(false); ignoring"),v={})),this.sendMessageToCallMachine({action:"local-audio",state:d,options:v}),this}},{key:"localScreenAudio",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.screenAudio.state):null}},{key:"localScreenVideo",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.screenVideo.state):null}},{key:"updateScreenShare",value:function(d){if(this._isScreenSharing)return this.sendMessageToCallMachine({action:"local-screen-update",options:d}),this;console.warn("There is no screen share in progress. Try calling startScreenShare first.")}},{key:"setLocalVideo",value:function(d){return this.sendMessageToCallMachine({action:"local-video",state:d}),this}},{key:"_setAllowLocalAudio",value:function(d){if(this._preloadCache.allowLocalAudio=d,this._callMachineInitialized)return this.sendMessageToCallMachine({action:"set-allow-local-audio",state:d}),this}},{key:"_setAllowLocalVideo",value:function(d){if(this._preloadCache.allowLocalVideo=d,this._callMachineInitialized)return this.sendMessageToCallMachine({action:"set-allow-local-video",state:d}),this}},{key:"getReceiveSettings",value:(I=se(function*(d){var v=this,m=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).showInheritedValues,E=m!==void 0&&m;if(ht(this._callObjectMode,"getReceiveSettings()"),!this._callMachineInitialized)return this._receiveSettings;switch(he(d)){case"string":return new Promise(function(T){v.sendMessageToCallMachine({action:"get-single-participant-receive-settings",id:d,showInheritedValues:E},function(D){T(D.receiveSettings)})});case"undefined":return this._receiveSettings;default:throw new Error('first argument to getReceiveSettings() must be a participant id (or "base"), or there should be no arguments')}}),function(d){return I.apply(this,arguments)})},{key:"updateReceiveSettings",value:(q=se(function*(d){var v=this;if(ht(this._callObjectMode,"updateReceiveSettings()"),!my(d,{allowAllParticipantsKey:!0}))throw new Error(yy({allowAllParticipantsKey:!0}));return we(this._callState,"updateReceiveSettings()","To specify receive settings earlier, use the receiveSettings config property."),new Promise(function(m){v.sendMessageToCallMachine({action:"update-receive-settings",receiveSettings:d},function(E){m({receiveSettings:E.receiveSettings})})})}),function(d){return q.apply(this,arguments)})},{key:"_prepInputSettingsForSharing",value:function(d,v){if(d){var m={};if(d.audio){var E,T,D;d.audio.settings&&(!Object.keys(d.audio.settings).length&&v||(m.audio={settings:Z({},d.audio.settings)})),v&&(E=m.audio)!==null&&E!==void 0&&(E=E.settings)!==null&&E!==void 0&&E.customTrack&&(m.audio.settings={customTrack:this._sharedTracks.audioTrack});var z=((T=d.audio.processor)===null||T===void 0?void 0:T.type)==="none"&&((D=d.audio.processor)===null||D===void 0?void 0:D._isDefaultWhenNone);if(d.audio.processor&&!z){var W=Z({},d.audio.processor);delete W._isDefaultWhenNone,m.audio=Z(Z({},m.audio),{},{processor:W})}}if(d.video){var J,ie,ae;d.video.settings&&(!Object.keys(d.video.settings).length&&v||(m.video={settings:Z({},d.video.settings)})),v&&(J=m.video)!==null&&J!==void 0&&(J=J.settings)!==null&&J!==void 0&&J.customTrack&&(m.video.settings={customTrack:this._sharedTracks.videoTrack});var Et=((ie=d.video.processor)===null||ie===void 0?void 0:ie.type)==="none"&&((ae=d.video.processor)===null||ae===void 0?void 0:ae._isDefaultWhenNone);if(d.video.processor&&!Et){var yn=Z({},d.video.processor);delete yn._isDefaultWhenNone,m.video=Z(Z({},m.video),{},{processor:yn})}}return m}}},{key:"getInputSettings",value:function(){var d=this;return le(),new Promise(function(v){v(d._getInputSettings())})}},{key:"_getInputSettings",value:function(){var d,v,m,E,T,D,z={processor:{type:"none",_isDefaultWhenNone:!0}};this._inputSettings?(d=((m=this._inputSettings)===null||m===void 0?void 0:m.video)||z,v=((E=this._inputSettings)===null||E===void 0?void 0:E.audio)||z):(d=((T=this._preloadCache)===null||T===void 0||(T=T.inputSettings)===null||T===void 0?void 0:T.video)||z,v=((D=this._preloadCache)===null||D===void 0||(D=D.inputSettings)===null||D===void 0?void 0:D.audio)||z);var W={audio:v,video:d};return this._prepInputSettingsForSharing(W,!0)}},{key:"_updatePreloadCacheInputSettings",value:function(d,v){var m=this._inputSettings||{},E={};if(d.video){var T,D,z;E.video={},d.video.settings?(E.video.settings={},v||d.video.settings.customTrack||(z=m.video)===null||z===void 0||!z.settings?E.video.settings=d.video.settings:E.video.settings=Z(Z({},m.video.settings),d.video.settings),Object.keys(E.video.settings).length||delete E.video.settings):(T=m.video)!==null&&T!==void 0&&T.settings&&(E.video.settings=m.video.settings),d.video.processor?E.video.processor=d.video.processor:(D=m.video)!==null&&D!==void 0&&D.processor&&(E.video.processor=m.video.processor)}else m.video&&(E.video=m.video);if(d.audio){var W,J,ie;E.audio={},d.audio.settings?(E.audio.settings={},v||d.audio.settings.customTrack||(ie=m.audio)===null||ie===void 0||!ie.settings?E.audio.settings=d.audio.settings:E.audio.settings=Z(Z({},m.audio.settings),d.audio.settings),Object.keys(E.audio.settings).length||delete E.audio.settings):(W=m.audio)!==null&&W!==void 0&&W.settings&&(E.audio.settings=m.audio.settings),d.audio.processor?E.audio.processor=d.audio.processor:(J=m.audio)!==null&&J!==void 0&&J.processor&&(E.audio.processor=m.audio.processor)}else m.audio&&(E.audio=m.audio);this._maybeUpdateInputSettings(E)}},{key:"_devicesFromInputSettings",value:function(d){var v,m,E=(d==null||(v=d.video)===null||v===void 0||(v=v.settings)===null||v===void 0?void 0:v.deviceId)||null,T=(d==null||(m=d.audio)===null||m===void 0||(m=m.settings)===null||m===void 0?void 0:m.deviceId)||null,D=this._preloadCache.outputDeviceId||null;return{camera:E?{deviceId:E}:{},mic:T?{deviceId:T}:{},speaker:D?{deviceId:D}:{}}}},{key:"updateInputSettings",value:(X=se(function*(d){var v=this;return le(),gy(d)?d.video||d.audio?(vy(d,this.properties.dailyConfig,this._sharedTracks),this._callObjectMode&&!this._callMachineInitialized?(this._updatePreloadCacheInputSettings(d,!0),this._getInputSettings()):new Promise(function(m,E){v.sendMessageToCallMachine({action:"update-input-settings",inputSettings:d},function(T){if(T.error)E(T.error);else{if(T.returnPreloadCache)return v._updatePreloadCacheInputSettings(d,!0),void m(v._getInputSettings());v._maybeUpdateInputSettings(T.inputSettings),m(v._prepInputSettingsForSharing(T.inputSettings,!0))}})})):this._getInputSettings():(console.error(Tc()),Promise.reject(Tc()))}),function(d){return X.apply(this,arguments)})},{key:"setBandwidth",value:function(d){var v=d.kbs,m=d.trackConstraints;if(le(),this._callMachineInitialized)return this.sendMessageToCallMachine({action:"set-bandwidth",kbs:v,trackConstraints:m}),this}},{key:"getDailyLang",value:function(){var d=this;if(le(),this._callMachineInitialized)return new Promise(function(v){d.sendMessageToCallMachine({action:"get-daily-lang"},function(m){delete m.action,delete m.callbackStamp,v(m)})})}},{key:"setDailyLang",value:function(d){return le(),this.sendMessageToCallMachine({action:"set-daily-lang",lang:d}),this}},{key:"setProxyUrl",value:function(d){return this.sendMessageToCallMachine({action:"set-proxy-url",proxyUrl:d}),this}},{key:"setIceConfig",value:function(d){return this.sendMessageToCallMachine({action:"set-ice-config",iceConfig:d}),this}},{key:"meetingSessionSummary",value:function(){return[_n,Qt].includes(this._callState)?this._finalSummaryOfPrevSession:this._meetingSessionSummary}},{key:"getMeetingSession",value:(G=se(function*(){var d=this;return console.warn("getMeetingSession() is deprecated: use meetingSessionSummary(), which will return immediately"),we(this._callState,"getMeetingSession()"),new Promise(function(v){d.sendMessageToCallMachine({action:"get-meeting-session"},function(m){delete m.action,delete m.callbackStamp,v(m)})})}),function(){return G.apply(this,arguments)})},{key:"meetingSessionState",value:function(){return we(this._callState,"meetingSessionState"),this._meetingSessionState}},{key:"setMeetingSessionData",value:function(d){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"replace";ht(this._callObjectMode,"setMeetingSessionData()"),we(this._callState,"setMeetingSessionData");try{(function(m,E){new uA({data:m,mergeStrategy:E})})(d,v)}catch(m){throw console.error(m),m}try{this.sendMessageToCallMachine({action:"set-session-data",data:d,mergeStrategy:v})}catch(m){throw new Error("Error setting meeting session data: ".concat(m))}}},{key:"setUserName",value:function(d,v){var m=this;return this.properties.userName=d,new Promise(function(E){m.sendMessageToCallMachine({action:"set-user-name",name:d??"",thisMeetingOnly:de()||!!v&&!!v.thisMeetingOnly},function(T){delete T.action,delete T.callbackStamp,E(T)})})}},{key:"setUserData",value:(V=se(function*(d){var v=this;try{py(d)}catch(m){throw console.error(m),m}if(this.properties.userData=d,this._callMachineInitialized)return new Promise(function(m){try{v.sendMessageToCallMachine({action:"set-user-data",userData:d},function(E){delete E.action,delete E.callbackStamp,m(E)})}catch(E){throw new Error("Error setting user data: ".concat(E))}})}),function(d){return V.apply(this,arguments)})},{key:"validateAudioLevelInterval",value:function(d){if(d&&(d<100||typeof d!="number"))throw new Error("The interval must be a number greater than or equal to 100 milliseconds.")}},{key:"startLocalAudioLevelObserver",value:function(d){var v=this;if(typeof AudioWorkletNode>"u"&&!de())throw new Error("startLocalAudioLevelObserver() is not supported on this browser");if(this.validateAudioLevelInterval(d),this._callMachineInitialized)return this._isLocalAudioLevelObserverRunning=!0,new Promise(function(m,E){v.sendMessageToCallMachine({action:"start-local-audio-level-observer",interval:d},function(T){v._isLocalAudioLevelObserverRunning=!T.error,T.error?E({error:T.error}):m()})});this._preloadCache.localAudioLevelObserver={enabled:!0,interval:d}}},{key:"isLocalAudioLevelObserverRunning",value:function(){return this._isLocalAudioLevelObserverRunning}},{key:"stopLocalAudioLevelObserver",value:function(){this._preloadCache.localAudioLevelObserver=null,this._localAudioLevel=0,this._isLocalAudioLevelObserverRunning=!1,this.sendMessageToCallMachine({action:"stop-local-audio-level-observer"})}},{key:"startRemoteParticipantsAudioLevelObserver",value:function(d){var v=this;if(this.validateAudioLevelInterval(d),this._callMachineInitialized)return this._isRemoteParticipantsAudioLevelObserverRunning=!0,new Promise(function(m,E){v.sendMessageToCallMachine({action:"start-remote-participants-audio-level-observer",interval:d},function(T){v._isRemoteParticipantsAudioLevelObserverRunning=!T.error,T.error?E({error:T.error}):m()})});this._preloadCache.remoteParticipantsAudioLevelObserver={enabled:!0,interval:d}}},{key:"isRemoteParticipantsAudioLevelObserverRunning",value:function(){return this._isRemoteParticipantsAudioLevelObserverRunning}},{key:"stopRemoteParticipantsAudioLevelObserver",value:function(){this._preloadCache.remoteParticipantsAudioLevelObserver=null,this._remoteParticipantsAudioLevel={},this._isRemoteParticipantsAudioLevelObserverRunning=!1,this.sendMessageToCallMachine({action:"stop-remote-participants-audio-level-observer"})}},{key:"startCamera",value:(H=se(function*(){var d=this,v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(ht(this._callObjectMode,"startCamera()"),ua(this._callState,this._isPreparingToJoin,"startCamera()","Did you mean to use setLocalAudio() and/or setLocalVideo() instead?"),this.needsLoad())try{yield this.load(v)}catch(m){return Promise.reject(m)}else{if(this._didPreAuth){if(v.url&&v.url!==this.properties.url)return console.error("url in startCamera() is different than the one used in preAuth()"),Promise.reject();if(v.token&&v.token!==this.properties.token)return console.error("token in startCamera() is different than the one used in preAuth()"),Promise.reject()}this.validateProperties(v),this.properties=Z(Z({},this.properties),v)}return new Promise(function(m){d._preloadCache.inputSettings=d._prepInputSettingsForSharing(d._inputSettings,!1),d.sendMessageToCallMachine({action:"start-camera",properties:Yn(d.properties,d.callClientId),preloadCache:Yn(d._preloadCache,d.callClientId)},function(E){m({camera:E.camera,mic:E.mic,speaker:E.speaker})})})}),function(){return H.apply(this,arguments)})},{key:"validateCustomTrack",value:function(d,v,m){if(m&&m.length>50)throw new Error("Custom track `trackName` must not be more than 50 characters");if(v&&v!=="music"&&v!=="speech"&&!(v instanceof Object))throw new Error("Custom track `mode` must be either `music` | `speech` | `DailyMicAudioModeSettings` or `undefined`");if(m&&["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo","customVideoDefaults"].includes(m))throw new Error("Custom track `trackName` must not match a track name already used by daily: cam-audio, cam-video, customVideoDefaults, screen-video, screen-audio, rmpAudio, rmpVideo");if(!(d instanceof MediaStreamTrack))throw new Error("Custom tracks provided must be instances of MediaStreamTrack")}},{key:"startCustomTrack",value:function(){var d=this,v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{track,mode,trackName};return le(),we(this._callState,"startCustomTrack()"),this.validateCustomTrack(v.track,v.mode,v.trackName),new Promise(function(m,E){d._sharedTracks.customTrack=v.track,v.track=Vt,d.sendMessageToCallMachine({action:"start-custom-track",properties:v},function(T){T.error?E({error:T.error}):m(T.mediaTag)})})}},{key:"stopCustomTrack",value:function(d){var v=this;return le(),we(this._callState,"stopCustomTrack()"),new Promise(function(m){v.sendMessageToCallMachine({action:"stop-custom-track",mediaTag:d},function(E){m(E.mediaTag)})})}},{key:"setCamera",value:function(d){var v=this;return Yr(),ii(this._callMachineInitialized,"setCamera()"),new Promise(function(m){v.sendMessageToCallMachine({action:"set-camera",cameraDeviceId:d},function(E){m({device:E.device})})})}},{key:"setAudioDevice",value:(U=se(function*(d){return Yr(),this.nativeUtils().setAudioDevice(d),{deviceId:yield this.nativeUtils().getAudioDevice()}}),function(d){return U.apply(this,arguments)})},{key:"cycleCamera",value:function(){var d=this,v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(m){d.sendMessageToCallMachine({action:"cycle-camera",properties:v},function(E){m({device:E.device})})})}},{key:"cycleMic",value:function(){var d=this;return le(),new Promise(function(v){d.sendMessageToCallMachine({action:"cycle-mic"},function(m){v({device:m.device})})})}},{key:"getCameraFacingMode",value:function(){var d=this;return Yr(),new Promise(function(v){d.sendMessageToCallMachine({action:"get-camera-facing-mode"},function(m){v(m.facingMode)})})}},{key:"setInputDevicesAsync",value:(N=se(function*(d){var v=this,m=d.audioDeviceId,E=d.videoDeviceId,T=d.audioSource,D=d.videoSource;if(le(),T!==void 0&&(m=T),D!==void 0&&(E=D),typeof m=="boolean"&&(this._setAllowLocalAudio(m),m=void 0),typeof E=="boolean"&&(this._setAllowLocalVideo(E),E=void 0),!m&&!E)return yield this.getInputDevices();var z={};return m&&(m instanceof MediaStreamTrack?(this._sharedTracks.audioTrack=m,m=Vt,z.audio={settings:{customTrack:m}}):(delete this._sharedTracks.audioTrack,z.audio={settings:{deviceId:m}})),E&&(E instanceof MediaStreamTrack?(this._sharedTracks.videoTrack=E,E=Vt,z.video={settings:{customTrack:E}}):(delete this._sharedTracks.videoTrack,z.video={settings:{deviceId:E}})),this._callObjectMode&&this.needsLoad()?(this._updatePreloadCacheInputSettings(z,!1),this._devicesFromInputSettings(this._inputSettings)):new Promise(function(W){v.sendMessageToCallMachine({action:"set-input-devices",audioDeviceId:m,videoDeviceId:E},function(J){if(delete J.action,delete J.callbackStamp,J.returnPreloadCache)return v._updatePreloadCacheInputSettings(z,!1),void W(v._devicesFromInputSettings(v._inputSettings));W(J)})})}),function(d){return N.apply(this,arguments)})},{key:"setOutputDeviceAsync",value:(j=se(function*(d){var v=this,m=d.outputDeviceId;return le(),m&&(this._preloadCache.outputDeviceId=m),this._callObjectMode&&this.needsLoad()?this._devicesFromInputSettings(this._inputSettings):new Promise(function(E){v.sendMessageToCallMachine({action:"set-output-device",outputDeviceId:m},function(T){delete T.action,delete T.callbackStamp,T.returnPreloadCache?E(v._devicesFromInputSettings(v._inputSettings)):E(T)})})}),function(d){return j.apply(this,arguments)})},{key:"getInputDevices",value:(L=se(function*(){var d=this;return this._callObjectMode&&this.needsLoad()?this._devicesFromInputSettings(this._inputSettings):new Promise(function(v){d.sendMessageToCallMachine({action:"get-input-devices"},function(m){m.returnPreloadCache?v(d._devicesFromInputSettings(d._inputSettings)):v({camera:m.camera,mic:m.mic,speaker:m.speaker})})})}),function(){return L.apply(this,arguments)})},{key:"nativeInCallAudioMode",value:function(){return Yr(),this._nativeInCallAudioMode}},{key:"setNativeInCallAudioMode",value:function(d){if(Yr(),[Hh,OA].includes(d)){if(d!==this._nativeInCallAudioMode)return this._nativeInCallAudioMode=d,!this.disableReactNativeAutoDeviceManagement("audio")&&wi(this._callState,this._isPreparingToJoin)&&this.nativeUtils().setAudioMode(this._nativeInCallAudioMode),this}else console.error("invalid in-call audio mode specified: ",d)}},{key:"preAuth",value:(P=se(function*(){var d=this,v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(ht(this._callObjectMode,"preAuth()"),ua(this._callState,this._isPreparingToJoin,"preAuth()"),this.needsLoad()&&(yield this.load(v)),!v.url)throw new Error("preAuth() requires at least a url to be provided");return this.validateProperties(v),this.properties=Z(Z({},this.properties),v),new Promise(function(m,E){d._preloadCache.inputSettings=d._prepInputSettingsForSharing(d._inputSettings,!1),d.sendMessageToCallMachine({action:"daily-method-preauth",properties:Yn(d.properties,d.callClientId),preloadCache:Yn(d._preloadCache,d.callClientId)},function(T){return T.error?E(T.error):T.access?(d._didPreAuth=!0,void m({access:T.access})):E(new Error("unknown error in preAuth()"))})})}),function(){return P.apply(this,arguments)})},{key:"load",value:(k=se(function*(d){var v=this;if(this.needsLoad()){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw new Error("Use after destroy");if(d&&(this.validateProperties(d),this.properties=Z(Z({},this.properties),d)),!this._callObjectMode&&!this.properties.url)throw new Error("can't load iframe meeting because url property isn't set");return this._updateCallState(hh),this.emitDailyJSEvent({action:fP}),this._callObjectMode?new Promise(function(m,E){v._callObjectLoader.cancel();var T=Date.now();v._callObjectLoader.load(v.properties.dailyConfig,function(D){v._bundleLoadTime=D?"no-op":Date.now()-T,v._updateCallState(ph),D&&v.emitDailyJSEvent({action:gh}),m()},function(D,z){if(v.emitDailyJSEvent({action:hP}),!z){v._updateCallState(Qt),v.resetMeetingDependentVars();var W={action:xh,errorMsg:D.msg,error:{type:"connection-error",msg:"Failed to load call object bundle.",details:{on:"load",sourceError:D,bundleUrl:ji(v.properties.dailyConfig)}}};v._maybeSendToSentry(W),v.emitDailyJSEvent(W),E(D.msg)}})}):(this._iframe.src=Nv(this.assembleMeetingUrl(),this.properties.dailyConfig),new Promise(function(m,E){v._loadedCallback=function(T){v._callState!==Qt?(v._updateCallState(ph),(v.properties.cssFile||v.properties.cssText)&&v.loadCss(v.properties),m()):E(T)}}))}}),function(d){return k.apply(this,arguments)})},{key:"join",value:(O=se(function*(){var d=this,v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._testCallInProgress&&this.stopTestCallQuality();var m=!1;if(this.needsLoad()){this.updateIsPreparingToJoin(!0);try{yield this.load(v)}catch(E){return this.updateIsPreparingToJoin(!1),Promise.reject(E)}}else{if(m=!(!this.properties.cssFile&&!this.properties.cssText),this._didPreAuth){if(v.url&&v.url!==this.properties.url)return console.error("url in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),Promise.reject();if(v.token&&v.token!==this.properties.token)return console.error("token in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),Promise.reject()}if(v.url&&!this._callObjectMode&&v.url&&v.url!==this.properties.url)return console.error("url in join() is different than the one used in load() (".concat(this.properties.url," -> ").concat(v.url,")")),this.updateIsPreparingToJoin(!1),Promise.reject();this.validateProperties(v),this.properties=Z(Z({},this.properties),v)}return v.showLocalVideo!==void 0&&(this._callObjectMode?console.error("showLocalVideo is not available in callObject mode"):this._showLocalVideo=!!v.showLocalVideo),v.showParticipantsBar!==void 0&&(this._callObjectMode?console.error("showParticipantsBar is not available in callObject mode"):this._showParticipantsBar=!!v.showParticipantsBar),this._callState===An||this._callState===xc?(console.warn("already joined meeting, call leave() before joining again"),void this.updateIsPreparingToJoin(!1)):(this._updateCallState(xc,!1),this.emitDailyJSEvent({action:gP}),this._preloadCache.inputSettings=this._prepInputSettingsForSharing(this._inputSettings||{},!1),this.sendMessageToCallMachine({action:"join-meeting",properties:Yn(this.properties,this.callClientId),preloadCache:Yn(this._preloadCache,this.callClientId)}),new Promise(function(E,T){d._joinedCallback=function(D,z){if(d._callState!==Qt){if(d._updateCallState(An),D)for(var W in D){if(d._callObjectMode){var J=d._callMachine().store;jh(D[W],J),Dh(D[W],J),Ih(D[W],d._participants[W],J)}d._participants[W]=Z({},D[W]),d.toggleParticipantAudioBasedOnNativeAudioFocus()}m&&d.loadCss(d.properties),E(D)}else T(z)}}))}),function(){return O.apply(this,arguments)})},{key:"leave",value:(_=se(function*(){var d=this;return this._testCallInProgress&&this.stopTestCallQuality(),new Promise(function(v){d._callState===_n||d._callState===Qt?v():d._callObjectLoader&&!d._callObjectLoader.loaded?(d._callObjectLoader.cancel(),d._updateCallState(_n),d.resetMeetingDependentVars(),d.emitDailyJSEvent({action:_n}),v()):(d._resolveLeave=v,d.sendMessageToCallMachine({action:"leave-meeting"}))})}),function(){return _.apply(this,arguments)})},{key:"startScreenShare",value:(S=se(function*(){var d=this,v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(ii(this._callMachineInitialized,"startScreenShare()"),v.screenVideoSendSettings&&this._validateVideoSendSettings("screenVideo",v.screenVideoSendSettings),v.mediaStream&&(this._sharedTracks.screenMediaStream=v.mediaStream,v.mediaStream=Vt),typeof DailyNativeUtils<"u"&&DailyNativeUtils.isIOS!==void 0&&DailyNativeUtils.isIOS){var m=this.nativeUtils();if(yield m.isScreenBeingCaptured())return void this.emitDailyJSEvent({action:wh,type:"screen-share-error",errorMsg:"Could not start the screen sharing. The screen is already been captured!"});m.setSystemScreenCaptureStartCallback(function(){m.setSystemScreenCaptureStartCallback(null),d.sendMessageToCallMachine({action:_h,captureOptions:v})}),m.presentSystemScreenCapturePrompt()}else this.sendMessageToCallMachine({action:_h,captureOptions:v})}),function(){return S.apply(this,arguments)})},{key:"stopScreenShare",value:function(){ii(this._callMachineInitialized,"stopScreenShare()"),this.sendMessageToCallMachine({action:"local-screen-stop"})}},{key:"startRecording",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v=d.type;if(v&&v!=="cloud"&&v!=="raw-tracks"&&v!=="local")throw new Error("invalid type: ".concat(v,", allowed values 'cloud', 'raw-tracks', or 'local'"));this.sendMessageToCallMachine(Z({action:"local-recording-start"},d))}},{key:"updateRecording",value:function(d){var v=d.layout,m=v===void 0?{preset:"default"}:v,E=d.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-recording",layout:m,instanceId:E})}},{key:"stopRecording",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(Z({action:"local-recording-stop"},d))}},{key:"startLiveStreaming",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(Z({action:"daily-method-start-live-streaming"},d))}},{key:"updateLiveStreaming",value:function(d){var v=d.layout,m=v===void 0?{preset:"default"}:v,E=d.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-live-streaming",layout:m,instanceId:E})}},{key:"addLiveStreamingEndpoints",value:function(d){var v=d.endpoints,m=d.instanceId;this.sendMessageToCallMachine({action:kh,endpointsOp:sA,endpoints:v,instanceId:m})}},{key:"removeLiveStreamingEndpoints",value:function(d){var v=d.endpoints,m=d.instanceId;this.sendMessageToCallMachine({action:kh,endpointsOp:iA,endpoints:v,instanceId:m})}},{key:"stopLiveStreaming",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(Z({action:"daily-method-stop-live-streaming"},d))}},{key:"validateDailyConfig",value:function(d){d.camSimulcastEncodings&&(console.warn("camSimulcastEncodings is deprecated. Use sendSettings, found in DailyCallOptions, to provide camera simulcast settings."),this.validateSimulcastEncodings(d.camSimulcastEncodings)),d.screenSimulcastEncodings&&console.warn("screenSimulcastEncodings is deprecated. Use sendSettings, found in DailyCallOptions, to provide screen simulcast settings."),ry()&&d.noAutoDefaultDeviceChange&&console.warn("noAutoDefaultDeviceChange is not supported on Android, and will be ignored.")}},{key:"validateSimulcastEncodings",value:function(d){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,m=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(d){if(!(d instanceof Array||Array.isArray(d)))throw new Error("encodings must be an Array");if(!tp(d.length,1,3))throw new Error("encodings must be an Array with between 1 to ".concat(3," layers"));for(var E=0;E<d.length;E++){var T=d[E];for(var D in this._validateEncodingLayerHasValidProperties(T),T)if(la.includes(D)){if(typeof T[D]!="number")throw new Error("".concat(D," must be a number"));if(v){var z=v[D],W=z.min,J=z.max;if(!tp(T[D],W,J))throw new Error("".concat(D," value not in range. valid range: ").concat(W," to ").concat(J))}}else if(!["active","scalabilityMode"].includes(D))throw new Error("Invalid key ".concat(D,", valid keys are:")+Object.values(la));if(m&&!T.hasOwnProperty("maxBitrate"))throw new Error("maxBitrate is not specified")}}}},{key:"startRemoteMediaPlayer",value:(C=se(function*(d){var v=this,m=d.url,E=d.settings,T=E===void 0?{state:Sc.PLAY}:E;try{(function(D){if(typeof D!="string")throw new Error('url parameter must be "string" type')})(m),ep(T),function(D){for(var z in D)if(!Kh.includes(z))throw new Error("Invalid key ".concat(z,", valid keys are: ").concat(Kh));D.simulcastEncodings&&this.validateSimulcastEncodings(D.simulcastEncodings,hy,!0)}(T)}catch(D){throw console.error("invalid argument Error: ".concat(D)),console.error(`startRemoteMediaPlayer arguments must be of the form:
  { url: "playback url",
  settings?:
  {state: "play"|"pause", simulcastEncodings?: [{}] } }`),D}return new Promise(function(D,z){v.sendMessageToCallMachine({action:"daily-method-start-remote-media-player",url:m,settings:T},function(W){W.error?z({error:W.error,errorMsg:W.errorMsg}):D({session_id:W.session_id,remoteMediaPlayerState:{state:W.state,settings:W.settings}})})})}),function(d){return C.apply(this,arguments)})},{key:"stopRemoteMediaPlayer",value:(M=se(function*(d){var v=this;if(typeof d!="string")throw new Error(" remotePlayerID must be of type string");return new Promise(function(m,E){v.sendMessageToCallMachine({action:"daily-method-stop-remote-media-player",session_id:d},function(T){T.error?E({error:T.error,errorMsg:T.errorMsg}):m()})})}),function(d){return M.apply(this,arguments)})},{key:"updateRemoteMediaPlayer",value:(w=se(function*(d){var v=this,m=d.session_id,E=d.settings;try{ep(E)}catch(T){throw console.error("invalid argument Error: ".concat(T)),console.error(`updateRemoteMediaPlayer arguments must be of the form:
  session_id: "participant session",
  { settings?: {state: "play"|"pause"} }`),T}return new Promise(function(T,D){v.sendMessageToCallMachine({action:"daily-method-update-remote-media-player",session_id:m,settings:E},function(z){z.error?D({error:z.error,errorMsg:z.errorMsg}):T({session_id:z.session_id,remoteMediaPlayerState:{state:z.state,settings:z.settings}})})})}),function(d){return w.apply(this,arguments)})},{key:"startTranscription",value:function(d){we(this._callState,"startTranscription()"),this.sendMessageToCallMachine(Z({action:"daily-method-start-transcription"},d))}},{key:"updateTranscription",value:function(d){if(we(this._callState,"updateTranscription()"),!d)throw new Error("updateTranscription Error: options is mandatory");if(he(d)!=="object")throw new Error("updateTranscription Error: options must be object type");if(d.participants&&!Array.isArray(d.participants))throw new Error("updateTranscription Error: participants must be an array");this.sendMessageToCallMachine(Z({action:"daily-method-update-transcription"},d))}},{key:"stopTranscription",value:function(d){if(we(this._callState,"stopTranscription()"),d&&he(d)!=="object")throw new Error("stopTranscription Error: options must be object type");if(d&&!d.instanceId)throw new Error('"instanceId" not provided');this.sendMessageToCallMachine(Z({action:"daily-method-stop-transcription"},d))}},{key:"startDialOut",value:(b=se(function*(d){var v=this;we(this._callState,"startDialOut()");var m=function(E){if(E){if(!Array.isArray(E))throw new Error("Error starting dial out: audio codec must be an array");if(E.length<=0)throw new Error("Error starting dial out: audio codec array specified but empty");E.forEach(function(T){if(typeof T!="string")throw new Error("Error starting dial out: audio codec must be a string");if(T!=="OPUS"&&T!=="PCMU"&&T!=="PCMA"&&T!=="G722")throw new Error("Error starting dial out: audio codec must be one of OPUS, PCMU, PCMA, G722")})}};if(!d.sipUri&&!d.phoneNumber)throw new Error("Error starting dial out: either a sip uri or phone number must be provided");if(d.sipUri&&d.phoneNumber)throw new Error("Error starting dial out: only one of sip uri or phone number must be provided");if(d.sipUri){if(typeof d.sipUri!="string")throw new Error("Error starting dial out: sipUri must be a string");if(!d.sipUri.startsWith("sip:"))throw new Error("Error starting dial out: Invalid SIP URI, must start with 'sip:'");if(d.video&&typeof d.video!="boolean")throw new Error("Error starting dial out: video must be a boolean value");(function(E){if(E&&(m(E.audio),E.video)){if(!Array.isArray(E.video))throw new Error("Error starting dial out: video codec must be an array");if(E.video.length<=0)throw new Error("Error starting dial out: video codec array specified but empty");E.video.forEach(function(T){if(typeof T!="string")throw new Error("Error starting dial out: video codec must be a string");if(T!=="H264"&&T!=="VP8")throw new Error("Error starting dial out: video codec must be H264 or VP8")})}})(d.codecs)}if(d.phoneNumber){if(typeof d.phoneNumber!="string")throw new Error("Error starting dial out: phoneNumber must be a string");if(!/^\+\d{1,}$/.test(d.phoneNumber))throw new Error("Error starting dial out: Invalid phone number, must be valid phone number as per E.164");d.codecs&&m(d.codecs.audio)}if(d.callerId){if(typeof d.callerId!="string")throw new Error("Error starting dial out: callerId must be a string");if(d.sipUri)throw new Error("Error starting dial out: callerId not allowed with sipUri")}if(d.displayName){if(typeof d.displayName!="string")throw new Error("Error starting dial out: displayName must be a string");if(d.displayName.length>=200)throw new Error("Error starting dial out: displayName length must be less than 200")}if(d.userId){if(typeof d.userId!="string")throw new Error("Error starting dial out: userId must be a string");if(d.userId.length>36)throw new Error("Error starting dial out: userId length must be less than or equal to 36")}return new Promise(function(E,T){v.sendMessageToCallMachine(Z({action:"dialout-start"},d),function(D){D.error?T(D.error):E(D)})})}),function(d){return b.apply(this,arguments)})},{key:"stopDialOut",value:function(d){var v=this;return we(this._callState,"stopDialOut()"),new Promise(function(m,E){v.sendMessageToCallMachine(Z({action:"dialout-stop"},d),function(T){T.error?E(T.error):m(T)})})}},{key:"sipCallTransfer",value:(y=se(function*(d){var v=this;if(we(this._callState,"sipCallTransfer()"),!d)throw new Error("sipCallTransfer() requires a sessionId and toEndPoint");return d.useSipRefer=!1,Zh(d,"sipCallTransfer"),new Promise(function(m,E){v.sendMessageToCallMachine(Z({action:Ch},d),function(T){T.error?E(T.error):m(T)})})}),function(d){return y.apply(this,arguments)})},{key:"sipRefer",value:(g=se(function*(d){var v=this;if(we(this._callState,"sipRefer()"),!d)throw new Error("sessionId and toEndPoint are mandatory parameter");return d.useSipRefer=!0,Zh(d,"sipRefer"),new Promise(function(m,E){v.sendMessageToCallMachine(Z({action:Ch},d),function(T){T.error?E(T.error):m(T)})})}),function(d){return g.apply(this,arguments)})},{key:"sendDTMF",value:(p=se(function*(d){var v=this;return we(this._callState,"sendDTMF()"),function(m){var E=m.sessionId,T=m.tones;if(!E||!T)throw new Error("sessionId and tones are mandatory parameter");if(typeof E!="string"||typeof T!="string")throw new Error("sessionId and tones should be of string type");if(T.length>20)throw new Error("tones string must be upto 20 characters");var D=/[^0-9A-D*#]/g,z=T.match(D);if(z&&z[0])throw new Error("".concat(z[0]," is not valid DTMF tone"))}(d),new Promise(function(m,E){v.sendMessageToCallMachine(Z({action:"send-dtmf"},d),function(T){T.error?E(T.error):m(T)})})}),function(d){return p.apply(this,arguments)})},{key:"getNetworkStats",value:function(){var d=this;return this._callState!==An?Promise.resolve(Z({stats:{latest:{}}},this._network)):new Promise(function(v){d.sendMessageToCallMachine({action:"get-calc-stats"},function(m){v(Z(Z({},d._network),{},{stats:m.stats}))})})}},{key:"testWebsocketConnectivity",value:(h=se(function*(){var d=this;if(da(this._testCallInProgress,"testWebsocketConnectivity()"),this.needsLoad())try{yield this.load()}catch(v){return Promise.reject(v)}return new Promise(function(v,m){d.sendMessageToCallMachine({action:"test-websocket-connectivity"},function(E){E.error?m(E.error):v(E.results)})})}),function(){return h.apply(this,arguments)})},{key:"abortTestWebsocketConnectivity",value:function(){this.sendMessageToCallMachine({action:"abort-test-websocket-connectivity"})}},{key:"_validateVideoTrackForNetworkTests",value:function(d){return d?d instanceof MediaStreamTrack?!!CA(d)||(console.error("Video track is not playable. This test needs a live video track."),!1):(console.error("Video track needs to be of type `MediaStreamTrack`."),!1):(console.error("Missing video track. You must provide a video track in order to run this test."),!1)}},{key:"testCallQuality",value:(f=se(function*(){var d=this;le(),ht(this._callObjectMode,"testCallQuality()"),ii(this._callMachineInitialized,"testCallQuality()",null,!0),ua(this._callState,this._isPreparingToJoin,"testCallQuality()");var v=this._testCallAlreadyInProgress,m=function(T){v||(d._testCallInProgress=T)};if(m(!0),this.needsLoad())try{var E=this._callState;yield this.load(),this._callState=E}catch(T){return m(!1),Promise.reject(T)}return new Promise(function(T){d.sendMessageToCallMachine({action:"test-call-quality",dailyJsVersion:d.properties.dailyJsVersion},function(D){var z=D.results,W=z.result,J=Zd(z,PA);if(W==="failed"){var ie,ae=Z({},J);(ie=J.error)!==null&&ie!==void 0&&ie.details?(J.error.details=JSON.parse(J.error.details),ae.error=Z(Z({},ae.error),{},{details:Z({},ae.error.details)}),ae.error.details.duringTest="testCallQuality"):(ae.error=ae.error?Z({},ae.error):{},ae.error.details={duringTest:"testCallQuality"}),d._maybeSendToSentry(ae)}m(!1),T(Z({result:W},J))})})}),function(){return f.apply(this,arguments)})},{key:"stopTestCallQuality",value:function(){this.sendMessageToCallMachine({action:"stop-test-call-quality"})}},{key:"testConnectionQuality",value:(u=se(function*(d){var v;de()?(console.warn("testConnectionQuality() is deprecated: use testPeerToPeerCallQuality() instead"),v=yield this.testPeerToPeerCallQuality(d)):(console.warn("testConnectionQuality() is deprecated: use testCallQuality() instead"),v=yield this.testCallQuality());var m={result:v.result,secondsElapsed:v.secondsElapsed};return v.data&&(m.data={maxRTT:v.data.maxRoundTripTime,packetLoss:v.data.avgRecvPacketLoss}),m}),function(d){return u.apply(this,arguments)})},{key:"testPeerToPeerCallQuality",value:(l=se(function*(d){var v=this;if(da(this._testCallInProgress,"testPeerToPeerCallQuality()"),this.needsLoad())try{yield this.load()}catch(T){return Promise.reject(T)}var m=d.videoTrack,E=d.duration;if(!this._validateVideoTrackForNetworkTests(m))throw new Error("Video track error");return this._sharedTracks.videoTrackForConnectionQualityTest=m,new Promise(function(T,D){v.sendMessageToCallMachine({action:"test-p2p-call-quality",duration:E},function(z){z.error?D(z.error):T(z.results)})})}),function(d){return l.apply(this,arguments)})},{key:"stopTestConnectionQuality",value:function(){de()?(console.warn("stopTestConnectionQuality() is deprecated: use testPeerToPeerCallQuality() and stopTestPeerToPeerCallQuality() instead"),this.stopTestPeerToPeerCallQuality()):(console.warn("stopTestConnectionQuality() is deprecated: use testCallQuality() and stopTestCallQuality() instead"),this.stopTestCallQuality())}},{key:"stopTestPeerToPeerCallQuality",value:function(){this.sendMessageToCallMachine({action:"stop-test-p2p-call-quality"})}},{key:"testNetworkConnectivity",value:(c=se(function*(d){var v=this;if(da(this._testCallInProgress,"testNetworkConnectivity()"),this.needsLoad())try{yield this.load()}catch(m){return Promise.reject(m)}if(!this._validateVideoTrackForNetworkTests(d))throw new Error("Video track error");return this._sharedTracks.videoTrackForNetworkConnectivityTest=d,new Promise(function(m,E){v.sendMessageToCallMachine({action:"test-network-connectivity"},function(T){T.error?E(T.error):m(T.results)})})}),function(d){return c.apply(this,arguments)})},{key:"abortTestNetworkConnectivity",value:function(){this.sendMessageToCallMachine({action:"abort-test-network-connectivity"})}},{key:"getCpuLoadStats",value:function(){var d=this;return new Promise(function(v){d._callState===An?d.sendMessageToCallMachine({action:"get-cpu-load-stats"},function(m){v(m.cpuStats)}):v({cpuLoadState:void 0,cpuLoadStateReason:void 0,stats:{}})})}},{key:"_validateEncodingLayerHasValidProperties",value:function(d){var v;if(!(((v=Object.keys(d))===null||v===void 0?void 0:v.length)>0))throw new Error("Empty encoding is not allowed. At least one of these valid keys should be specified:"+Object.values(la))}},{key:"_validateVideoSendSettings",value:function(d,v){var m=d==="screenVideo"?["default-screen-video","detail-optimized","motion-optimized","motion-and-detail-balanced"]:["default-video","bandwidth-optimized","bandwidth-and-quality-balanced","quality-optimized","adaptive-2-layers","adaptive-3-layers"],E="Video send settings should be either an object or one of the supported presets: ".concat(m.join());if(typeof v=="string"){if(!m.includes(v))throw new Error(E)}else{if(he(v)!=="object")throw new Error(E);if(!v.maxQuality&&!v.encodings&&v.allowAdaptiveLayers===void 0)throw new Error("Video send settings must contain at least maxQuality, allowAdaptiveLayers or encodings attribute");if(v.maxQuality&&["low","medium","high"].indexOf(v.maxQuality)===-1)throw new Error("maxQuality must be either low, medium or high");if(v.encodings){var T=!1;switch(Object.keys(v.encodings).length){case 1:T=!v.encodings.low;break;case 2:T=!v.encodings.low||!v.encodings.medium;break;case 3:T=!v.encodings.low||!v.encodings.medium||!v.encodings.high;break;default:T=!0}if(T)throw new Error("Encodings must be defined as: low, low and medium, or low, medium and high.");v.encodings.low&&this._validateEncodingLayerHasValidProperties(v.encodings.low),v.encodings.medium&&this._validateEncodingLayerHasValidProperties(v.encodings.medium),v.encodings.high&&this._validateEncodingLayerHasValidProperties(v.encodings.high)}}}},{key:"validateUpdateSendSettings",value:function(d){var v=this;if(!d||Object.keys(d).length===0)throw new Error("Send settings must contain at least information for one track!");Object.entries(d).forEach(function(m){var E=Ye(m,2),T=E[0],D=E[1];v._validateVideoSendSettings(T,D)})}},{key:"updateSendSettings",value:function(d){var v=this;return this.validateUpdateSendSettings(d),this.needsLoad()?(this._preloadCache.sendSettings=d,{sendSettings:this._preloadCache.sendSettings}):new Promise(function(m,E){v.sendMessageToCallMachine({action:"update-send-settings",sendSettings:d},function(T){T.error?E(T.error):m(T.sendSettings)})})}},{key:"getSendSettings",value:function(){return this._sendSettings||this._preloadCache.sendSettings}},{key:"getLocalAudioLevel",value:function(){return this._localAudioLevel}},{key:"getRemoteParticipantsAudioLevel",value:function(){return this._remoteParticipantsAudioLevel}},{key:"getActiveSpeaker",value:function(){return le(),this._activeSpeaker}},{key:"setActiveSpeakerMode",value:function(d){return le(),this.sendMessageToCallMachine({action:"set-active-speaker-mode",enabled:d}),this}},{key:"activeSpeakerMode",value:function(){return le(),this._activeSpeakerMode}},{key:"subscribeToTracksAutomatically",value:function(){return this._preloadCache.subscribeToTracksAutomatically}},{key:"setSubscribeToTracksAutomatically",value:function(d){return we(this._callState,"setSubscribeToTracksAutomatically()","Use the subscribeToTracksAutomatically configuration property."),this._preloadCache.subscribeToTracksAutomatically=d,this.sendMessageToCallMachine({action:"daily-method-subscribe-to-tracks-automatically",enabled:d}),this}},{key:"enumerateDevices",value:(a=se(function*(){var d=this;if(this._callObjectMode){var v=yield navigator.mediaDevices.enumerateDevices();return Wn()==="Firefox"&&$i().major>115&&$i().major<123&&(v=v.filter(function(m){return m.kind!=="audiooutput"})),{devices:v.map(function(m){var E=JSON.parse(JSON.stringify(m));if(!de()&&m.kind==="videoinput"&&m.getCapabilities){var T,D=m.getCapabilities();E.facing=(D==null||(T=D.facingMode)===null||T===void 0?void 0:T.length)>=1?D.facingMode[0]:void 0}return E})}}return new Promise(function(m){d.sendMessageToCallMachine({action:"enumerate-devices"},function(E){m({devices:E.devices})})})}),function(){return a.apply(this,arguments)})},{key:"sendAppMessage",value:function(d){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"*";if(we(this._callState,"sendAppMessage()"),JSON.stringify(d).length>this._maxAppMessageSize)throw new Error("Message data too large. Max size is "+this._maxAppMessageSize);return this.sendMessageToCallMachine({action:"app-msg",data:d,to:v}),this}},{key:"addFakeParticipant",value:function(d){return le(),we(this._callState,"addFakeParticipant()"),this.sendMessageToCallMachine(Z({action:"add-fake-participant"},d)),this}},{key:"setShowNamesMode",value:function(d){return Qe(this._callObjectMode,"setShowNamesMode()"),le(),d&&d!=="always"&&d!=="never"?(console.error('setShowNamesMode argument should be "always", "never", or false'),this):(this.sendMessageToCallMachine({action:"set-show-names",mode:d}),this)}},{key:"setShowLocalVideo",value:function(){var d=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return Qe(this._callObjectMode,"setShowLocalVideo()"),le(),we(this._callState,"setShowLocalVideo()"),typeof d!="boolean"?(console.error("setShowLocalVideo only accepts a boolean value"),this):(this.sendMessageToCallMachine({action:"set-show-local-video",show:d}),this._showLocalVideo=d,this)}},{key:"showLocalVideo",value:function(){return Qe(this._callObjectMode,"showLocalVideo()"),le(),this._showLocalVideo}},{key:"setShowParticipantsBar",value:function(){var d=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return Qe(this._callObjectMode,"setShowParticipantsBar()"),le(),we(this._callState,"setShowParticipantsBar()"),typeof d!="boolean"?(console.error("setShowParticipantsBar only accepts a boolean value"),this):(this.sendMessageToCallMachine({action:"set-show-participants-bar",show:d}),this._showParticipantsBar=d,this)}},{key:"showParticipantsBar",value:function(){return Qe(this._callObjectMode,"showParticipantsBar()"),le(),this._showParticipantsBar}},{key:"customIntegrations",value:function(){return le(),Qe(this._callObjectMode,"customIntegrations()"),this._customIntegrations}},{key:"setCustomIntegrations",value:function(d){return le(),Qe(this._callObjectMode,"setCustomIntegrations()"),we(this._callState,"setCustomIntegrations()"),xy(d)?(this.sendMessageToCallMachine({action:"set-custom-integrations",integrations:d}),this._customIntegrations=d,this):this}},{key:"startCustomIntegrations",value:function(d){var v=this;if(le(),Qe(this._callObjectMode,"startCustomIntegrations()"),we(this._callState,"startCustomIntegrations()"),Array.isArray(d)&&d.some(function(T){return typeof T!="string"})||!Array.isArray(d)&&typeof d!="string")return console.error("startCustomIntegrations() only accepts string | string[]"),this;var m=typeof d=="string"?[d]:d,E=m.filter(function(T){return!(T in v._customIntegrations)});return E.length?(console.error(`Can't find custom integration(s): "`.concat(E.join(", "),'"')),this):(this.sendMessageToCallMachine({action:"start-custom-integrations",ids:m}),this)}},{key:"stopCustomIntegrations",value:function(d){var v=this;if(le(),Qe(this._callObjectMode,"stopCustomIntegrations()"),we(this._callState,"stopCustomIntegrations()"),Array.isArray(d)&&d.some(function(T){return typeof T!="string"})||!Array.isArray(d)&&typeof d!="string")return console.error("stopCustomIntegrations() only accepts string | string[]"),this;var m=typeof d=="string"?[d]:d,E=m.filter(function(T){return!(T in v._customIntegrations)});return E.length?(console.error(`Can't find custom integration(s): "`.concat(E.join(", "),'"')),this):(this.sendMessageToCallMachine({action:"stop-custom-integrations",ids:m}),this)}},{key:"customTrayButtons",value:function(){return Qe(this._callObjectMode,"customTrayButtons()"),le(),this._customTrayButtons}},{key:"updateCustomTrayButtons",value:function(d){return Qe(this._callObjectMode,"updateCustomTrayButtons()"),le(),we(this._callState,"updateCustomTrayButtons()"),wy(d)?(this.sendMessageToCallMachine({action:"update-custom-tray-buttons",btns:d}),this._customTrayButtons=d,this):(console.error("updateCustomTrayButtons only accepts a dictionary of the type ".concat(JSON.stringify(Ui))),this)}},{key:"theme",value:function(){return Qe(this._callObjectMode,"theme()"),this.properties.theme}},{key:"setTheme",value:function(d){var v=this;return Qe(this._callObjectMode,"setTheme()"),new Promise(function(m,E){try{v.validateProperties({theme:d}),v.properties.theme=Z({},d),v.sendMessageToCallMachine({action:"set-theme",theme:v.properties.theme});try{v.emitDailyJSEvent({action:dP,theme:v.properties.theme})}catch(T){console.log("could not emit 'theme-updated'",T)}m(v.properties.theme)}catch(T){E(T)}})}},{key:"requestFullscreen",value:(o=se(function*(){if(le(),this._iframe&&!document.fullscreenElement&&Eh())try{(yield this._iframe.requestFullscreen)?this._iframe.requestFullscreen():this._iframe.webkitRequestFullscreen()}catch(d){console.log("could not make video call fullscreen",d)}}),function(){return o.apply(this,arguments)})},{key:"exitFullscreen",value:function(){le(),document.fullscreenElement?document.exitFullscreen():document.webkitFullscreenElement&&document.webkitExitFullscreen()}},{key:"getSidebarView",value:(i=se(function*(){var d=this;return this._callObjectMode?(console.error("getSidebarView is not available in callObject mode"),Promise.resolve(null)):new Promise(function(v){d.sendMessageToCallMachine({action:"get-sidebar-view"},function(m){v(m.view)})})}),function(){return i.apply(this,arguments)})},{key:"setSidebarView",value:function(d){return this._callObjectMode?(console.error("setSidebarView is not available in callObject mode"),this):(this.sendMessageToCallMachine({action:"set-sidebar-view",view:d}),this)}},{key:"room",value:(s=se(function*(){var d=this,v=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).includeRoomConfigDefaults,m=v===void 0||v;return this._accessState.access===ra||this.needsLoad()?this.properties.url?{roomUrlPendingJoin:this.properties.url}:null:new Promise(function(E){d.sendMessageToCallMachine({action:"lib-room-info",includeRoomConfigDefaults:m},function(T){delete T.action,delete T.callbackStamp,E(T)})})}),function(){return s.apply(this,arguments)})},{key:"geo",value:(r=se(function*(){try{var d=yield fetch("https://gs.daily.co/_ks_/x-swsl/:");return{current:(yield d.json()).geo}}catch(v){return console.error("geo lookup failed",v),{current:""}}}),function(){return r.apply(this,arguments)})},{key:"setNetworkTopology",value:(n=se(function*(d){var v=this;return le(),we(this._callState,"setNetworkTopology()"),new Promise(function(m,E){v.sendMessageToCallMachine({action:"set-network-topology",opts:d},function(T){T.error?E({error:T.error}):m({workerId:T.workerId})})})}),function(d){return n.apply(this,arguments)})},{key:"getNetworkTopology",value:(t=se(function*(){var d=this;return new Promise(function(v,m){d.needsLoad()&&v({topology:"none"}),d.sendMessageToCallMachine({action:"get-network-topology"},function(E){E.error?m({error:E.error}):v({topology:E.topology})})})}),function(){return t.apply(this,arguments)})},{key:"setPlayNewParticipantSound",value:function(d){if(le(),typeof d!="number"&&d!==!0&&d!==!1)throw new Error("argument to setShouldPlayNewParticipantSound should be true, false, or a number, but is ".concat(d));this.sendMessageToCallMachine({action:"daily-method-set-play-ding",arg:d})}},{key:"on",value:function(d,v){return Hs.prototype.on.call(this,d,v)}},{key:"once",value:function(d,v){return Hs.prototype.once.call(this,d,v)}},{key:"off",value:function(d,v){return Hs.prototype.off.call(this,d,v)}},{key:"validateProperties",value:function(d){var v,m;if(d!=null&&(v=d.dailyConfig)!==null&&v!==void 0&&v.userMediaAudioConstraints){var E,T;de()||console.warn("userMediaAudioConstraints is deprecated. You can override constraints with inputSettings.audio.settings, found in DailyCallOptions.");var D=d.inputSettings||{};D.audio=((E=d.inputSettings)===null||E===void 0?void 0:E.audio)||{},D.audio.settings=((T=d.inputSettings)===null||T===void 0||(T=T.audio)===null||T===void 0?void 0:T.settings)||{},D.audio.settings=Z(Z({},D.audio.settings),d.dailyConfig.userMediaAudioConstraints),d.inputSettings=D,delete d.dailyConfig.userMediaAudioConstraints}if(d!=null&&(m=d.dailyConfig)!==null&&m!==void 0&&m.userMediaVideoConstraints){var z,W;de()||console.warn("userMediaVideoConstraints is deprecated. You can override constraints with inputSettings.video.settings, found in DailyCallOptions.");var J=d.inputSettings||{};J.video=((z=d.inputSettings)===null||z===void 0?void 0:z.video)||{},J.video.settings=((W=d.inputSettings)===null||W===void 0||(W=W.video)===null||W===void 0?void 0:W.settings)||{},J.video.settings=Z(Z({},J.video.settings),d.dailyConfig.userMediaVideoConstraints),d.inputSettings=J,delete d.dailyConfig.userMediaVideoConstraints}for(var ie in d){if(!Cn[ie])throw new Error("unrecognized property '".concat(ie,"'"));if(Cn[ie].validate&&!Cn[ie].validate(d[ie],this))throw new Error("property '".concat(ie,"': ").concat(Cn[ie].help))}}},{key:"assembleMeetingUrl",value:function(){var d,v,m=Z(Z({},this.properties),{},{emb:this.callClientId,embHref:encodeURIComponent(window.location.href),proxy:(d=this.properties.dailyConfig)!==null&&d!==void 0&&d.proxyUrl?encodeURIComponent((v=this.properties.dailyConfig)===null||v===void 0?void 0:v.proxyUrl):void 0}),E=m.url.match(/\?/)?"&":"?";return m.url+E+Object.keys(Cn).filter(function(T){return Cn[T].queryString&&m[T]!==void 0}).map(function(T){return"".concat(Cn[T].queryString,"=").concat(m[T])}).join("&")}},{key:"needsLoad",value:function(){return[fh,hh,_n,Qt].includes(this._callState)}},{key:"sendMessageToCallMachine",value:function(d,v){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw new Error("Use after destroy");this._messageChannel.sendMessageToCallMachine(d,v,this.callClientId,this._iframe)}},{key:"forwardPackagedMessageToCallMachine",value:function(d){this._messageChannel.forwardPackagedMessageToCallMachine(d,this._iframe,this.callClientId)}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(d){return this._messageChannel.addListenerForPackagedMessagesFromCallMachine(d,this.callClientId)}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(d){this._messageChannel.removeListenerForPackagedMessagesFromCallMachine(d)}},{key:"handleMessageFromCallMachine",value:function(d){switch(d.action){case lP:this.sendMessageToCallMachine(Z({action:uP},this.properties));break;case"call-machine-initialized":this._callMachineInitialized=!0;var v={action:ni,level:"log",code:1011,stats:{event:"bundle load",time:this._bundleLoadTime==="no-op"?0:this._bundleLoadTime,preLoaded:this._bundleLoadTime==="no-op",url:ji(this.properties.dailyConfig)}};this.sendMessageToCallMachine(v),this._delayDuplicateInstanceLog&&this._logDuplicateInstanceAttempt();break;case gh:this._loadedCallback&&(this._loadedCallback(),this._loadedCallback=null),this.emitDailyJSEvent(d);break;case vP:var m,E=Z({},d);delete E.internal,this._maxAppMessageSize=((m=d.internal)===null||m===void 0?void 0:m._maxAppMessageSize)||sa,this._joinedCallback&&(this._joinedCallback(d.participants),this._joinedCallback=null),this.emitDailyJSEvent(E);break;case bP:case wP:if(this._callState===_n)return;if(d.participant&&d.participant.session_id){var T=d.participant.local?"local":d.participant.session_id;if(this._callObjectMode){var D=this._callMachine().store;jh(d.participant,D),Dh(d.participant,D),Ih(d.participant,this._participants[T],D)}try{this.maybeParticipantTracksStopped(this._participants[T],d.participant),this.maybeParticipantTracksStarted(this._participants[T],d.participant),this.maybeEventRecordingStopped(this._participants[T],d.participant),this.maybeEventRecordingStarted(this._participants[T],d.participant)}catch(gb){console.error("track events error",gb)}this.compareEqualForParticipantUpdateEvent(d.participant,this._participants[T])||(this._participants[T]=Z({},d.participant),this.toggleParticipantAudioBasedOnNativeAudioFocus(),this.emitDailyJSEvent(d))}break;case xP:if(d.participant&&d.participant.session_id){var z=this._participants[d.participant.session_id];z&&this.maybeParticipantTracksStopped(z,null),delete this._participants[d.participant.session_id],this.emitDailyJSEvent(d)}break;case SP:Ge(this._participantCounts,d.participantCounts)||(this._participantCounts=d.participantCounts,this.emitDailyJSEvent(d));break;case _P:var W={access:d.access};d.awaitingAccess&&(W.awaitingAccess=d.awaitingAccess),Ge(this._accessState,W)||(this._accessState=W,this.emitDailyJSEvent(d));break;case kP:if(d.meetingSession){this._meetingSessionSummary=d.meetingSession,this.emitDailyJSEvent(d);var J=Z(Z({},d),{},{action:"meeting-session-updated"});this.emitDailyJSEvent(J)}break;case xh:var ie;this._iframe&&!d.preserveIframe&&(this._iframe.src=""),this._updateCallState(Qt),this.resetMeetingDependentVars(),this._loadedCallback&&(this._loadedCallback(d.errorMsg),this._loadedCallback=null),d.preserveIframe;var ae=Zd(d,AA);ae!=null&&(ie=ae.error)!==null&&ie!==void 0&&ie.details&&(ae.error.details=JSON.parse(ae.error.details)),this._maybeSendToSentry(d),this._joinedCallback&&(this._joinedCallback(null,ae),this._joinedCallback=null),this.emitDailyJSEvent(ae);break;case yP:this._callState!==Qt&&this._updateCallState(_n),this.resetMeetingDependentVars(),this._resolveLeave&&(this._resolveLeave(),this._resolveLeave=null),this.emitDailyJSEvent(d);break;case"selected-devices-updated":d.devices&&this.emitDailyJSEvent(d);break;case JP:var Et=d.state,yn=d.threshold,$r=d.quality,Le=Et.state,it=Et.reasons;Le===this._network.networkState&&Ge(it,this._network.networkStateReasons)&&yn===this._network.threshold&&$r===this._network.quality||(this._network.networkState=Le,this._network.networkStateReasons=it,this._network.quality=$r,this._network.threshold=yn,d.networkState=Le,it.length&&(d.networkStateReasons=it),delete d.state,this.emitDailyJSEvent(d));break;case YP:d&&d.cpuLoadState&&this.emitDailyJSEvent(d);break;case XP:d&&d.faceCounts!==void 0&&this.emitDailyJSEvent(d);break;case HP:var bn=d.activeSpeaker;this._activeSpeaker.peerId!==bn.peerId&&(this._activeSpeaker.peerId=bn.peerId,this.emitDailyJSEvent({action:d.action,activeSpeaker:this._activeSpeaker}));break;case"show-local-video-changed":if(this._callObjectMode)return;var Vr=d.show;this._showLocalVideo=Vr,this.emitDailyJSEvent({action:d.action,show:Vr});break;case GP:var Rs=d.enabled;this._activeSpeakerMode!==Rs&&(this._activeSpeakerMode=Rs,this.emitDailyJSEvent({action:d.action,enabled:this._activeSpeakerMode}));break;case EP:case TP:case MP:this._waitingParticipants=d.allWaitingParticipants,this.emitDailyJSEvent({action:d.action,participant:d.participant});break;case rA:Ge(this._receiveSettings,d.receiveSettings)||(this._receiveSettings=d.receiveSettings,this.emitDailyJSEvent({action:d.action,receiveSettings:d.receiveSettings}));break;case bh:this._maybeUpdateInputSettings(d.inputSettings);break;case"send-settings-updated":Ge(this._sendSettings,d.sendSettings)||(this._sendSettings=d.sendSettings,this._preloadCache.sendSettings=null,this.emitDailyJSEvent({action:d.action,sendSettings:d.sendSettings}));break;case"local-audio-level":this._localAudioLevel=d.audioLevel,this._preloadCache.localAudioLevelObserver=null,this.emitDailyJSEvent(d);break;case"remote-participants-audio-level":this._remoteParticipantsAudioLevel=d.participantsAudioLevel,this._preloadCache.remoteParticipantsAudioLevelObserver=null,this.emitDailyJSEvent(d);break;case $P:var Ur=d.session_id;this._rmpPlayerState[Ur]=d.playerState,this.emitDailyJSEvent(d);break;case UP:delete this._rmpPlayerState[d.session_id],this.emitDailyJSEvent(d);break;case VP:var zr=d.session_id,Zl=this._rmpPlayerState[zr];Zl&&this.compareEqualForRMPUpdateEvent(Zl,d.remoteMediaPlayerState)||(this._rmpPlayerState[zr]=d.remoteMediaPlayerState,this.emitDailyJSEvent(d));break;case"custom-button-click":case"sidebar-view-changed":this.emitDailyJSEvent(d);break;case CP:var mb=this._meetingSessionState.topology!==(d.meetingSessionState&&d.meetingSessionState.topology);this._meetingSessionState=fa(d.meetingSessionState,this._callObjectMode),(this._callObjectMode||mb)&&this.emitDailyJSEvent(d);break;case zP:this._isScreenSharing=!0,this.emitDailyJSEvent(d);break;case WP:case qP:this._isScreenSharing=!1,this.emitDailyJSEvent(d);break;case vh:case yh:case jP:case DP:case IP:case OP:case RP:case LP:case pP:case mP:case FP:case BP:case"test-completed":case KP:case NP:case QP:case ZP:case eA:case tA:case wh:case nA:case"dialin-ready":case"dialin-connected":case"dialin-error":case"dialin-stopped":case"dialin-warning":case"dialout-connected":case"dialout-answered":case"dialout-error":case"dialout-stopped":case"dialout-warning":this.emitDailyJSEvent(d);break;case"request-fullscreen":this.requestFullscreen();break;case"request-exit-fullscreen":this.exitFullscreen()}}},{key:"maybeEventRecordingStopped",value:function(d,v){var m="record";d&&(v.local||v[m]!==!1||d[m]===v[m]||this.emitDailyJSEvent({action:yh}))}},{key:"maybeEventRecordingStarted",value:function(d,v){var m="record";d&&(v.local||v[m]!==!0||d[m]===v[m]||this.emitDailyJSEvent({action:vh}))}},{key:"_trackStatePlayable",value:function(d){return!(!d||d.state!==sP)}},{key:"_trackChanged",value:function(d,v){return d?.id!==v?.id}},{key:"maybeEventTrackStopped",value:function(d,v,m){var E,T,D=(E=v?.tracks[d])!==null&&E!==void 0?E:null,z=(T=m?.tracks[d])!==null&&T!==void 0?T:null,W=D?.track;if(W){var J=this._trackStatePlayable(D),ie=this._trackStatePlayable(z),ae=this._trackChanged(W,z?.track);J&&(ie&&!ae||this.emitDailyJSEvent({action:AP,track:W,participant:m??v,type:d}))}}},{key:"maybeEventTrackStarted",value:function(d,v,m){var E,T,D=(E=v?.tracks[d])!==null&&E!==void 0?E:null,z=(T=m?.tracks[d])!==null&&T!==void 0?T:null,W=z?.track;if(W){var J=this._trackStatePlayable(D),ie=this._trackStatePlayable(z),ae=this._trackChanged(D?.track,W);ie&&(J&&!ae||this.emitDailyJSEvent({action:PP,track:W,participant:m,type:d}))}}},{key:"maybeParticipantTracksStopped",value:function(d,v){if(d)for(var m in d.tracks)this.maybeEventTrackStopped(m,d,v)}},{key:"maybeParticipantTracksStarted",value:function(d,v){if(v)for(var m in v.tracks)this.maybeEventTrackStarted(m,d,v)}},{key:"compareEqualForRMPUpdateEvent",value:function(d,v){var m,E;return d.state===v.state&&((m=d.settings)===null||m===void 0?void 0:m.volume)===((E=v.settings)===null||E===void 0?void 0:E.volume)}},{key:"emitDailyJSEvent",value:function(d){try{d.callClientId=this.callClientId,this.emit(d.action,d)}catch(v){console.log("could not emit",d,v)}}},{key:"compareEqualForParticipantUpdateEvent",value:function(d,v){return!!Ge(d,v)&&(!d.videoTrack||!v.videoTrack||d.videoTrack.id===v.videoTrack.id&&d.videoTrack.muted===v.videoTrack.muted&&d.videoTrack.enabled===v.videoTrack.enabled)&&(!d.audioTrack||!v.audioTrack||d.audioTrack.id===v.audioTrack.id&&d.audioTrack.muted===v.audioTrack.muted&&d.audioTrack.enabled===v.audioTrack.enabled)}},{key:"nativeUtils",value:function(){return de()?typeof DailyNativeUtils>"u"?(console.warn("in React Native, DailyNativeUtils is expected to be available"),null):DailyNativeUtils:null}},{key:"updateIsPreparingToJoin",value:function(d){this._updateCallState(this._callState,d)}},{key:"_updateCallState",value:function(d){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._isPreparingToJoin;if(d!==this._callState||v!==this._isPreparingToJoin){var m=this._callState,E=this._isPreparingToJoin;this._callState=d,this._isPreparingToJoin=v;var T=this._callState===An;this.updateShowAndroidOngoingMeetingNotification(T);var D=wi(m,E),z=wi(this._callState,this._isPreparingToJoin);D!==z&&(this.updateKeepDeviceAwake(z),this.updateDeviceAudioMode(z),this.updateNoOpRecordingEnsuringBackgroundContinuity(z))}}},{key:"resetMeetingDependentVars",value:function(){this._participants={},this._participantCounts=Jh,this._waitingParticipants={},this._activeSpeaker={},this._activeSpeakerMode=!1,this._didPreAuth=!1,this._accessState={access:ra},this._finalSummaryOfPrevSession=this._meetingSessionSummary,this._meetingSessionSummary={},this._meetingSessionState=fa(Gh,this._callObjectMode),this._isScreenSharing=!1,this._receiveSettings={},this._inputSettings=void 0,this._sendSettings={},this._localAudioLevel=0,this._isLocalAudioLevelObserverRunning=!1,this._remoteParticipantsAudioLevel={},this._isRemoteParticipantsAudioLevelObserverRunning=!1,this._maxAppMessageSize=sa,this._callMachineInitialized=!1,this._bundleLoadTime=void 0,this._preloadCache}},{key:"updateKeepDeviceAwake",value:function(d){de()&&this.nativeUtils().setKeepDeviceAwake(d,this.callClientId)}},{key:"updateDeviceAudioMode",value:function(d){if(de()&&!this.disableReactNativeAutoDeviceManagement("audio")){var v=d?this._nativeInCallAudioMode:"idle";this.nativeUtils().setAudioMode(v)}}},{key:"updateShowAndroidOngoingMeetingNotification",value:function(d){if(de()&&this.nativeUtils().setShowOngoingMeetingNotification){var v,m,E,T;if(this.properties.reactNativeConfig&&this.properties.reactNativeConfig.androidInCallNotification){var D=this.properties.reactNativeConfig.androidInCallNotification;v=D.title,m=D.subtitle,E=D.iconName,T=D.disableForCustomOverride}T&&(d=!1),this.nativeUtils().setShowOngoingMeetingNotification(d,v,m,E,this.callClientId)}}},{key:"updateNoOpRecordingEnsuringBackgroundContinuity",value:function(d){de()&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity(d)}},{key:"toggleParticipantAudioBasedOnNativeAudioFocus",value:function(){var d;if(de()){var v=(d=this._callMachine())===null||d===void 0||(d=d.store)===null||d===void 0?void 0:d.getState();for(var m in v?.streams){var E=v.streams[m];E&&E.pendingTrack&&E.pendingTrack.kind==="audio"&&(E.pendingTrack.enabled=this._hasNativeAudioFocus)}}}},{key:"disableReactNativeAutoDeviceManagement",value:function(d){return this.properties.reactNativeConfig&&this.properties.reactNativeConfig.disableAutoDeviceManagement&&this.properties.reactNativeConfig.disableAutoDeviceManagement[d]}},{key:"absoluteUrl",value:function(d){if(d!==void 0){var v=document.createElement("a");return v.href=d,v.href}}},{key:"sayHello",value:function(){var d="hello, world.";return console.log(d),d}},{key:"_logUseAfterDestroy",value:function(){var d=Object.values(kn)[0];if(this.needsLoad())if(d&&!d.needsLoad()){var v={action:ni,level:"error",code:this.strictMode?9995:9997};d.sendMessageToCallMachine(v)}else this.strictMode||console.error("You are are attempting to use a call instance that was previously destroyed, which is unsupported. Please remove `strictMode: false` from your constructor properties to enable strict mode to track down and fix this unsupported usage.");else{var m={action:ni,level:"error",code:this.strictMode?9995:9997};this._messageChannel.sendMessageToCallMachine(m,null,this.callClientId,this._iframe)}}},{key:"_logDuplicateInstanceAttempt",value:function(){for(var d=0,v=Object.values(kn);d<v.length;d++){var m=v[d];m._callMachineInitialized?(m.sendMessageToCallMachine({action:ni,level:"warn",code:this.allowMultipleCallInstances?9993:9992}),m._delayDuplicateInstanceLog=!1):m._delayDuplicateInstanceLog=!0}}},{key:"_maybeSendToSentry",value:function(d){var v,m,E,T;if(!((v=d.error)!==null&&v!==void 0&&v.type&&(![cP,aP,mh].includes(d.error.type)||d.error.type===mh&&d.error.msg.includes("deleted")))){var D=(m=this.properties)!==null&&m!==void 0&&m.url?new URL(this.properties.url):void 0,z="production";D&&D.host.includes(".staging.daily")&&(z="staging");var W,J,ie,ae,Et,yn=function(Ur){const zr=[kM(),SM(),YM(),JM(),tP(),rP(),MM(),nP()];return Ur.autoSessionTracking!==!1&&zr.push(eP()),zr}({}).filter(function(Ur){return!["BrowserApiErrors","Breadcrumbs","GlobalHandlers"].includes(Ur.name)}),$r=new IM({dsn:"https://f10f1c81e5d44a4098416c0867a8b740@o77906.ingest.sentry.io/168844",transport:VM,stackParser:GM,integrations:yn,environment:z}),Le=new pn;if(Le.setClient($r),$r.init(),this.session_id&&Le.setExtra("sessionId",this.session_id),this.properties){var it=Z({},this.properties);it.userName=it.userName?"[Filtered]":void 0,it.userData=it.userData?"[Filtered]":void 0,it.token=it.token?"[Filtered]":void 0,Le.setExtra("properties",it)}if(D){var bn=D.searchParams.get("domain");if(!bn){var Vr=D.host.match(/(.*?)\./);bn=Vr&&Vr[1]||""}bn&&Le.setTag("domain",bn)}d.error&&(Le.setTag("fatalErrorType",d.error.type),Le.setExtra("errorDetails",d.error.details),!((W=d.error.details)===null||W===void 0)&&W.uri&&Le.setTag("serverAddress",d.error.details.uri),!((J=d.error.details)===null||J===void 0)&&J.workerGroup&&Le.setTag("workerGroup",d.error.details.workerGroup),!((ie=d.error.details)===null||ie===void 0)&&ie.geoGroup&&Le.setTag("geoGroup",d.error.details.geoGroup),!((ae=d.error.details)===null||ae===void 0)&&ae.on&&Le.setTag("connectionAttempt",d.error.details.on),(Et=d.error.details)!==null&&Et!==void 0&&Et.bundleUrl&&(Le.setTag("bundleUrl",d.error.details.bundleUrl),Le.setTag("bundleError",d.error.details.sourceError.type))),Le.setTags({callMode:this._callObjectMode?de()?"reactNative":(E=this.properties)!==null&&E!==void 0&&(E=E.dailyConfig)!==null&&E!==void 0&&(E=E.callMode)!==null&&E!==void 0&&E.includes("prebuilt")?this.properties.dailyConfig.callMode:"custom":"prebuilt-frame",version:e.version()});var Rs=((T=d.error)===null||T===void 0?void 0:T.msg)||d.errorMsg;Le.captureException(new Error(Rs))}}},{key:"_callMachine",value:function(){var d;return(d=window._daily)===null||d===void 0||(d=d.instances)===null||d===void 0||(d=d[this.callClientId])===null||d===void 0?void 0:d.callMachine}},{key:"_maybeUpdateInputSettings",value:function(d){if(!Ge(this._inputSettings,d)){var v=this._getInputSettings();this._inputSettings=d;var m=this._getInputSettings();Ge(v,m)||this.emitDailyJSEvent({action:bh,inputSettings:m})}}}],[{key:"supportedBrowser",value:function(){if(de())return{supported:!0,mobile:!0,name:"React Native",version:null,supportsScreenShare:!0,supportsSfu:!0,supportsVideoProcessing:!1,supportsAudioProcessing:!1};var d=WT.getParser(ft());return{supported:!!Th(),mobile:d.getPlatformType()==="mobile",name:d.getBrowserName(),version:d.getBrowserVersion(),supportsFullscreen:!!Eh(),supportsScreenShare:!!oA(),supportsSfu:!!Th(),supportsVideoProcessing:ty(),supportsAudioProcessing:ny()}}},{key:"version",value:function(){return"0.77.0"}},{key:"createCallObject",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return d.layout="none",new e(null,d)}},{key:"wrap",value:function(d){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(le(),!d||!d.contentWindow||typeof d.src!="string")throw new Error("DailyIframe::Wrap needs an iframe-like first argument");return v.layout||(v.customLayout?v.layout="custom-v1":v.layout="browser"),new e(d,v)}},{key:"createFrame",value:function(d,v){var m,E;le(),d&&v?(m=d,E=v):d&&d.append?(m=d,E={}):(m=document.body,E=d||{});var T=E.iframeStyle;T||(T=m===document.body?{position:"fixed",border:"1px solid black",backgroundColor:"white",width:"375px",height:"450px",right:"1em",bottom:"1em"}:{border:0,width:"100%",height:"100%"});var D=document.createElement("iframe");window.navigator&&window.navigator.userAgent.match(/Chrome\/61\./)?D.allow="microphone, camera":D.allow="microphone; camera; autoplay; display-capture; screen-wake-lock",D.style.visibility="hidden",m.appendChild(D),D.style.visibility=null,Object.keys(T).forEach(function(z){return D.style[z]=T[z]}),E.layout||(E.customLayout?E.layout="custom-v1":E.layout="browser");try{return new e(D,E)}catch(z){throw m.removeChild(D),z}}},{key:"createTransparentFrame",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};le();var v=document.createElement("iframe");return v.allow="microphone; camera; autoplay",v.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: 0;
      pointer-events: none;
    `,document.body.appendChild(v),d.layout||(d.layout="custom-v1"),e.wrap(v,d)}},{key:"getCallInstance",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;return d?kn[d]:Object.values(kn)[0]}}]);var t,n,r,s,i,o,a,c,l,u,f,h,p,g,y,b,w,M,C,S,_,O,k,P,L,j,N,U,H,V,G,X,q,I,ne,F,te,fe}();function Yn(e,t){var n={};for(var r in e)if(e[r]instanceof MediaStreamTrack)console.warn("MediaStreamTrack found in props or cache.",r),n[r]=Vt;else if(r==="dailyConfig"){if(e[r].modifyLocalSdpHook){var s=window._daily.instances[t].customCallbacks||{};s.modifyLocalSdpHook=e[r].modifyLocalSdpHook,window._daily.instances[t].customCallbacks=s,delete e[r].modifyLocalSdpHook}if(e[r].modifyRemoteSdpHook){var i=window._daily.instances[t].customCallbacks||{};i.modifyRemoteSdpHook=e[r].modifyRemoteSdpHook,window._daily.instances[t].customCallbacks=i,delete e[r].modifyRemoteSdpHook}n[r]=e[r]}else n[r]=e[r];return n}function we(e){var t=arguments.length>2?arguments[2]:void 0;if(e!==An){var n="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," only supported after join.");throw t&&(n+=" ".concat(t)),console.error(n),new Error(n)}}function wi(e,t){return[xc,An].includes(e)||t}function ua(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"This daily-js method",r=arguments.length>3?arguments[3]:void 0;if(wi(e,t)){var s="".concat(n," not supported after joining a meeting.");throw r&&(s+=" ".concat(r)),console.error(s),new Error(s)}}function ii(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method",n=arguments.length>2?arguments[2]:void 0;if(!e){var r="".concat(t,arguments.length>3&&arguments[3]!==void 0&&arguments[3]?" requires preAuth() or startCamera() to initialize call state.":" requires preAuth(), startCamera(), or join() to initialize call state.");throw n&&(r+=" ".concat(n)),console.error(r),new Error(r)}}function da(e){if(e){var t="A pre-call quality test is in progress. Please try ".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," again once testing has completed. Use stopTestCallQuality() to end it early.");throw console.error(t),new Error(t)}}function ht(e){if(!e){var t="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," is only supported on custom callObject instances");throw console.error(t),new Error(t)}}function Qe(e){if(e){var t="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," is only supported as part of Daily's Prebuilt");throw console.error(t),new Error(t)}}function le(){if(de())throw new Error("This daily-js method is not currently supported in React Native")}function Yr(){if(!de())throw new Error("This daily-js method is only supported in React Native")}function py(e){if(e===void 0)return!0;var t;if(typeof e=="string")t=e;else try{t=JSON.stringify(e),Ge(JSON.parse(t),e)||console.warn("The userData provided will be modified when serialized.")}catch(n){throw Error("userData must be serializable to JSON: ".concat(n))}if(t.length>4096)throw Error("userData is too large (".concat(t.length," characters). Maximum size suppported is ").concat(4096,"."));return!0}function my(e,t){for(var n=t.allowAllParticipantsKey,r=function(f){var h=["local"];return n||h.push("*"),f&&!h.includes(f)},s=function(f){return!!(f.layer===void 0||Number.isInteger(f.layer)&&f.layer>=0||f.layer==="inherit")},i=function(f){return!!f&&!(f.video&&!s(f.video))&&!(f.screenVideo&&!s(f.screenVideo))},o=0,a=Object.entries(e);o<a.length;o++){var c=Ye(a[o],2),l=c[0],u=c[1];if(!r(l)||!i(u))return!1}return!0}function gy(e){if(he(e)!=="object")return!1;for(var t=0,n=Object.entries(e);t<n.length;t++){var r=Ye(n[t],2),s=r[0],i=r[1];switch(s){case"video":if(he(i)!=="object")return!1;for(var o=0,a=Object.entries(i);o<a.length;o++){var c=Ye(a[o],2),l=c[0],u=c[1];switch(l){case"processor":if(!LA(u))return!1;break;case"settings":if(!Qh(u))return!1;break;default:return!1}}break;case"audio":if(he(i)!=="object")return!1;for(var f=0,h=Object.entries(i);f<h.length;f++){var p=Ye(h[f],2),g=p[0],y=p[1];switch(g){case"processor":if(!RA(y))return!1;break;case"settings":if(!Qh(y))return!1;break;default:return!1}}break;default:return!1}}return!0}function vy(e,t,n){var r,s=[];e.video&&e.video.processor&&(ty((r=t?.useLegacyVideoProcessor)!==null&&r!==void 0&&r)||(e.video.settings?delete e.video.processor:delete e.video,s.push("video"))),e.audio&&e.audio.processor&&(ny()||(e.audio.settings?delete e.audio.processor:delete e.audio,s.push("audio"))),s.length>0&&console.error("Ignoring settings for browser- or platform-unsupported input processor(s): ".concat(s.join(", "))),e.audio&&e.audio.settings&&(e.audio.settings.customTrack?(n.audioTrack=e.audio.settings.customTrack,e.audio.settings={customTrack:Vt}):delete n.audioTrack),e.video&&e.video.settings&&(e.video.settings.customTrack?(n.videoTrack=e.video.settings.customTrack,e.video.settings={customTrack:Vt}):delete n.videoTrack)}function RA(e){if(de())return console.warn("Video processing is not yet supported in React Native"),!1;var t=["type"];return!!e&&he(e)==="object"&&(Object.keys(e).filter(function(n){return!t.includes(n)}).forEach(function(n){console.warn("invalid key inputSettings -> audio -> processor : ".concat(n)),delete e[n]}),!!function(n){return typeof n!="string"?!1:Object.values(Zv).includes(n)?!0:(console.error("inputSettings audio processor type invalid"),!1)}(e.type))}function LA(e){if(de())return console.warn("Video processing is not yet supported in React Native"),!1;var t=["type","config"];return!e||he(e)!=="object"||!function(n){return typeof n!="string"?!1:Object.values(bi).includes(n)?!0:(console.error("inputSettings video processor type invalid"),!1)}(e.type)||e.config&&(he(e.config)!=="object"||!function(n,r){var s=Object.keys(r);if(s.length===0)return!0;var i="invalid object in inputSettings -> video -> processor -> config";switch(n){case bi.BGBLUR:return s.length>1||s[0]!=="strength"?(console.error(i),!1):!(typeof r.strength!="number"||r.strength<=0||r.strength>1||isNaN(r.strength))||(console.error("".concat(i,"; expected: {0 < strength <= 1}, got: ").concat(r.strength)),!1);case bi.BGIMAGE:return!(r.source!==void 0&&!function(o){if(o.source==="default")return o.type="default",!0;if(o.source instanceof ArrayBuffer)return!0;if(Di(o.source))return o.type="url",!!function(l){var u=new URL(l),f=u.pathname;if(u.protocol==="data:")try{var h=f.substring(f.indexOf(":")+1,f.indexOf(";")).split("/")[1];return oa.includes(h)}catch(g){return console.error("failed to deduce blob content type",g),!1}var p=f.split(".").at(-1).toLowerCase().trim();return oa.includes(p)}(o.source)||(console.error("invalid image type; supported types: [".concat(oa.join(", "),"]")),!1);return a=o.source,c=Number(a),isNaN(c)||!Number.isInteger(c)||c<=0||c>10?(console.error("invalid image selection; must be an int, > 0, <= ".concat(10)),!1):(o.type="daily-preselect",!0);var a,c}(r));default:return!0}}(e.type,e.config))?!1:(Object.keys(e).filter(function(n){return!t.includes(n)}).forEach(function(n){console.warn("invalid key inputSettings -> video -> processor : ".concat(n)),delete e[n]}),!0)}function Qh(e){return he(e)==="object"&&(!e.customTrack||e.customTrack instanceof MediaStreamTrack)}function Tc(){var e=Object.values(bi).join(" | "),t=Object.values(Zv).join(" | ");return"inputSettings must be of the form: { video?: { processor?: { type: [ ".concat(e," ], config?: {} } }, audio?: { processor: {type: [ ").concat(t," ] } } }")}function yy(e){var t=e.allowAllParticipantsKey;return"receiveSettings must be of the form { [<remote participant id> | ".concat(oP).concat(t?' | "'.concat("*",'"'):"","]: ")+'{ [video: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]], [screenVideo: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]] }}}'}function by(){return"customIntegrations should be an object of type ".concat(JSON.stringify(Ec),".")}function wy(e){if(e&&he(e)!=="object"||Array.isArray(e))return console.error("customTrayButtons should be an Object of the type ".concat(JSON.stringify(Ui),".")),!1;if(e)for(var t=0,n=Object.entries(e);t<n.length;t++)for(var r=Ye(n[t],1)[0],s=0,i=Object.entries(e[r]);s<i.length;s++){var o=Ye(i[s],2),a=o[0],c=o[1],l=Ui.id[a];if(!l)return console.error("customTrayButton does not support key ".concat(a)),!1;switch(a){case"iconPath":case"iconPathDarkMode":if(!Di(c))return console.error("customTrayButton ".concat(a," should be a url.")),!1;break;case"visualState":if(!["default","sidebar-open","active"].includes(c))return console.error("customTrayButton ".concat(a," should be ").concat(l,". Got: ").concat(c)),!1;break;default:if(he(c)!==l)return console.error("customTrayButton ".concat(a," should be a ").concat(l,".")),!1}}return!0}function xy(e){if(!e||e&&he(e)!=="object"||Array.isArray(e))return console.error(by()),!1;for(var t=function(f){return"".concat(f," should be ").concat(Ec.id[f])},n=function(f,h){return console.error("customIntegration ".concat(f,": ").concat(h))},r=0,s=Object.entries(e);r<s.length;r++){var i=Ye(s[r],1)[0];if(!("label"in e[i]))return n(i,"label is required"),!1;if(!("location"in e[i]))return n(i,"location is required"),!1;if(!("src"in e[i])&&!("srcdoc"in e[i]))return n(i,"src or srcdoc is required"),!1;for(var o=0,a=Object.entries(e[i]);o<a.length;o++){var c=Ye(a[o],2),l=c[0],u=c[1];switch(l){case"allow":case"csp":case"name":case"referrerPolicy":case"sandbox":if(typeof u!="string")return n(i,t(l)),!1;break;case"iconURL":if(!Di(u))return n(i,"".concat(l," should be a url")),!1;break;case"src":if("srcdoc"in e[i])return n(i,"cannot have both src and srcdoc"),!1;if(!Di(u))return n(i,'src "'.concat(u,'" is not a valid URL')),!1;break;case"srcdoc":if("src"in e[i])return n(i,"cannot have both src and srcdoc"),!1;if(typeof u!="string")return n(i,t(l)),!1;break;case"location":if(!["main","sidebar"].includes(u))return n(i,t(l)),!1;break;case"controlledBy":if(u!=="*"&&u!=="owners"&&(!Array.isArray(u)||u.some(function(f){return typeof f!="string"})))return n(i,t(l)),!1;break;case"shared":if((!Array.isArray(u)||u.some(function(f){return typeof f!="string"}))&&u!=="owners"&&typeof u!="boolean")return n(i,t(l)),!1;break;default:if(!Ec.id[l])return console.error("customIntegration does not support key ".concat(l)),!1}}}return!0}function Sy(e,t){if(t===void 0)return!1;switch(he(t)){case"string":return he(e)===t;case"object":if(he(e)!=="object")return!1;for(var n in e)if(!Sy(e[n],t[n]))return!1;return!0;default:return!1}}function Zh(e,t){var n=e.sessionId,r=e.toEndPoint,s=e.callerId,i=e.useSipRefer;if(!n||!r)throw new Error("".concat(t,"() requires a sessionId and toEndPoint"));if(typeof n!="string"||typeof r!="string")throw new Error("Invalid paramater: sessionId and toEndPoint must be of type string");if(i&&!r.startsWith("sip:"))throw new Error('"toEndPoint" must be a "sip" address');if(!r.startsWith("sip:")&&!r.startsWith("+"))throw new Error("toEndPoint: ".concat(r,' must starts with either "sip:" or "+"'));if(s&&typeof s!="string")throw new Error("callerId must be of type string");if(s&&!r.startsWith("+"))throw new Error("callerId is only valid when transferring to a PSTN number")}function ep(e){if(he(e)!=="object")throw new Error('RemoteMediaPlayerSettings: must be "object" type');if(e.state&&!Object.values(Sc).includes(e.state))throw new Error("Invalid value for RemoteMediaPlayerSettings.state, valid values are: "+JSON.stringify(Sc));if(e.volume){if(typeof e.volume!="number")throw new Error('RemoteMediaPlayerSettings.volume: must be "number" type');if(e.volume<0||e.volume>2)throw new Error("RemoteMediaPlayerSettings.volume: must be between 0.0 - 2.0")}}function tp(e,t,n){return!(typeof e!="number"||e<t||e>n)}function fa(e,t){return e&&!t&&delete e.data,e}function jA(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var DA={};jA(DA,"SmallWebRTCTransport",()=>Kl);class yt{static floatTo16BitPCM(t){const n=new ArrayBuffer(t.length*2),r=new DataView(n);let s=0;for(let i=0;i<t.length;i++,s+=2){let o=Math.max(-1,Math.min(1,t[i]));r.setInt16(s,o<0?o*32768:o*32767,!0)}return n}static mergeBuffers(t,n){const r=new Uint8Array(t.byteLength+n.byteLength);return r.set(new Uint8Array(t),0),r.set(new Uint8Array(n),t.byteLength),r.buffer}_packData(t,n){return[new Uint8Array([n,n>>8]),new Uint8Array([n,n>>8,n>>16,n>>24])][t]}pack(t,n){if(n?.bitsPerSample)if(n?.channels){if(!n?.data)throw new Error('Missing "data"')}else throw new Error('Missing "channels"');else throw new Error('Missing "bitsPerSample"');const{bitsPerSample:r,channels:s,data:i}=n,o=["RIFF",this._packData(1,52),"WAVE","fmt ",this._packData(1,16),this._packData(0,1),this._packData(0,s.length),this._packData(1,t),this._packData(1,t*s.length*r/8),this._packData(0,s.length*r/8),this._packData(0,r),"data",this._packData(1,s[0].length*s.length*r/8),i],a=new Blob(o,{type:"audio/mpeg"}),c=URL.createObjectURL(a);return{blob:a,url:c,channelCount:s.length,sampleRate:t,duration:i.byteLength/(s.length*t*2)}}}globalThis.WavPacker=yt;const np=[4186.01,4434.92,4698.63,4978.03,5274.04,5587.65,5919.91,6271.93,6644.88,7040,7458.62,7902.13],IA=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],cn=[],Gl=[];for(let e=1;e<=8;e++)for(let t=0;t<np.length;t++){const n=np[t];cn.push(n/Math.pow(2,8-e)),Gl.push(IA[t]+e)}const zi=[32,2e3],rp=cn.filter((e,t)=>cn[t]>zi[0]&&cn[t]<zi[1]),NA=Gl.filter((e,t)=>cn[t]>zi[0]&&cn[t]<zi[1]);class Br{static getFrequencies(t,n,r,s="frequency",i=-100,o=-30){r||(r=new Float32Array(t.frequencyBinCount),t.getFloatFrequencyData(r));const a=n/2,c=1/r.length*a;let l,u,f;if(s==="music"||s==="voice"){const g=s==="voice"?rp:cn,y=Array(g.length).fill(i);for(let b=0;b<r.length;b++){const w=b*c,M=r[b];for(let C=g.length-1;C>=0;C--)if(w>g[C]){y[C]=Math.max(y[C],M);break}}l=y,u=s==="voice"?rp:cn,f=s==="voice"?NA:Gl}else l=Array.from(r),u=l.map((g,y)=>c*y),f=u.map(g=>`${g.toFixed(2)} Hz`);const h=l.map(g=>Math.max(0,Math.min((g-i)/(o-i),1)));return{values:new Float32Array(h),frequencies:u,labels:f}}constructor(t,n=null){if(this.fftResults=[],n){const{length:r,sampleRate:s}=n,i=new OfflineAudioContext({length:r,sampleRate:s}),o=i.createBufferSource();o.buffer=n;const a=i.createAnalyser();a.fftSize=8192,a.smoothingTimeConstant=.1,o.connect(a);const c=1/60,l=r/s,u=f=>{const h=c*f;h<l&&i.suspend(h).then(()=>{const p=new Float32Array(a.frequencyBinCount);a.getFloatFrequencyData(p),this.fftResults.push(p),u(f+1)}),f===1?i.startRendering():i.resume()};o.start(0),u(1),this.audio=t,this.context=i,this.analyser=a,this.sampleRate=s,this.audioBuffer=n}else{const r=new AudioContext,s=r.createMediaElementSource(t),i=r.createAnalyser();i.fftSize=8192,i.smoothingTimeConstant=.1,s.connect(i),i.connect(r.destination),this.audio=t,this.context=r,this.analyser=i,this.sampleRate=this.context.sampleRate,this.audioBuffer=null}}getFrequencies(t="frequency",n=-100,r=-30){let s=null;if(this.audioBuffer&&this.fftResults.length){const i=this.audio.currentTime/this.audio.duration,o=Math.min(i*this.fftResults.length|0,this.fftResults.length-1);s=this.fftResults[o]}return Br.getFrequencies(this.analyser,this.sampleRate,s,t,n,r)}async resumeIfSuspended(){return this.context.state==="suspended"&&await this.context.resume(),!0}}globalThis.AudioAnalysis=Br;const FA=`
class StreamProcessor extends AudioWorkletProcessor {
  constructor() {
    super();
    this.hasStarted = false;
    this.hasInterrupted = false;
    this.outputBuffers = [];
    this.bufferLength = 128;
    this.write = { buffer: new Float32Array(this.bufferLength), trackId: null };
    this.writeOffset = 0;
    this.trackSampleOffsets = {};
    this.port.onmessage = (event) => {
      if (event.data) {
        const payload = event.data;
        if (payload.event === 'write') {
          const int16Array = payload.buffer;
          const float32Array = new Float32Array(int16Array.length);
          for (let i = 0; i < int16Array.length; i++) {
            float32Array[i] = int16Array[i] / 0x8000; // Convert Int16 to Float32
          }
          this.writeData(float32Array, payload.trackId);
        } else if (
          payload.event === 'offset' ||
          payload.event === 'interrupt'
        ) {
          const requestId = payload.requestId;
          const trackId = this.write.trackId;
          const offset = this.trackSampleOffsets[trackId] || 0;
          this.port.postMessage({
            event: 'offset',
            requestId,
            trackId,
            offset,
          });
          if (payload.event === 'interrupt') {
            this.hasInterrupted = true;
          }
        } else {
          throw new Error(\`Unhandled event "\${payload.event}"\`);
        }
      }
    };
  }

  writeData(float32Array, trackId = null) {
    let { buffer } = this.write;
    let offset = this.writeOffset;
    for (let i = 0; i < float32Array.length; i++) {
      buffer[offset++] = float32Array[i];
      if (offset >= buffer.length) {
        this.outputBuffers.push(this.write);
        this.write = { buffer: new Float32Array(this.bufferLength), trackId };
        buffer = this.write.buffer;
        offset = 0;
      }
    }
    this.writeOffset = offset;
    return true;
  }

  process(inputs, outputs, parameters) {
    const output = outputs[0];
    const outputChannelData = output[0];
    const outputBuffers = this.outputBuffers;
    if (this.hasInterrupted) {
      this.port.postMessage({ event: 'stop' });
      return false;
    } else if (outputBuffers.length) {
      this.hasStarted = true;
      const { buffer, trackId } = outputBuffers.shift();
      for (let i = 0; i < outputChannelData.length; i++) {
        outputChannelData[i] = buffer[i] || 0;
      }
      if (trackId) {
        this.trackSampleOffsets[trackId] =
          this.trackSampleOffsets[trackId] || 0;
        this.trackSampleOffsets[trackId] += buffer.length;
      }
      return true;
    } else if (this.hasStarted) {
      this.port.postMessage({ event: 'stop' });
      return false;
    } else {
      return true;
    }
  }
}

registerProcessor('stream_processor', StreamProcessor);
`,BA=new Blob([FA],{type:"application/javascript"}),$A=URL.createObjectURL(BA),VA=$A;class Jl{constructor({sampleRate:t=44100}={}){this.scriptSrc=VA,this.sampleRate=t,this.context=null,this.stream=null,this.analyser=null,this.trackSampleOffsets={},this.interruptedTrackIds={}}async connect(){this.context=new AudioContext({sampleRate:this.sampleRate}),this._speakerID&&this.context.setSinkId(this._speakerID),this.context.state==="suspended"&&await this.context.resume();try{await this.context.audioWorklet.addModule(this.scriptSrc)}catch(n){throw console.error(n),new Error(`Could not add audioWorklet module: ${this.scriptSrc}`)}const t=this.context.createAnalyser();return t.fftSize=8192,t.smoothingTimeConstant=.1,this.analyser=t,!0}getFrequencies(t="frequency",n=-100,r=-30){if(!this.analyser)throw new Error("Not connected, please call .connect() first");return Br.getFrequencies(this.analyser,this.sampleRate,null,t,n,r)}async updateSpeaker(t){const n=this._speakerID;if(this._speakerID=t,this.context)try{t==="default"?await this.context.setSinkId():await this.context.setSinkId(t)}catch(r){console.error(`Could not set sinkId to ${t}: ${r}`),this._speakerID=n}}_start(){const t=new AudioWorkletNode(this.context,"stream_processor");return t.connect(this.context.destination),t.port.onmessage=n=>{const{event:r}=n.data;if(r==="stop")t.disconnect(),this.stream=null;else if(r==="offset"){const{requestId:s,trackId:i,offset:o}=n.data,a=o/this.sampleRate;this.trackSampleOffsets[s]={trackId:i,offset:o,currentTime:a}}},this.analyser.disconnect(),t.connect(this.analyser),this.stream=t,!0}add16BitPCM(t,n="default"){if(typeof n!="string")throw new Error("trackId must be a string");if(this.interruptedTrackIds[n])return;this.stream||this._start();let r;if(t instanceof Int16Array)r=t;else if(t instanceof ArrayBuffer)r=new Int16Array(t);else throw new Error("argument must be Int16Array or ArrayBuffer");return this.stream.port.postMessage({event:"write",buffer:r,trackId:n}),r}async getTrackSampleOffset(t=!1){if(!this.stream)return null;const n=crypto.randomUUID();this.stream.port.postMessage({event:t?"interrupt":"offset",requestId:n});let r;for(;!r;)r=this.trackSampleOffsets[n],await new Promise(i=>setTimeout(()=>i(),1));const{trackId:s}=r;return t&&s&&(this.interruptedTrackIds[s]=!0),r}async interrupt(){return this.getTrackSampleOffset(!0)}}globalThis.WavStreamPlayer=Jl;const UA=`
class AudioProcessor extends AudioWorkletProcessor {

  constructor() {
    super();
    this.port.onmessage = this.receive.bind(this);
    this.initialize();
  }

  initialize() {
    this.foundAudio = false;
    this.recording = false;
    this.chunks = [];
  }

  /**
   * Concatenates sampled chunks into channels
   * Format is chunk[Left[], Right[]]
   */
  readChannelData(chunks, channel = -1, maxChannels = 9) {
    let channelLimit;
    if (channel !== -1) {
      if (chunks[0] && chunks[0].length - 1 < channel) {
        throw new Error(
          \`Channel \${channel} out of range: max \${chunks[0].length}\`
        );
      }
      channelLimit = channel + 1;
    } else {
      channel = 0;
      channelLimit = Math.min(chunks[0] ? chunks[0].length : 1, maxChannels);
    }
    const channels = [];
    for (let n = channel; n < channelLimit; n++) {
      const length = chunks.reduce((sum, chunk) => {
        return sum + chunk[n].length;
      }, 0);
      const buffers = chunks.map((chunk) => chunk[n]);
      const result = new Float32Array(length);
      let offset = 0;
      for (let i = 0; i < buffers.length; i++) {
        result.set(buffers[i], offset);
        offset += buffers[i].length;
      }
      channels[n] = result;
    }
    return channels;
  }

  /**
   * Combines parallel audio data into correct format,
   * channels[Left[], Right[]] to float32Array[LRLRLRLR...]
   */
  formatAudioData(channels) {
    if (channels.length === 1) {
      // Simple case is only one channel
      const float32Array = channels[0].slice();
      const meanValues = channels[0].slice();
      return { float32Array, meanValues };
    } else {
      const float32Array = new Float32Array(
        channels[0].length * channels.length
      );
      const meanValues = new Float32Array(channels[0].length);
      for (let i = 0; i < channels[0].length; i++) {
        const offset = i * channels.length;
        let meanValue = 0;
        for (let n = 0; n < channels.length; n++) {
          float32Array[offset + n] = channels[n][i];
          meanValue += channels[n][i];
        }
        meanValues[i] = meanValue / channels.length;
      }
      return { float32Array, meanValues };
    }
  }

  /**
   * Converts 32-bit float data to 16-bit integers
   */
  floatTo16BitPCM(float32Array) {
    const buffer = new ArrayBuffer(float32Array.length * 2);
    const view = new DataView(buffer);
    let offset = 0;
    for (let i = 0; i < float32Array.length; i++, offset += 2) {
      let s = Math.max(-1, Math.min(1, float32Array[i]));
      view.setInt16(offset, s < 0 ? s * 0x8000 : s * 0x7fff, true);
    }
    return buffer;
  }

  /**
   * Retrieves the most recent amplitude values from the audio stream
   * @param {number} channel
   */
  getValues(channel = -1) {
    const channels = this.readChannelData(this.chunks, channel);
    const { meanValues } = this.formatAudioData(channels);
    return { meanValues, channels };
  }

  /**
   * Exports chunks as an audio/wav file
   */
  export() {
    const channels = this.readChannelData(this.chunks);
    const { float32Array, meanValues } = this.formatAudioData(channels);
    const audioData = this.floatTo16BitPCM(float32Array);
    return {
      meanValues: meanValues,
      audio: {
        bitsPerSample: 16,
        channels: channels,
        data: audioData,
      },
    };
  }

  receive(e) {
    const { event, id } = e.data;
    let receiptData = {};
    switch (event) {
      case 'start':
        this.recording = true;
        break;
      case 'stop':
        this.recording = false;
        break;
      case 'clear':
        this.initialize();
        break;
      case 'export':
        receiptData = this.export();
        break;
      case 'read':
        receiptData = this.getValues();
        break;
      default:
        break;
    }
    // Always send back receipt
    this.port.postMessage({ event: 'receipt', id, data: receiptData });
  }

  sendChunk(chunk) {
    const channels = this.readChannelData([chunk]);
    const { float32Array, meanValues } = this.formatAudioData(channels);
    const rawAudioData = this.floatTo16BitPCM(float32Array);
    const monoAudioData = this.floatTo16BitPCM(meanValues);
    this.port.postMessage({
      event: 'chunk',
      data: {
        mono: monoAudioData,
        raw: rawAudioData,
      },
    });
  }

  process(inputList, outputList, parameters) {
    // Copy input to output (e.g. speakers)
    // Note that this creates choppy sounds with Mac products
    const sourceLimit = Math.min(inputList.length, outputList.length);
    for (let inputNum = 0; inputNum < sourceLimit; inputNum++) {
      const input = inputList[inputNum];
      const output = outputList[inputNum];
      const channelCount = Math.min(input.length, output.length);
      for (let channelNum = 0; channelNum < channelCount; channelNum++) {
        input[channelNum].forEach((sample, i) => {
          output[channelNum][i] = sample;
        });
      }
    }
    const inputs = inputList[0];
    // There's latency at the beginning of a stream before recording starts
    // Make sure we actually receive audio data before we start storing chunks
    let sliceIndex = 0;
    if (!this.foundAudio) {
      for (const channel of inputs) {
        sliceIndex = 0; // reset for each channel
        if (this.foundAudio) {
          break;
        }
        if (channel) {
          for (const value of channel) {
            if (value !== 0) {
              // find only one non-zero entry in any channel
              this.foundAudio = true;
              break;
            } else {
              sliceIndex++;
            }
          }
        }
      }
    }
    if (inputs && inputs[0] && this.foundAudio && this.recording) {
      // We need to copy the TypedArray, because the \`process\`
      // internals will reuse the same buffer to hold each input
      const chunk = inputs.map((input) => input.slice(sliceIndex));
      this.chunks.push(chunk);
      this.sendChunk(chunk);
    }
    return true;
  }
}

registerProcessor('audio_processor', AudioProcessor);
`,zA=new Blob([UA],{type:"application/javascript"}),WA=URL.createObjectURL(zA),_y=WA;class ky{constructor({sampleRate:t=44100,outputToSpeakers:n=!1,debug:r=!1}={}){this.scriptSrc=_y,this.sampleRate=t,this.outputToSpeakers=n,this.debug=!!r,this._deviceChangeCallback=null,this._devices=[],this.deviceSelection=null,this.stream=null,this.processor=null,this.source=null,this.node=null,this.recording=!1,this._lastEventId=0,this.eventReceipts={},this.eventTimeout=5e3,this._chunkProcessor=()=>{},this._chunkProcessorSize=void 0,this._chunkProcessorBuffer={raw:new ArrayBuffer(0),mono:new ArrayBuffer(0)}}static async decode(t,n=44100,r=-1){const s=new AudioContext({sampleRate:n});let i,o;if(t instanceof Blob){if(r!==-1)throw new Error('Can not specify "fromSampleRate" when reading from Blob');o=t,i=await o.arrayBuffer()}else if(t instanceof ArrayBuffer){if(r!==-1)throw new Error('Can not specify "fromSampleRate" when reading from ArrayBuffer');i=t,o=new Blob([i],{type:"audio/wav"})}else{let u,f;if(t instanceof Int16Array){f=t,u=new Float32Array(t.length);for(let y=0;y<t.length;y++)u[y]=t[y]/32768}else if(t instanceof Float32Array)u=t;else if(t instanceof Array)u=new Float32Array(t);else throw new Error('"audioData" must be one of: Blob, Float32Arrray, Int16Array, ArrayBuffer, Array<number>');if(r===-1)throw new Error('Must specify "fromSampleRate" when reading from Float32Array, In16Array or Array');if(r<3e3)throw new Error('Minimum "fromSampleRate" is 3000 (3kHz)');f||(f=yt.floatTo16BitPCM(u));const h={bitsPerSample:16,channels:[u],data:f};o=new yt().pack(r,h).blob,i=await o.arrayBuffer()}const a=await s.decodeAudioData(i),c=a.getChannelData(0),l=URL.createObjectURL(o);return{blob:o,url:l,values:c,audioBuffer:a}}log(){return this.debug&&this.log(...arguments),!0}getSampleRate(){return this.sampleRate}getStatus(){return this.processor?this.recording?"recording":"paused":"ended"}async _event(t,n={},r=null){if(r=r||this.processor,!r)throw new Error("Can not send events without recording first");const s={event:t,id:this._lastEventId++,data:n};r.port.postMessage(s);const i=new Date().valueOf();for(;!this.eventReceipts[s.id];){if(new Date().valueOf()-i>this.eventTimeout)throw new Error(`Timeout waiting for "${t}" event`);await new Promise(a=>setTimeout(()=>a(!0),1))}const o=this.eventReceipts[s.id];return delete this.eventReceipts[s.id],o}listenForDeviceChange(t){if(t===null&&this._deviceChangeCallback)navigator.mediaDevices.removeEventListener("devicechange",this._deviceChangeCallback),this._deviceChangeCallback=null;else if(t!==null){let n=0,r=[];const s=o=>o.map(a=>a.deviceId).sort().join(","),i=async()=>{let o=++n;const a=await this.listDevices();o===n&&s(r)!==s(a)&&(r=a,t(a.slice()))};navigator.mediaDevices.addEventListener("devicechange",i),i(),this._deviceChangeCallback=i}return!0}async requestPermission(){const t=await navigator.permissions.query({name:"microphone"});if(t.state==="denied")window.alert("You must grant microphone access to use this feature.");else if(t.state==="prompt")try{(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(s=>s.stop())}catch{window.alert("You must grant microphone access to use this feature.")}return!0}async listDevices(){if(!navigator.mediaDevices||!("enumerateDevices"in navigator.mediaDevices))throw new Error("Could not request user devices");return await this.requestPermission(),(await navigator.mediaDevices.enumerateDevices()).filter(r=>r.kind==="audioinput")}async begin(t){if(this.processor)throw new Error("Already connected: please call .end() to start a new session");if(!navigator.mediaDevices||!("getUserMedia"in navigator.mediaDevices))throw new Error("Could not request user media");t=t??this.deviceSelection?.deviceId;try{const a={audio:!0};t&&(a.audio={deviceId:{exact:t}}),this.stream=await navigator.mediaDevices.getUserMedia(a)}catch{throw new Error("Could not start media stream")}this.listDevices().then(a=>{t=this.stream.getAudioTracks()[0].getSettings().deviceId,console.log("find current device",a,t,this.stream.getAudioTracks()[0].getSettings()),this.deviceSelection=a.find(c=>c.deviceId===t),console.log("current device",this.deviceSelection)});const n=new AudioContext({sampleRate:this.sampleRate}),r=n.createMediaStreamSource(this.stream);try{await n.audioWorklet.addModule(this.scriptSrc)}catch(a){throw console.error(a),new Error(`Could not add audioWorklet module: ${this.scriptSrc}`)}const s=new AudioWorkletNode(n,"audio_processor");s.port.onmessage=a=>{const{event:c,id:l,data:u}=a.data;if(c==="receipt")this.eventReceipts[l]=u;else if(c==="chunk")if(this._chunkProcessorSize){const f=this._chunkProcessorBuffer;this._chunkProcessorBuffer={raw:yt.mergeBuffers(f.raw,u.raw),mono:yt.mergeBuffers(f.mono,u.mono)},this._chunkProcessorBuffer.mono.byteLength>=this._chunkProcessorSize&&(this._chunkProcessor(this._chunkProcessorBuffer),this._chunkProcessorBuffer={raw:new ArrayBuffer(0),mono:new ArrayBuffer(0)})}else this._chunkProcessor(u)};const i=r.connect(s),o=n.createAnalyser();return o.fftSize=8192,o.smoothingTimeConstant=.1,i.connect(o),this.outputToSpeakers&&(console.warn(`Warning: Output to speakers may affect sound quality,
especially due to system audio feedback preventative measures.
use only for debugging`),o.connect(n.destination)),this.source=r,this.node=i,this.analyser=o,this.processor=s,console.log("begin completed"),!0}getFrequencies(t="frequency",n=-100,r=-30){if(!this.processor)throw new Error("Session ended: please call .begin() first");return Br.getFrequencies(this.analyser,this.sampleRate,null,t,n,r)}async pause(){if(this.processor){if(!this.recording)throw new Error("Already paused: please call .record() first")}else throw new Error("Session ended: please call .begin() first");return this._chunkProcessorBuffer.raw.byteLength&&this._chunkProcessor(this._chunkProcessorBuffer),this.log("Pausing ..."),await this._event("stop"),this.recording=!1,!0}async record(t=()=>{},n=8192){if(this.processor){if(this.recording)throw new Error("Already recording: please call .pause() first");if(typeof t!="function")throw new Error("chunkProcessor must be a function")}else throw new Error("Session ended: please call .begin() first");return this._chunkProcessor=t,this._chunkProcessorSize=n,this._chunkProcessorBuffer={raw:new ArrayBuffer(0),mono:new ArrayBuffer(0)},this.log("Recording ..."),await this._event("start"),this.recording=!0,!0}async clear(){if(!this.processor)throw new Error("Session ended: please call .begin() first");return await this._event("clear"),!0}async read(){if(!this.processor)throw new Error("Session ended: please call .begin() first");return this.log("Reading ..."),await this._event("read")}async save(t=!1){if(!this.processor)throw new Error("Session ended: please call .begin() first");if(!t&&this.recording)throw new Error("Currently recording: please call .pause() first, or call .save(true) to force");this.log("Exporting ...");const n=await this._event("export");return new yt().pack(this.sampleRate,n.audio)}async end(){if(!this.processor)throw new Error("Session ended: please call .begin() first");const t=this.processor;this.log("Stopping ..."),await this._event("stop"),this.recording=!1,this.stream.getTracks().forEach(o=>o.stop()),this.log("Exporting ...");const r=await this._event("export",{},t);return this.processor.disconnect(),this.source.disconnect(),this.node.disconnect(),this.analyser.disconnect(),this.stream=null,this.processor=null,this.source=null,this.node=null,new yt().pack(this.sampleRate,r.audio)}async quit(){return this.listenForDeviceChange(null),this.deviceSelection=null,this.processor&&await this.end(),!0}}globalThis.WavRecorder=ky;class qA{constructor({sampleRate:t=44100,outputToSpeakers:n=!1,debug:r=!1}={}){this.scriptSrc=_y,this.sampleRate=t,this.outputToSpeakers=n,this.debug=!!r,this.stream=null,this.processor=null,this.source=null,this.node=null,this.recording=!1,this._lastEventId=0,this.eventReceipts={},this.eventTimeout=5e3,this._chunkProcessor=()=>{},this._chunkProcessorSize=void 0,this._chunkProcessorBuffer={raw:new ArrayBuffer(0),mono:new ArrayBuffer(0)}}log(){return this.debug&&this.log(...arguments),!0}getSampleRate(){return this.sampleRate}getStatus(){return this.processor?this.recording?"recording":"paused":"ended"}async _event(t,n={},r=null){if(r=r||this.processor,!r)throw new Error("Can not send events without recording first");const s={event:t,id:this._lastEventId++,data:n};r.port.postMessage(s);const i=new Date().valueOf();for(;!this.eventReceipts[s.id];){if(new Date().valueOf()-i>this.eventTimeout)throw new Error(`Timeout waiting for "${t}" event`);await new Promise(a=>setTimeout(()=>a(!0),1))}const o=this.eventReceipts[s.id];return delete this.eventReceipts[s.id],o}async begin(t){if(this.processor)throw new Error("Already connected: please call .end() to start a new session");if(!t||t.kind!=="audio")throw new Error("No audio track provided");this.stream=new MediaStream([t]);const n=new AudioContext({sampleRate:this.sampleRate}),r=n.createMediaStreamSource(this.stream);try{await n.audioWorklet.addModule(this.scriptSrc)}catch(a){throw console.error(a),new Error(`Could not add audioWorklet module: ${this.scriptSrc}`)}const s=new AudioWorkletNode(n,"audio_processor");s.port.onmessage=a=>{const{event:c,id:l,data:u}=a.data;if(c==="receipt")this.eventReceipts[l]=u;else if(c==="chunk")if(this._chunkProcessorSize){const f=this._chunkProcessorBuffer;this._chunkProcessorBuffer={raw:yt.mergeBuffers(f.raw,u.raw),mono:yt.mergeBuffers(f.mono,u.mono)},this._chunkProcessorBuffer.mono.byteLength>=this._chunkProcessorSize&&(this._chunkProcessor(this._chunkProcessorBuffer),this._chunkProcessorBuffer={raw:new ArrayBuffer(0),mono:new ArrayBuffer(0)})}else this._chunkProcessor(u)};const i=r.connect(s),o=n.createAnalyser();return o.fftSize=8192,o.smoothingTimeConstant=.1,i.connect(o),this.outputToSpeakers&&(console.warn(`Warning: Output to speakers may affect sound quality,
especially due to system audio feedback preventative measures.
use only for debugging`),o.connect(n.destination)),this.source=r,this.node=i,this.analyser=o,this.processor=s,!0}getFrequencies(t="frequency",n=-100,r=-30){if(!this.processor)throw new Error("Session ended: please call .begin() first");return Br.getFrequencies(this.analyser,this.sampleRate,null,t,n,r)}async pause(){if(this.processor){if(!this.recording)throw new Error("Already paused: please call .record() first")}else throw new Error("Session ended: please call .begin() first");return this._chunkProcessorBuffer.raw.byteLength&&this._chunkProcessor(this._chunkProcessorBuffer),this.log("Pausing ..."),await this._event("stop"),this.recording=!1,!0}async record(t=()=>{},n=8192){if(this.processor){if(this.recording)throw new Error("Already recording: HELLO please call .pause() first");if(typeof t!="function")throw new Error("chunkProcessor must be a function")}else throw new Error("Session ended: please call .begin() first");return this._chunkProcessor=t,this._chunkProcessorSize=n,this._chunkProcessorBuffer={raw:new ArrayBuffer(0),mono:new ArrayBuffer(0)},this.log("Recording ..."),await this._event("start"),this.recording=!0,!0}async clear(){if(!this.processor)throw new Error("Session ended: please call .begin() first");return await this._event("clear"),!0}async read(){if(!this.processor)throw new Error("Session ended: please call .begin() first");return this.log("Reading ..."),await this._event("read")}async save(t=!1){if(!this.processor)throw new Error("Session ended: please call .begin() first");if(!t&&this.recording)throw new Error("Currently recording: please call .pause() first, or call .save(true) to force");this.log("Exporting ...");const n=await this._event("export");return new yt().pack(this.sampleRate,n.audio)}async end(){if(!this.processor)throw new Error("Session ended: please call .begin() first");const t=this.processor;this.log("Stopping ..."),await this._event("stop"),this.recording=!1,this.log("Exporting ...");const n=await this._event("export",{},t);return this.processor.disconnect(),this.source.disconnect(),this.node.disconnect(),this.analyser.disconnect(),this.stream=null,this.processor=null,this.source=null,this.node=null,new yt().pack(this.sampleRate,n.audio)}async quit(){return this.listenForDeviceChange(null),this.processor&&await this.end(),!0}}globalThis.WavRecorder=WavRecorder;var HA=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),En=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})},Tn=function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(n=0)),n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},Cy=function(){function e(){this._callbacks={},this._micEnabled=!0,this._camEnabled=!1}return e.prototype.setUserAudioCallback=function(t){this._userAudioCallback=t},e.prototype.setClientOptions=function(t,n){var r,s,i;n===void 0&&(n=!1),!(this._options&&!n)&&(this._options=t,this._callbacks=(r=t.callbacks)!==null&&r!==void 0?r:{},this._micEnabled=(s=t.enableMic)!==null&&s!==void 0?s:!0,this._camEnabled=(i=t.enableCam)!==null&&i!==void 0?i:!1)},e}();(function(e){HA(t,e);function t(n,r){n===void 0&&(n=void 0),r===void 0&&(r=24e3);var s=e.call(this)||this;return s._initialized=!1,s._recorderChunkSize=void 0,s._recorderChunkSize=n,s._wavRecorder=new ky({sampleRate:r}),s._wavStreamPlayer=new Jl({sampleRate:24e3}),s}return t.prototype.initialize=function(){return En(this,void 0,Promise,function(){return Tn(this,function(n){switch(n.label){case 0:return[4,this._wavRecorder.begin()];case 1:return n.sent(),this._wavRecorder.listenForDeviceChange(null),this._wavRecorder.listenForDeviceChange(this._handleAvailableDevicesUpdated.bind(this)),[4,this._wavStreamPlayer.connect()];case 2:return n.sent(),this._initialized=!0,[2]}})})},t.prototype.connect=function(){return En(this,void 0,Promise,function(){var n;return Tn(this,function(r){switch(r.label){case 0:return this._initialized?[3,2]:[4,this.initialize()];case 1:r.sent(),r.label=2;case 2:return n=this._wavRecorder.getStatus()=="recording",this._micEnabled&&!n?[4,this._startRecording()]:[3,4];case 3:r.sent(),r.label=4;case 4:return[2]}})})},t.prototype.disconnect=function(){return En(this,void 0,Promise,function(){return Tn(this,function(n){switch(n.label){case 0:return this._initialized?[4,this._wavRecorder.end()]:[2];case 1:return n.sent(),[4,this._wavStreamPlayer.interrupt()];case 2:return n.sent(),this._initialized=!1,[2]}})})},t.prototype.userStartedSpeaking=function(){return En(this,void 0,Promise,function(){return Tn(this,function(n){return[2,this._wavStreamPlayer.interrupt()]})})},t.prototype.bufferBotAudio=function(n,r){return this._wavStreamPlayer.add16BitPCM(n,r)},t.prototype.getAllMics=function(){return this._wavRecorder.listDevices()},t.prototype.getAllCams=function(){return Promise.resolve([])},t.prototype.getAllSpeakers=function(){return Promise.resolve([])},t.prototype.updateMic=function(n){return En(this,void 0,Promise,function(){var r,s,i,o;return Tn(this,function(a){switch(a.label){case 0:return r=this._wavRecorder.deviceSelection,[4,this._wavRecorder.end()];case 1:return a.sent(),[4,this._wavRecorder.begin(n)];case 2:return a.sent(),this._micEnabled?[4,this._startRecording()]:[3,4];case 3:a.sent(),a.label=4;case 4:return s=this._wavRecorder.deviceSelection,s&&r&&r.label!==s.label&&((o=(i=this._callbacks).onMicUpdated)===null||o===void 0||o.call(i,s)),[2]}})})},t.prototype.updateCam=function(n){},t.prototype.updateSpeaker=function(n){},Object.defineProperty(t.prototype,"selectedMic",{get:function(){var n;return(n=this._wavRecorder.deviceSelection)!==null&&n!==void 0?n:{}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedCam",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedSpeaker",{get:function(){return{}},enumerable:!1,configurable:!0}),t.prototype.enableMic=function(n){return En(this,void 0,Promise,function(){var r=this;return Tn(this,function(s){switch(s.label){case 0:return this._micEnabled=n,this._wavRecorder.stream?(this._wavRecorder.stream.getAudioTracks().forEach(function(i){var o,a;i.enabled=n,n||(a=(o=r._callbacks).onTrackStopped)===null||a===void 0||a.call(o,i,sp())}),n?[4,this._startRecording()]:[3,2]):[2];case 1:return s.sent(),[3,4];case 2:return[4,this._wavRecorder.pause()];case 3:s.sent(),s.label=4;case 4:return[2]}})})},t.prototype.enableCam=function(n){},Object.defineProperty(t.prototype,"isCamEnabled",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMicEnabled",{get:function(){return this._micEnabled},enumerable:!1,configurable:!0}),t.prototype.tracks=function(){var n,r=(n=this._wavRecorder.stream)===null||n===void 0?void 0:n.getTracks()[0];return{local:r?{audio:r}:{}}},t.prototype._startRecording=function(){return En(this,void 0,void 0,function(){var n,r=this,s,i,o;return Tn(this,function(a){switch(a.label){case 0:return[4,this._wavRecorder.record(function(c){r._userAudioCallback(c.mono)},this._recorderChunkSize)];case 1:return a.sent(),n=(s=this._wavRecorder.stream)===null||s===void 0?void 0:s.getAudioTracks()[0],n&&((o=(i=this._callbacks).onTrackStarted)===null||o===void 0||o.call(i,n,sp())),[2]}})})},t.prototype._handleAvailableDevicesUpdated=function(n){var r,s,i,o;(s=(r=this._callbacks).onAvailableCamsUpdated)===null||s===void 0||s.call(r,n.filter(function(l){return l.kind==="videoinput"})),(o=(i=this._callbacks).onAvailableMicsUpdated)===null||o===void 0||o.call(i,n.filter(function(l){return l.kind==="audioinput"}));var a=n.find(function(l){return l.deviceId==="default"}),c=this._wavRecorder.deviceSelection;c&&(!n.some(function(l){return l.deviceId===c.deviceId})||c.deviceId==="default"&&c.label!==a?.label)&&this.updateMic("")},t})(Cy);var sp=function(){return{id:"local",name:"",local:!0}},GA=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),pt=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})},mt=function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(n=0)),n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},JA=function(e){GA(t,e);function t(n,r,s,i,o,a,c){n===void 0&&(n=!0),r===void 0&&(r=!0),o===void 0&&(o=void 0),a===void 0&&(a=24e3),c===void 0&&(c=24e3);var l,u=e.call(this)||this;return u._selectedCam={},u._selectedMic={},u._selectedSpeaker={},u._remoteAudioLevelInterval=null,u._recorderChunkSize=void 0,u._initialized=!1,u._connected=!1,u._currentAudioTrack=null,u._connectResolve=null,u.onTrackStartedCallback=s,u.onTrackStoppedCallback=i,u._recorderChunkSize=o,u._daily=(l=Xh.getCallInstance())!==null&&l!==void 0?l:Xh.createCallObject(),r&&(u._mediaStreamRecorder=new qA({sampleRate:a})),n&&(u._wavStreamPlayer=new Jl({sampleRate:c})),u._daily.on("track-started",u.handleTrackStarted.bind(u)),u._daily.on("track-stopped",u.handleTrackStopped.bind(u)),u._daily.on("available-devices-updated",u._handleAvailableDevicesUpdated.bind(u)),u._daily.on("selected-devices-updated",u._handleSelectedDevicesUpdated.bind(u)),u._daily.on("local-audio-level",u._handleLocalAudioLevel.bind(u)),u}return t.prototype.initialize=function(){return pt(this,void 0,Promise,function(){var n,r,s,i,o,a=this,c,l,u,f,h,p,g,y,b,w,M,C;return mt(this,function(S){switch(S.label){case 0:return this._initialized?(console.warn("DailyMediaManager already initialized"),[2]):[4,this._daily.startCamera({startVideoOff:!this._camEnabled,startAudioOff:!this._micEnabled})];case 1:return n=S.sent(),[4,this._daily.enumerateDevices()];case 2:return r=S.sent().devices,s=r.filter(function(_){return _.kind==="videoinput"}),i=r.filter(function(_){return _.kind==="audioinput"}),o=r.filter(function(_){return _.kind==="audiooutput"}),(l=(c=this._callbacks).onAvailableCamsUpdated)===null||l===void 0||l.call(c,s),(f=(u=this._callbacks).onAvailableMicsUpdated)===null||f===void 0||f.call(u,i),(p=(h=this._callbacks).onAvailableSpeakersUpdated)===null||p===void 0||p.call(h,o),this._selectedCam=n.camera,(y=(g=this._callbacks).onCamUpdated)===null||y===void 0||y.call(g,n.camera),this._selectedMic=n.mic,(w=(b=this._callbacks).onMicUpdated)===null||w===void 0||w.call(b,n.mic),this._selectedSpeaker=n.speaker,(C=(M=this._callbacks).onSpeakerUpdated)===null||C===void 0||C.call(M,n.speaker),this._daily.isLocalAudioLevelObserverRunning()?[3,4]:[4,this._daily.startLocalAudioLevelObserver(100)];case 3:S.sent(),S.label=4;case 4:return this._wavStreamPlayer?[4,this._wavStreamPlayer.connect()]:[3,6];case 5:S.sent(),this._remoteAudioLevelInterval||(this._remoteAudioLevelInterval=setInterval(function(){var _,O=a._wavStreamPlayer.getFrequencies(),k=0;!((_=O.values)===null||_===void 0)&&_.length&&(k=O.values.reduce(function(P,L){return P+L},0)/O.values.length),a._handleRemoteAudioLevel(k)},100)),S.label=6;case 6:return this._initialized=!0,[2]}})})},t.prototype.connect=function(){return pt(this,void 0,Promise,function(){var n=this;return mt(this,function(r){return this._connected?(console.warn("DailyMediaManager already connected"),[2]):(this._connected=!0,this._initialized?(this._micEnabled&&this._startRecording(),[2]):[2,new Promise(function(s){(function(){return pt(n,void 0,void 0,function(){return mt(this,function(i){switch(i.label){case 0:return this._connectResolve=s,[4,this.initialize()];case 1:return i.sent(),[2]}})})})()})])})})},t.prototype.disconnect=function(){return pt(this,void 0,Promise,function(){var n,r;return mt(this,function(s){switch(s.label){case 0:return this._remoteAudioLevelInterval&&clearInterval(this._remoteAudioLevelInterval),this._remoteAudioLevelInterval=null,this._daily.leave(),this._currentAudioTrack=null,[4,(n=this._mediaStreamRecorder)===null||n===void 0?void 0:n.end()];case 1:return s.sent(),(r=this._wavStreamPlayer)===null||r===void 0||r.interrupt(),this._initialized=!1,this._connected=!1,[2]}})})},t.prototype.userStartedSpeaking=function(){return pt(this,void 0,Promise,function(){var n;return mt(this,function(r){return[2,(n=this._wavStreamPlayer)===null||n===void 0?void 0:n.interrupt()]})})},t.prototype.bufferBotAudio=function(n,r){var s;return(s=this._wavStreamPlayer)===null||s===void 0?void 0:s.add16BitPCM(n,r)},t.prototype.getAllMics=function(){return pt(this,void 0,Promise,function(){var n;return mt(this,function(r){switch(r.label){case 0:return[4,this._daily.enumerateDevices()];case 1:return n=r.sent().devices,[2,n.filter(function(s){return s.kind==="audioinput"})]}})})},t.prototype.getAllCams=function(){return pt(this,void 0,Promise,function(){var n;return mt(this,function(r){switch(r.label){case 0:return[4,this._daily.enumerateDevices()];case 1:return n=r.sent().devices,[2,n.filter(function(s){return s.kind==="videoinput"})]}})})},t.prototype.getAllSpeakers=function(){return pt(this,void 0,Promise,function(){var n;return mt(this,function(r){switch(r.label){case 0:return[4,this._daily.enumerateDevices()];case 1:return n=r.sent().devices,[2,n.filter(function(s){return s.kind==="audiooutput"})]}})})},t.prototype.updateMic=function(n){var r=this;this._daily.setInputDevicesAsync({audioDeviceId:n}).then(function(s){r._selectedMic=s.mic})},t.prototype.updateCam=function(n){var r=this;this._daily.setInputDevicesAsync({videoDeviceId:n}).then(function(s){r._selectedCam=s.camera})},t.prototype.updateSpeaker=function(n){return pt(this,void 0,Promise,function(){var r,s,i,o,a=this,c,l;return mt(this,function(u){switch(u.label){case 0:return n!=="default"&&this._selectedSpeaker.deviceId===n?[2]:(r=n,r!=="default"?[3,2]:[4,this.getAllSpeakers()]);case 1:if(s=u.sent(),i=s.find(function(f){return f.deviceId==="default"}),!i)return console.warn("No default speaker found"),[2];s.splice(s.indexOf(i),1),o=s.find(function(f){return i.label.includes(f.label)}),r=(c=o?.deviceId)!==null&&c!==void 0?c:n,u.label=2;case 2:return(l=this._wavStreamPlayer)===null||l===void 0||l.updateSpeaker(r).then(function(){var f,h;a._selectedSpeaker={deviceId:n},(h=(f=a._callbacks).onSpeakerUpdated)===null||h===void 0||h.call(f,a._selectedSpeaker)}),[2]}})})},Object.defineProperty(t.prototype,"selectedMic",{get:function(){return this._selectedMic},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedCam",{get:function(){return this._selectedCam},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedSpeaker",{get:function(){return this._selectedSpeaker},enumerable:!1,configurable:!0}),t.prototype.enableMic=function(n){return pt(this,void 0,Promise,function(){var r;return mt(this,function(s){return this._micEnabled=n,!((r=this._daily.participants())===null||r===void 0)&&r.local?(this._daily.setLocalAudio(n),this._mediaStreamRecorder&&(n?this._mediaStreamRecorder.getStatus()==="paused"&&this._startRecording():this._mediaStreamRecorder.getStatus()==="recording"&&this._mediaStreamRecorder.pause()),[2]):[2]})})},t.prototype.enableCam=function(n){this._camEnabled=n,this._daily.setLocalVideo(n)},Object.defineProperty(t.prototype,"isCamEnabled",{get:function(){return this._daily.localVideo()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMicEnabled",{get:function(){return this._daily.localAudio()},enumerable:!1,configurable:!0}),t.prototype.tracks=function(){var n,r,s,i,o,a,c=this._daily.participants();return{local:{audio:(s=(r=(n=c?.local)===null||n===void 0?void 0:n.tracks)===null||r===void 0?void 0:r.audio)===null||s===void 0?void 0:s.persistentTrack,video:(a=(o=(i=c?.local)===null||i===void 0?void 0:i.tracks)===null||o===void 0?void 0:o.video)===null||a===void 0?void 0:a.persistentTrack}}},t.prototype._startRecording=function(){var n=this;if(!(!this._connected||!this._mediaStreamRecorder))try{this._mediaStreamRecorder.record(function(s){n._userAudioCallback(s.mono)},this._recorderChunkSize)}catch(s){var r=s;r.message.includes("Already recording")||console.error("Error starting recording",s)}},t.prototype._handleAvailableDevicesUpdated=function(n){var r,s,i,o,a,c;(s=(r=this._callbacks).onAvailableCamsUpdated)===null||s===void 0||s.call(r,n.availableDevices.filter(function(l){return l.kind==="videoinput"})),(o=(i=this._callbacks).onAvailableMicsUpdated)===null||o===void 0||o.call(i,n.availableDevices.filter(function(l){return l.kind==="audioinput"})),(c=(a=this._callbacks).onAvailableSpeakersUpdated)===null||c===void 0||c.call(a,n.availableDevices.filter(function(l){return l.kind==="audiooutput"})),this._selectedSpeaker.deviceId==="default"&&this.updateSpeaker("default")},t.prototype._handleSelectedDevicesUpdated=function(n){var r,s,i,o,a,c;((r=this._selectedCam)===null||r===void 0?void 0:r.deviceId)!==n.devices.camera&&(this._selectedCam=n.devices.camera,(i=(s=this._callbacks).onCamUpdated)===null||i===void 0||i.call(s,n.devices.camera)),((o=this._selectedMic)===null||o===void 0?void 0:o.deviceId)!==n.devices.mic&&(this._selectedMic=n.devices.mic,(c=(a=this._callbacks).onMicUpdated)===null||c===void 0||c.call(a,n.devices.mic))},t.prototype._handleLocalAudioLevel=function(n){var r,s;(s=(r=this._callbacks).onLocalAudioLevel)===null||s===void 0||s.call(r,n.audioLevel)},t.prototype._handleRemoteAudioLevel=function(n){var r,s;(s=(r=this._callbacks).onRemoteAudioLevel)===null||s===void 0||s.call(r,n,KA())},t.prototype.handleTrackStarted=function(n){return pt(this,void 0,void 0,function(){var r,s,i,o,a,c;return mt(this,function(l){switch(l.label){case 0:if(!(!((i=n.participant)===null||i===void 0)&&i.local))return[2];if(n.track.kind!=="audio")return[3,10];if(!this._mediaStreamRecorder)return[3,9];switch(r=this._mediaStreamRecorder.getStatus(),s=r,s){case"ended":return[3,1];case"paused":return[3,3];case"recording":return[3,4]}return[3,4];case 1:return[4,this._mediaStreamRecorder.begin(n.track)];case 2:return l.sent(),this._connected&&(this._startRecording(),this._connectResolve&&(this._connectResolve(),this._connectResolve=null)),[3,9];case 3:return this._startRecording(),[3,9];case 4:return this._currentAudioTrack===n.track?[3,7]:[4,this._mediaStreamRecorder.end()];case 5:return l.sent(),[4,this._mediaStreamRecorder.begin(n.track)];case 6:return l.sent(),this._startRecording(),[3,8];case 7:console.warn("track-started event received for current track and already recording"),l.label=8;case 8:return[3,9];case 9:this._currentAudioTrack=n.track,l.label=10;case 10:return(a=(o=this._callbacks).onTrackStarted)===null||a===void 0||a.call(o,n.track,n.participant?ip(n.participant):void 0),(c=this.onTrackStartedCallback)===null||c===void 0||c.call(this,n),[2]}})})},t.prototype.handleTrackStopped=function(n){var r,s,i,o;!((r=n.participant)===null||r===void 0)&&r.local&&(n.track.kind==="audio"&&this._mediaStreamRecorder&&this._mediaStreamRecorder.getStatus()==="recording"&&this._mediaStreamRecorder.pause(),(i=(s=this._callbacks).onTrackStopped)===null||i===void 0||i.call(s,n.track,n.participant?ip(n.participant):void 0),(o=this.onTrackStoppedCallback)===null||o===void 0||o.call(this,n))},t}(Cy),ip=function(e){return{id:e.user_id,local:e.local,name:e.user_name}},KA=function(){return{id:"bot",local:!1,name:"Bot"}};class oi{constructor(t,n){this.type="trackStatus",this.receiver_index=t,this.enabled=n}}const YA="renegotiate",XA="peerLeft",Ey="signalling";class QA{constructor(t){this.type=Ey,this.message=t}}const ha=0,pa=1;class Kl extends Fp{constructor(t={}){super(),this._connectionUrl=null,this._connectResolved=null,this._connectFailed=null,this.pc=null,this.dc=null,this.audioCodec=null,this.videoCodec=null,this.pc_id=null,this.reconnectionAttempts=0,this.maxReconnectionAttempts=3,this.isReconnecting=!1,this.keepAliveInterval=null,this._iceServers=[],this._iceServers=t.iceServers||[],this._waitForICEGathering=t.waitForICEGathering||!1,this._connectionUrl=t.connectionUrl||null,this.audioCodec=t.audioCodec||null,this.videoCodec=t.videoCodec||null,this.mediaManager=new JA(!1,!1,async n=>{this.pc&&(n.type=="audio"?(ee.info("SmallWebRTCMediaManager replacing audio track"),await this.getAudioTransceiver().sender.replaceTrack(n.track)):n.type=="video"&&(ee.info("SmallWebRTCMediaManager replacing video track"),await this.getVideoTransceiver().sender.replaceTrack(n.track)))},n=>ee.debug("SmallWebRTCMediaManager Track stopped:",n))}initialize(t,n){this._options=t,this._callbacks=t.callbacks??{},this._onMessage=n,this.mediaManager.setClientOptions(t),this.state="disconnected",ee.debug("[RTVI Transport] Initialized")}async initDevices(){this.state="initializing",await this.mediaManager.initialize(),this.state="initialized"}setAudioCodec(t){this.audioCodec=t}setVideoCodec(t){this.videoCodec=t}_validateConnectionParams(t){if(t!=null){if(typeof t!="object")throw new bt("Invalid connection parameters");for(const[n,r]of Object.entries(t)){if(n!=="connectionUrl")throw new bt(`Unrecognized connection parameter: ${n}. Only 'connectionUrl' is allowed.`);if(typeof r!="string")throw new bt(`Invalid type for connectionUrl: expected string, got ${typeof r}`)}return t}}async _connect(t){if(!this._abortController?.signal.aborted){if(this.state="connecting",this._connectionUrl=t?.connectionUrl??this._connectionUrl,!this._connectionUrl)throw ee.error("No url provided for connection"),this.state="error",new Op;await this.mediaManager.connect(),await this.startNewPeerConnection(),!this._abortController?.signal.aborted&&(await new Promise((n,r)=>{this._connectResolved=n,this._connectFailed=r}),this.state="connected",this._callbacks.onConnected?.())}}syncTrackStatus(){this.sendSignallingMessage(new oi(ha,this.mediaManager.isMicEnabled)),this.sendSignallingMessage(new oi(pa,this.mediaManager.isCamEnabled))}sendReadyMessage(){this.state="ready",this.sendMessage(wt.clientReady())}sendMessage(t){if(!this.dc||this.dc.readyState!=="open"){ee.warn(`Datachannel is not ready. Message not sent: ${t}`);return}this.dc?.send(JSON.stringify(t))}sendSignallingMessage(t){if(!this.dc||this.dc.readyState!=="open"){ee.warn(`Datachannel is not ready. Message not sent: ${t}`);return}const n=new QA(t);this.dc?.send(JSON.stringify(n))}async _disconnect(){this.state="disconnecting",await this.stop(),this.state="disconnected"}createPeerConnection(){const t={iceServers:this._iceServers};let n=new RTCPeerConnection(t);return n.addEventListener("icegatheringstatechange",()=>{ee.debug(`iceGatheringState: ${this.pc.iceGatheringState}`)}),ee.debug(`iceGatheringState: ${n.iceGatheringState}`),n.addEventListener("iceconnectionstatechange",()=>this.handleICEConnectionStateChange()),ee.debug(`iceConnectionState: ${n.iceConnectionState}`),n.addEventListener("signalingstatechange",()=>{ee.debug(`signalingState: ${this.pc.signalingState}`),this.pc.signalingState=="stable"&&this.handleReconnectionCompleted()}),ee.debug(`signalingState: ${n.signalingState}`),n.addEventListener("track",r=>{ee.debug(`Received new track ${r.track.kind}`),this._callbacks.onTrackStarted?.(r.track)}),n}handleICEConnectionStateChange(){this.pc&&(ee.debug(`ICE Connection State: ${this.pc.iceConnectionState}`),this.pc.iceConnectionState==="failed"?(ee.debug("ICE connection failed, attempting restart."),this.attemptReconnection(!0)):this.pc.iceConnectionState==="disconnected"&&setTimeout(()=>{this.pc?.iceConnectionState==="disconnected"&&(ee.debug("Still disconnected, attempting reconnection."),this.attemptReconnection(!0))},5e3))}handleReconnectionCompleted(){this.reconnectionAttempts=0,this.isReconnecting=!1}async attemptReconnection(t=!1){if(this.isReconnecting){ee.debug("Reconnection already in progress, skipping.");return}if(this.reconnectionAttempts>=this.maxReconnectionAttempts){ee.debug("Max reconnection attempts reached. Stopping transport."),await this.stop();return}if(this.isReconnecting=!0,this.reconnectionAttempts++,ee.debug(`Reconnection attempt ${this.reconnectionAttempts}...`),t){const n=this.pc;await this.startNewPeerConnection(t),n&&(ee.debug("closing old peer connection"),this.closePeerConnection(n))}else await this.negotiate()}async negotiate(t=!1){if(!this.pc)return Promise.reject("Peer connection is not initialized");try{const n=await this.pc.createOffer();await this.pc.setLocalDescription(n),this._waitForICEGathering&&await new Promise(o=>{if(this.pc.iceGatheringState==="complete")o();else{const a=()=>{this.pc.iceGatheringState==="complete"&&(this.pc.removeEventListener("icegatheringstatechange",a),o())};this.pc.addEventListener("icegatheringstatechange",a)}});let r=this.pc.localDescription;this.audioCodec&&this.audioCodec!=="default"&&(r.sdp=this.sdpFilterCodec("audio",this.audioCodec,r.sdp)),this.videoCodec&&this.videoCodec!=="default"&&(r.sdp=this.sdpFilterCodec("video",this.videoCodec,r.sdp)),ee.debug(`Will create offer for peerId: ${this.pc_id}`);const i=await(await fetch(this._connectionUrl,{body:JSON.stringify({sdp:r.sdp,type:r.type,pc_id:this.pc_id,restart_pc:t}),headers:{"Content-Type":"application/json"},method:"POST"})).json();this.pc_id=i.pc_id,ee.debug(`Received answer for peer connection id ${i.pc_id}`),await this.pc.setRemoteDescription(i),ee.debug(`Remote candidate supports trickle ice: ${this.pc.canTrickleIceCandidates}`)}catch(n){ee.debug(`Reconnection attempt ${this.reconnectionAttempts} failed: ${n}`),this.isReconnecting=!1,setTimeout(()=>this.attemptReconnection(!0),2e3)}}addInitialTransceivers(){this.pc.addTransceiver("audio",{direction:"sendrecv"}),this.pc.addTransceiver("video",{direction:"sendrecv"})}getAudioTransceiver(){return this.pc.getTransceivers()[ha]}getVideoTransceiver(){return this.pc.getTransceivers()[pa]}async startNewPeerConnection(t=!1){this.pc=this.createPeerConnection(),this.addInitialTransceivers(),this.dc=this.createDataChannel("chat",{ordered:!0}),await this.addUserMedia(),await this.negotiate(t)}async addUserMedia(){ee.debug(`addUserMedia this.tracks(): ${this.tracks()}`);let t=this.tracks().local.audio;ee.debug(`addUserMedia audioTrack: ${t}`),t&&await this.getAudioTransceiver().sender.replaceTrack(t);let n=this.tracks().local.video;ee.debug(`addUserMedia videoTrack: ${n}`),n&&await this.getVideoTransceiver().sender.replaceTrack(n)}handleMessage(t){try{const n=JSON.parse(t);ee.debug("received message:",n),n.type===Ey?this.handleSignallingMessage(n):n.label==="rtvi-ai"&&this._onMessage({id:n.id,type:n.type,data:n.data})}catch(n){console.error("Failed to parse JSON message:",n)}}async handleSignallingMessage(t){const n=t;switch(n.message.type){case YA:this.attemptReconnection(!1);break;case XA:this.disconnect();break;default:console.warn("Unknown signalling message:",n.message)}}createDataChannel(t,n){const r=this.pc.createDataChannel(t,n);return r.addEventListener("close",()=>{ee.debug("datachannel closed"),this.keepAliveInterval&&(clearInterval(this.keepAliveInterval),this.keepAliveInterval=null)}),r.addEventListener("open",()=>{ee.debug("datachannel opened"),this._connectResolved&&(this.syncTrackStatus(),this._connectResolved(),this._connectResolved=null,this._connectFailed=null),this.keepAliveInterval=setInterval(()=>{const s="ping: "+new Date().getTime();r.send(s)},1e3)}),r.addEventListener("message",s=>{let i=s.data;this.handleMessage(i)}),r}closePeerConnection(t){t.getTransceivers().forEach(n=>{n.stop&&n.stop()}),t.getSenders().forEach(n=>{n.track?.stop()}),t.close()}async stop(){if(!this.pc){ee.debug("Peer connection is already closed or null.");return}this.dc&&this.dc.close(),this.closePeerConnection(this.pc),this.pc=null,await this.mediaManager.disconnect(),this.pc_id=null,this.reconnectionAttempts=0,this.isReconnecting=!1,this._callbacks.onDisconnected?.(),this._connectFailed&&this._connectFailed(),this._connectFailed=null,this._connectResolved=null}getAllMics(){return this.mediaManager.getAllMics()}getAllCams(){return this.mediaManager.getAllCams()}getAllSpeakers(){return this.mediaManager.getAllSpeakers()}async updateMic(t){return this.mediaManager.updateMic(t)}updateCam(t){return this.mediaManager.updateCam(t)}updateSpeaker(t){return this.mediaManager.updateSpeaker(t)}get selectedMic(){return this.mediaManager.selectedMic}get selectedCam(){return this.mediaManager.selectedCam}get selectedSpeaker(){return this.mediaManager.selectedSpeaker}set iceServers(t){this._iceServers=t}get iceServers(){return this._iceServers}enableMic(t){this.mediaManager.enableMic(t),this.sendSignallingMessage(new oi(ha,t))}enableCam(t){this.mediaManager.enableCam(t),this.sendSignallingMessage(new oi(pa,t))}get isCamEnabled(){return this.mediaManager.isCamEnabled}get isMicEnabled(){return this.mediaManager.isMicEnabled}get state(){return this._state}set state(t){this._state!==t&&(this._state=t,this._callbacks.onTransportStateChanged?.(t))}tracks(){return this.mediaManager.tracks()}enableScreenShare(t){throw ee.error("startScreenShare not implemented for SmallWebRTCTransport"),new Error("Not implemented")}get isSharingScreen(){return ee.error("isSharingScreen not implemented for SmallWebRTCTransport"),!1}sdpFilterCodec(t,n,r){const s=[],i=new RegExp("a=fmtp:(\\d+) apt=(\\d+)\\r$"),o=new RegExp("a=rtpmap:([0-9]+) "+this.escapeRegExp(n)),a=new RegExp("(m="+t+" .*?)( ([0-9]+))*\\s*$"),c=r.split(`
`);let l=!1;for(let h=0;h<c.length;h++)if(c[h].startsWith("m="+t+" ")?l=!0:c[h].startsWith("m=")&&(l=!1),l){const p=c[h].match(o);p&&s.push(parseInt(p[1]));const g=c[h].match(i);g&&s.includes(parseInt(g[2]))&&s.push(parseInt(g[1]))}const u="a=(fmtp|rtcp-fb|rtpmap):([0-9]+)";let f="";l=!1;for(let h=0;h<c.length;h++)if(c[h].startsWith("m="+t+" ")?l=!0:c[h].startsWith("m=")&&(l=!1),l){const p=c[h].match(u);if(p&&!s.includes(parseInt(p[2])))continue;c[h].match(a)?f+=c[h].replace(a,"$1 "+s.join(" "))+`
`:f+=c[h]+`
`}else f+=c[h]+`
`;return f}escapeRegExp(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}Kl.SERVICE_NAME="small-webrtc-transport";const ZA={},eO=({audioCodec:e="default",clientOptions:t=ZA,connectParams:n,noUserAudio:r=!1,systemPrompt:s="You are a helpful AI assistant.",transportType:i="smallwebrtc"})=>{const o=R.useRef(null),[a,c]=R.useState(""),[l,u]=R.useState(!1),[f,h]=R.useState(!1),[p,g]=R.useState(!1);R.useEffect(()=>{if(typeof window>"u")return;if(!n){console.error("connectParams is required");return}if(o.current)return;let w;try{w=new Kl(n)}catch(C){console.error("Failed to create transport:",C);return}const M={...t.callbacks??{},onParticipantJoined:C=>{c(C.id||""),t?.callbacks?.onParticipantJoined?.(C)},onTrackStarted:(C,S)=>{S?.id&&S.local&&c(S.id),t?.callbacks?.onTrackStarted?.(C,S)},onConnected:()=>{u(!0),t?.callbacks?.onConnected?.()},onDisconnected:()=>{u(!1),t?.callbacks?.onDisconnected?.()},onError:C=>{t?.callbacks?.onError?.(C)},onBotReady:()=>{t?.callbacks?.onBotReady?.({version:"0.1.0"}),g(!0)},onUserStartedSpeaking:()=>{t?.callbacks?.onUserStartedSpeaking?.()},onUserStoppedSpeaking:()=>{t?.callbacks?.onUserStoppedSpeaking?.()},onBotStartedSpeaking:()=>{t?.callbacks?.onBotStartedSpeaking?.()},onBotStoppedSpeaking:()=>{t?.callbacks?.onBotStoppedSpeaking?.()}};return o.current=new Mr({...t,transport:w,enableMic:!r,callbacks:M}),o.current.initDevices().catch(C=>{console.error("Failed to initialize devices:",C)}),h(!0),()=>{h(!1),u(!1),o.current?.disconnect().catch(C=>{console.error("Failed to disconnect client:",C)}),o.current=null,c("")}},[]),R.useEffect(()=>{if(o.current&&i==="smallwebrtc"&&e){const w=o.current.transport;w.setAudioCodec&&w.setAudioCodec(e)}},[e,i]);const y=R.useCallback(async()=>{if(o.current)try{await o.current.connect(),s&&o.current.appendToContext({role:"assistant",content:s+". Start this conversation with a greeting like I didn't just tell you anything... starting with hello, hey, hi, etc."})}catch(w){console.error("Connection failed:",w);try{await o.current.disconnect()}catch{}}},[s]),b=R.useCallback(async()=>{if(o.current)try{await o.current.disconnect()}catch(w){console.error("Disconnect failed:",w)}},[]);return{client:o.current,isClientReady:f,isBotReady:p,isConnected:l,participantId:a,handleConnect:y,handleDisconnect:b}};function Mc(){return Mc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mc.apply(null,arguments)}function tO(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var nO=R.useLayoutEffect,rO=function(t){var n=R.useRef(t);return nO(function(){n.current=t}),n},op=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},sO=function(t,n){var r=R.useRef();return R.useCallback(function(s){t.current=s,r.current&&op(r.current,null),r.current=n,n&&op(n,s)},[n])},ap={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},iO=function(t){Object.keys(ap).forEach(function(n){t.style.setProperty(n,ap[n],"important")})},cp=iO,We=null,lp=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function oO(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),We||(We=document.createElement("textarea"),We.setAttribute("tabindex","-1"),We.setAttribute("aria-hidden","true"),cp(We)),We.parentNode===null&&document.body.appendChild(We);var s=e.paddingSize,i=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(h){var p=h;We.style[p]=o[p]}),cp(We),We.value=t;var c=lp(We,e);We.value=t,c=lp(We,e),We.value="x";var l=We.scrollHeight-s,u=l*n;a==="border-box"&&(u=u+s+i),c=Math.max(u,c);var f=l*r;return a==="border-box"&&(f=f+s+i),c=Math.min(f,c),[c,l]}var up=function(){},aO=function(t,n){return t.reduce(function(r,s){return r[s]=n[s],r},{})},cO=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],lO=!!document.documentElement.currentStyle,uO=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=aO(cO,n),s=r.boxSizing;if(s==="")return null;lO&&s==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var i=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:i,borderSize:o}},dO=uO;function Yl(e,t,n){var r=rO(n);A.useLayoutEffect(function(){var s=function(o){return r.current(o)};if(e)return e.addEventListener(t,s),function(){return e.removeEventListener(t,s)}},[])}var fO=function(t,n){Yl(document.body,"reset",function(r){t.current.form===r.target&&n(r)})},hO=function(t){Yl(window,"resize",t)},pO=function(t){Yl(document.fonts,"loadingdone",t)},mO=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],gO=function(t,n){var r=t.cacheMeasurements,s=t.maxRows,i=t.minRows,o=t.onChange,a=o===void 0?up:o,c=t.onHeightChange,l=c===void 0?up:c,u=tO(t,mO),f=u.value!==void 0,h=A.useRef(null),p=sO(h,n),g=A.useRef(0),y=A.useRef(),b=function(){var C=h.current,S=r&&y.current?y.current:dO(C);if(S){y.current=S;var _=oO(S,C.value||C.placeholder||"x",i,s),O=_[0],k=_[1];g.current!==O&&(g.current=O,C.style.setProperty("height",O+"px","important"),l(O,{rowHeight:k}))}},w=function(C){f||b(),a(C)};return A.useLayoutEffect(b),fO(h,function(){if(!f){var M=h.current.value;requestAnimationFrame(function(){var C=h.current;C&&M!==C.value&&b()})}}),hO(b),pO(b),A.createElement("textarea",Mc({},u,{onChange:w,ref:p}))},vO=A.forwardRef(gO);const yO=Ov("scxl:flex scxl:items-center scxl:*:rounded-none",{variants:{orientation:{horizontal:"scxl:flex-row scxl:*:first:rounded-s-md scxl:*:last:rounded-e-md scxl:*:-ml-[1px] scxl:*:first:ml-0",vertical:"scxl:flex-col scxl:*:first:rounded-t-md scxl:*:last:rounded-b-md scxl:*:-mt-[1px] scxl:*:first:mt-0"}},defaultVariants:{orientation:"horizontal"}}),bO=({className:e,orientation:t="horizontal",children:n,...r})=>x.jsx("div",{className:Ae("scxl:flex",yO({orientation:t}),e),...r,children:n});var ma=0;function wO(){A.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??dp()),document.body.insertAdjacentElement("beforeend",e[1]??dp()),ma++,()=>{ma===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),ma--}},[])}function dp(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var ga="focusScope.autoFocusOnMount",va="focusScope.autoFocusOnUnmount",fp={bubbles:!1,cancelable:!0},xO="FocusScope",Ty=A.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=e,[a,c]=A.useState(null),l=Bn(s),u=Bn(i),f=A.useRef(null),h=ze(t,y=>c(y)),p=A.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;A.useEffect(()=>{if(r){let y=function(C){if(p.paused||!a)return;const S=C.target;a.contains(S)?f.current=S:sn(f.current,{select:!0})},b=function(C){if(p.paused||!a)return;const S=C.relatedTarget;S!==null&&(a.contains(S)||sn(f.current,{select:!0}))},w=function(C){if(document.activeElement===document.body)for(const _ of C)_.removedNodes.length>0&&sn(a)};document.addEventListener("focusin",y),document.addEventListener("focusout",b);const M=new MutationObserver(w);return a&&M.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",b),M.disconnect()}}},[r,a,p.paused]),A.useEffect(()=>{if(a){pp.add(p);const y=document.activeElement;if(!a.contains(y)){const w=new CustomEvent(ga,fp);a.addEventListener(ga,l),a.dispatchEvent(w),w.defaultPrevented||(SO(TO(My(a)),{select:!0}),document.activeElement===y&&sn(a))}return()=>{a.removeEventListener(ga,l),setTimeout(()=>{const w=new CustomEvent(va,fp);a.addEventListener(va,u),a.dispatchEvent(w),w.defaultPrevented||sn(y??document.body,{select:!0}),a.removeEventListener(va,u),pp.remove(p)},0)}}},[a,l,u,p]);const g=A.useCallback(y=>{if(!n&&!r||p.paused)return;const b=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,w=document.activeElement;if(b&&w){const M=y.currentTarget,[C,S]=_O(M);C&&S?!y.shiftKey&&w===S?(y.preventDefault(),n&&sn(C,{select:!0})):y.shiftKey&&w===C&&(y.preventDefault(),n&&sn(S,{select:!0})):w===M&&y.preventDefault()}},[n,r,p.paused]);return x.jsx(Ie.div,{tabIndex:-1,...o,ref:h,onKeyDown:g})});Ty.displayName=xO;function SO(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(sn(r,{select:t}),document.activeElement!==n)return}function _O(e){const t=My(e),n=hp(t,e),r=hp(t.reverse(),e);return[n,r]}function My(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function hp(e,t){for(const n of e)if(!kO(n,{upTo:t}))return n}function kO(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function CO(e){return e instanceof HTMLInputElement&&"select"in e}function sn(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&CO(e)&&t&&e.select()}}var pp=EO();function EO(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=mp(e,t),e.unshift(t)},remove(t){e=mp(e,t),e[0]?.resume()}}}function mp(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function TO(e){return e.filter(t=>t.tagName!=="A")}var MO=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Xn=new WeakMap,ai=new WeakMap,ci={},ya=0,Py=function(e){return e&&(e.host||Py(e.parentNode))},PO=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=Py(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},AO=function(e,t,n,r){var s=PO(t,Array.isArray(e)?e:[e]);ci[n]||(ci[n]=new WeakMap);var i=ci[n],o=[],a=new Set,c=new Set(s),l=function(f){!f||a.has(f)||(a.add(f),l(f.parentNode))};s.forEach(l);var u=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(h){if(a.has(h))u(h);else try{var p=h.getAttribute(r),g=p!==null&&p!=="false",y=(Xn.get(h)||0)+1,b=(i.get(h)||0)+1;Xn.set(h,y),i.set(h,b),o.push(h),y===1&&g&&ai.set(h,!0),b===1&&h.setAttribute(n,"true"),g||h.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",h,w)}})};return u(t),a.clear(),ya++,function(){o.forEach(function(f){var h=Xn.get(f)-1,p=i.get(f)-1;Xn.set(f,h),i.set(f,p),h||(ai.has(f)||f.removeAttribute(r),ai.delete(f)),p||f.removeAttribute(n)}),ya--,ya||(Xn=new WeakMap,Xn=new WeakMap,ai=new WeakMap,ci={})}},OO=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=MO(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),AO(r,s,n,"aria-hidden")):function(){return null}},At=function(){return At=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},At.apply(this,arguments)};function Ay(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function RO(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,i;r<s;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var xi="right-scroll-bar-position",Si="width-before-scroll-bar",LO="with-scroll-bars-hidden",jO="--removed-body-scroll-bar-size";function ba(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function DO(e,t){var n=R.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var IO=typeof window<"u"?A.useLayoutEffect:A.useEffect,gp=new WeakMap;function NO(e,t){var n=DO(null,function(r){return e.forEach(function(s){return ba(s,r)})});return IO(function(){var r=gp.get(n);if(r){var s=new Set(r),i=new Set(e),o=n.current;s.forEach(function(a){i.has(a)||ba(a,null)}),i.forEach(function(a){s.has(a)||ba(a,o)})}gp.set(n,e)},[e]),n}function FO(e){return e}function BO(e,t){t===void 0&&(t=FO);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var o=t(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var c=function(){var u=o;o=[],u.forEach(i)},l=function(){return Promise.resolve().then(c)};l(),n={push:function(u){o.push(u),l()},filter:function(u){return o=o.filter(u),n}}}};return s}function $O(e){e===void 0&&(e={});var t=BO(null);return t.options=At({async:!0,ssr:!1},e),t}var Oy=function(e){var t=e.sideCar,n=Ay(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return A.createElement(r,At({},n))};Oy.isSideCarExport=!0;function VO(e,t){return e.useMedium(t),Oy}var Ry=$O(),wa=function(){},mo=A.forwardRef(function(e,t){var n=A.useRef(null),r=A.useState({onScrollCapture:wa,onWheelCapture:wa,onTouchMoveCapture:wa}),s=r[0],i=r[1],o=e.forwardProps,a=e.children,c=e.className,l=e.removeScrollBar,u=e.enabled,f=e.shards,h=e.sideCar,p=e.noRelative,g=e.noIsolation,y=e.inert,b=e.allowPinchZoom,w=e.as,M=w===void 0?"div":w,C=e.gapMode,S=Ay(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=h,O=NO([n,t]),k=At(At({},S),s);return A.createElement(A.Fragment,null,u&&A.createElement(_,{sideCar:Ry,removeScrollBar:l,shards:f,noRelative:p,noIsolation:g,inert:y,setCallbacks:i,allowPinchZoom:!!b,lockRef:n,gapMode:C}),o?A.cloneElement(A.Children.only(a),At(At({},k),{ref:O})):A.createElement(M,At({},k,{className:c,ref:O}),a))});mo.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};mo.classNames={fullWidth:Si,zeroRight:xi};var UO=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function zO(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=UO();return t&&e.setAttribute("nonce",t),e}function WO(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function qO(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var HO=function(){var e=0,t=null;return{add:function(n){e==0&&(t=zO())&&(WO(t,n),qO(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},GO=function(){var e=HO();return function(t,n){A.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},Ly=function(){var e=GO(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},JO={left:0,top:0,right:0,gap:0},xa=function(e){return parseInt(e||"",10)||0},KO=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[xa(n),xa(r),xa(s)]},YO=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return JO;var t=KO(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},XO=Ly(),mr="data-scroll-locked",QO=function(e,t,n,r){var s=e.left,i=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(LO,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(mr,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(xi,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Si,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(xi," .").concat(xi,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Si," .").concat(Si,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(mr,`] {
    `).concat(jO,": ").concat(a,`px;
  }
`)},vp=function(){var e=parseInt(document.body.getAttribute(mr)||"0",10);return isFinite(e)?e:0},ZO=function(){A.useEffect(function(){return document.body.setAttribute(mr,(vp()+1).toString()),function(){var e=vp()-1;e<=0?document.body.removeAttribute(mr):document.body.setAttribute(mr,e.toString())}},[])},e1=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;ZO();var i=A.useMemo(function(){return YO(s)},[s]);return A.createElement(XO,{styles:QO(i,!t,s,n?"":"!important")})},Pc=!1;if(typeof window<"u")try{var li=Object.defineProperty({},"passive",{get:function(){return Pc=!0,!0}});window.addEventListener("test",li,li),window.removeEventListener("test",li,li)}catch{Pc=!1}var Qn=Pc?{passive:!1}:!1,t1=function(e){return e.tagName==="TEXTAREA"},jy=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!t1(e)&&n[t]==="visible")},n1=function(e){return jy(e,"overflowY")},r1=function(e){return jy(e,"overflowX")},yp=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=Dy(e,r);if(s){var i=Iy(e,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},s1=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},i1=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Dy=function(e,t){return e==="v"?n1(t):r1(t)},Iy=function(e,t){return e==="v"?s1(t):i1(t)},o1=function(e,t){return e==="h"&&t==="rtl"?-1:1},a1=function(e,t,n,r,s){var i=o1(e,window.getComputedStyle(t).direction),o=i*r,a=n.target,c=t.contains(a),l=!1,u=o>0,f=0,h=0;do{if(!a)break;var p=Iy(e,a),g=p[0],y=p[1],b=p[2],w=y-b-i*g;(g||w)&&Dy(e,a)&&(f+=w,h+=g);var M=a.parentNode;a=M&&M.nodeType===Node.DOCUMENT_FRAGMENT_NODE?M.host:M}while(!c&&a!==document.body||c&&(t.contains(a)||t===a));return(u&&Math.abs(f)<1||!u&&Math.abs(h)<1)&&(l=!0),l},ui=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},bp=function(e){return[e.deltaX,e.deltaY]},wp=function(e){return e&&"current"in e?e.current:e},c1=function(e,t){return e[0]===t[0]&&e[1]===t[1]},l1=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},u1=0,Zn=[];function d1(e){var t=A.useRef([]),n=A.useRef([0,0]),r=A.useRef(),s=A.useState(u1++)[0],i=A.useState(Ly)[0],o=A.useRef(e);A.useEffect(function(){o.current=e},[e]),A.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var y=RO([e.lockRef.current],(e.shards||[]).map(wp),!0).filter(Boolean);return y.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var a=A.useCallback(function(y,b){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var w=ui(y),M=n.current,C="deltaX"in y?y.deltaX:M[0]-w[0],S="deltaY"in y?y.deltaY:M[1]-w[1],_,O=y.target,k=Math.abs(C)>Math.abs(S)?"h":"v";if("touches"in y&&k==="h"&&O.type==="range")return!1;var P=yp(k,O);if(!P)return!0;if(P?_=k:(_=k==="v"?"h":"v",P=yp(k,O)),!P)return!1;if(!r.current&&"changedTouches"in y&&(C||S)&&(r.current=_),!_)return!0;var L=r.current||_;return a1(L,b,y,L==="h"?C:S)},[]),c=A.useCallback(function(y){var b=y;if(!(!Zn.length||Zn[Zn.length-1]!==i)){var w="deltaY"in b?bp(b):ui(b),M=t.current.filter(function(_){return _.name===b.type&&(_.target===b.target||b.target===_.shadowParent)&&c1(_.delta,w)})[0];if(M&&M.should){b.cancelable&&b.preventDefault();return}if(!M){var C=(o.current.shards||[]).map(wp).filter(Boolean).filter(function(_){return _.contains(b.target)}),S=C.length>0?a(b,C[0]):!o.current.noIsolation;S&&b.cancelable&&b.preventDefault()}}},[]),l=A.useCallback(function(y,b,w,M){var C={name:y,delta:b,target:w,should:M,shadowParent:f1(w)};t.current.push(C),setTimeout(function(){t.current=t.current.filter(function(S){return S!==C})},1)},[]),u=A.useCallback(function(y){n.current=ui(y),r.current=void 0},[]),f=A.useCallback(function(y){l(y.type,bp(y),y.target,a(y,e.lockRef.current))},[]),h=A.useCallback(function(y){l(y.type,ui(y),y.target,a(y,e.lockRef.current))},[]);A.useEffect(function(){return Zn.push(i),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",c,Qn),document.addEventListener("touchmove",c,Qn),document.addEventListener("touchstart",u,Qn),function(){Zn=Zn.filter(function(y){return y!==i}),document.removeEventListener("wheel",c,Qn),document.removeEventListener("touchmove",c,Qn),document.removeEventListener("touchstart",u,Qn)}},[]);var p=e.removeScrollBar,g=e.inert;return A.createElement(A.Fragment,null,g?A.createElement(i,{styles:l1(s)}):null,p?A.createElement(e1,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function f1(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const h1=VO(Ry,d1);var Ny=A.forwardRef(function(e,t){return A.createElement(mo,At({},e,{ref:t,sideCar:h1}))});Ny.classNames=mo.classNames;var go="Popover",[Fy,yR]=Hn(go,[no]),As=no(),[p1,vn]=Fy(go),By=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!1}=e,a=As(t),c=A.useRef(null),[l,u]=A.useState(!1),[f,h]=ro({prop:r,defaultProp:s??!1,onChange:i,caller:go});return x.jsx(vv,{...a,children:x.jsx(p1,{scope:t,contentId:bl(),triggerRef:c,open:f,onOpenChange:h,onOpenToggle:A.useCallback(()=>h(p=>!p),[h]),hasCustomAnchor:l,onCustomAnchorAdd:A.useCallback(()=>u(!0),[]),onCustomAnchorRemove:A.useCallback(()=>u(!1),[]),modal:o,children:n})})};By.displayName=go;var $y="PopoverAnchor",m1=A.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=vn($y,n),i=As(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=s;return A.useEffect(()=>(o(),()=>a()),[o,a]),x.jsx(Pl,{...i,...r,ref:t})});m1.displayName=$y;var Vy="PopoverTrigger",Uy=A.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=vn(Vy,n),i=As(n),o=ze(t,s.triggerRef),a=x.jsx(Ie.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Gy(s.open),...r,ref:o,onClick:Ce(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?a:x.jsx(Pl,{asChild:!0,...i,children:a})});Uy.displayName=Vy;var Xl="PopoverPortal",[g1,v1]=Fy(Xl,{forceMount:void 0}),zy=e=>{const{__scopePopover:t,forceMount:n,children:r,container:s}=e,i=vn(Xl,t);return x.jsx(g1,{scope:t,forceMount:n,children:x.jsx(Nr,{present:n||i.open,children:x.jsx(Al,{asChild:!0,container:s,children:r})})})};zy.displayName=Xl;var Er="PopoverContent",Wy=A.forwardRef((e,t)=>{const n=v1(Er,e.__scopePopover),{forceMount:r=n.forceMount,...s}=e,i=vn(Er,e.__scopePopover);return x.jsx(Nr,{present:r||i.open,children:i.modal?x.jsx(b1,{...s,ref:t}):x.jsx(w1,{...s,ref:t})})});Wy.displayName=Er;var y1=ms("PopoverContent.RemoveScroll"),b1=A.forwardRef((e,t)=>{const n=vn(Er,e.__scopePopover),r=A.useRef(null),s=ze(t,r),i=A.useRef(!1);return A.useEffect(()=>{const o=r.current;if(o)return OO(o)},[]),x.jsx(Ny,{as:y1,allowPinchZoom:!0,children:x.jsx(qy,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ce(e.onCloseAutoFocus,o=>{o.preventDefault(),i.current||n.triggerRef.current?.focus()}),onPointerDownOutside:Ce(e.onPointerDownOutside,o=>{const a=o.detail.originalEvent,c=a.button===0&&a.ctrlKey===!0,l=a.button===2||c;i.current=l},{checkForDefaultPrevented:!1}),onFocusOutside:Ce(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),w1=A.forwardRef((e,t)=>{const n=vn(Er,e.__scopePopover),r=A.useRef(!1),s=A.useRef(!1);return x.jsx(qy,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{e.onCloseAutoFocus?.(i),i.defaultPrevented||(r.current||n.triggerRef.current?.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{e.onInteractOutside?.(i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;n.triggerRef.current?.contains(o)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),qy=A.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:l,onInteractOutside:u,...f}=e,h=vn(Er,n),p=As(n);return wO(),x.jsx(Ty,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:x.jsx(yl,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:l,onDismiss:()=>h.onOpenChange(!1),children:x.jsx(yv,{"data-state":Gy(h.open),role:"dialog",id:h.contentId,...p,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Hy="PopoverClose",x1=A.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=vn(Hy,n);return x.jsx(Ie.button,{type:"button",...r,ref:t,onClick:Ce(e.onClick,()=>s.onOpenChange(!1))})});x1.displayName=Hy;var S1="PopoverArrow",_1=A.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=As(n);return x.jsx(bv,{...s,...r,ref:t})});_1.displayName=S1;function Gy(e){return e?"open":"closed"}var k1=By,C1=Uy,E1=zy,T1=Wy;function M1({...e}){return x.jsx(k1,{"data-slot":"popover",...e})}function P1({...e}){return x.jsx(C1,{"data-slot":"popover-trigger",...e})}function A1({className:e,align:t="center",sideOffset:n=4,...r}){return x.jsx(E1,{children:x.jsx(T1,{"data-slot":"popover-content",align:t,sideOffset:n,className:Ae("scxl:bg-popover scxl:text-popover-foreground scxl:data-[state=open]:animate-in scxl:data-[state=closed]:animate-out scxl:data-[state=closed]:fade-out-0 scxl:data-[state=open]:fade-in-0 scxl:data-[state=closed]:zoom-out-95 scxl:data-[state=open]:zoom-in-95 scxl:data-[side=bottom]:slide-in-from-top-2 scxl:data-[side=left]:slide-in-from-right-2 scxl:data-[side=right]:slide-in-from-left-2 scxl:data-[side=top]:slide-in-from-bottom-2 scxl:z-50 scxl:w-72 scxl:origin-(--radix-popover-content-transform-origin) scxl:rounded-md scxl:border scxl:p-4 scxl:shadow-md scxl:outline-hidden",e),...r})})}function O1(e){const t=e+"CollectionProvider",[n,r]=Hn(t),[s,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:b,children:w}=y,M=R.useRef(null),C=R.useRef(new Map).current;return x.jsx(s,{scope:b,itemMap:C,collectionRef:M,children:w})};o.displayName=t;const a=e+"CollectionSlot",c=ms(a),l=R.forwardRef((y,b)=>{const{scope:w,children:M}=y,C=i(a,w),S=ze(b,C.collectionRef);return x.jsx(c,{ref:S,children:M})});l.displayName=a;const u=e+"CollectionItemSlot",f="data-radix-collection-item",h=ms(u),p=R.forwardRef((y,b)=>{const{scope:w,children:M,...C}=y,S=R.useRef(null),_=ze(b,S),O=i(u,w);return R.useEffect(()=>(O.itemMap.set(S,{ref:S,...C}),()=>void O.itemMap.delete(S))),x.jsx(h,{[f]:"",ref:_,children:M})});p.displayName=u;function g(y){const b=i(e+"CollectionConsumer",y);return R.useCallback(()=>{const M=b.collectionRef.current;if(!M)return[];const C=Array.from(M.querySelectorAll(`[${f}]`));return Array.from(b.itemMap.values()).sort((O,k)=>C.indexOf(O.ref.current)-C.indexOf(k.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:o,Slot:l,ItemSlot:p},g,r]}var R1=A.createContext(void 0);function Jy(e){const t=A.useContext(R1);return e||t||"ltr"}var Sa="rovingFocusGroup.onEntryFocus",L1={bubbles:!1,cancelable:!0},Os="RovingFocusGroup",[Ac,Ky,j1]=O1(Os),[D1,Yy]=Hn(Os,[j1]),[I1,N1]=D1(Os),Xy=A.forwardRef((e,t)=>x.jsx(Ac.Provider,{scope:e.__scopeRovingFocusGroup,children:x.jsx(Ac.Slot,{scope:e.__scopeRovingFocusGroup,children:x.jsx(F1,{...e,ref:t})})}));Xy.displayName=Os;var F1=A.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:c,onEntryFocus:l,preventScrollOnEntryFocus:u=!1,...f}=e,h=A.useRef(null),p=ze(t,h),g=Jy(i),[y,b]=ro({prop:o,defaultProp:a??null,onChange:c,caller:Os}),[w,M]=A.useState(!1),C=Bn(l),S=Ky(n),_=A.useRef(!1),[O,k]=A.useState(0);return A.useEffect(()=>{const P=h.current;if(P)return P.addEventListener(Sa,C),()=>P.removeEventListener(Sa,C)},[C]),x.jsx(I1,{scope:n,orientation:r,dir:g,loop:s,currentTabStopId:y,onItemFocus:A.useCallback(P=>b(P),[b]),onItemShiftTab:A.useCallback(()=>M(!0),[]),onFocusableItemAdd:A.useCallback(()=>k(P=>P+1),[]),onFocusableItemRemove:A.useCallback(()=>k(P=>P-1),[]),children:x.jsx(Ie.div,{tabIndex:w||O===0?-1:0,"data-orientation":r,...f,ref:p,style:{outline:"none",...e.style},onMouseDown:Ce(e.onMouseDown,()=>{_.current=!0}),onFocus:Ce(e.onFocus,P=>{const L=!_.current;if(P.target===P.currentTarget&&L&&!w){const j=new CustomEvent(Sa,L1);if(P.currentTarget.dispatchEvent(j),!j.defaultPrevented){const N=S().filter(X=>X.focusable),U=N.find(X=>X.active),H=N.find(X=>X.id===y),G=[U,H,...N].filter(Boolean).map(X=>X.ref.current);eb(G,u)}}_.current=!1}),onBlur:Ce(e.onBlur,()=>M(!1))})})}),Qy="RovingFocusGroupItem",Zy=A.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:o,...a}=e,c=bl(),l=i||c,u=N1(Qy,n),f=u.currentTabStopId===l,h=Ky(n),{onFocusableItemAdd:p,onFocusableItemRemove:g,currentTabStopId:y}=u;return A.useEffect(()=>{if(r)return p(),()=>g()},[r,p,g]),x.jsx(Ac.ItemSlot,{scope:n,id:l,focusable:r,active:s,children:x.jsx(Ie.span,{tabIndex:f?0:-1,"data-orientation":u.orientation,...a,ref:t,onMouseDown:Ce(e.onMouseDown,b=>{r?u.onItemFocus(l):b.preventDefault()}),onFocus:Ce(e.onFocus,()=>u.onItemFocus(l)),onKeyDown:Ce(e.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){u.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const w=V1(b,u.orientation,u.dir);if(w!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let C=h().filter(S=>S.focusable).map(S=>S.ref.current);if(w==="last")C.reverse();else if(w==="prev"||w==="next"){w==="prev"&&C.reverse();const S=C.indexOf(b.currentTarget);C=u.loop?U1(C,S+1):C.slice(S+1)}setTimeout(()=>eb(C))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:y!=null}):o})})});Zy.displayName=Qy;var B1={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function $1(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function V1(e,t,n){const r=$1(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return B1[r]}function eb(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function U1(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var z1=Xy,W1=Zy;function q1(e){const t=A.useRef({value:e,previous:e});return A.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Ql="Radio",[H1,tb]=Hn(Ql),[G1,J1]=H1(Ql),nb=A.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:s=!1,required:i,disabled:o,value:a="on",onCheck:c,form:l,...u}=e,[f,h]=A.useState(null),p=ze(t,b=>h(b)),g=A.useRef(!1),y=f?l||!!f.closest("form"):!0;return x.jsxs(G1,{scope:n,checked:s,disabled:o,children:[x.jsx(Ie.button,{type:"button",role:"radio","aria-checked":s,"data-state":ob(s),"data-disabled":o?"":void 0,disabled:o,value:a,...u,ref:p,onClick:Ce(e.onClick,b=>{s||c?.(),y&&(g.current=b.isPropagationStopped(),g.current||b.stopPropagation())})}),y&&x.jsx(ib,{control:f,bubbles:!g.current,name:r,value:a,checked:s,required:i,disabled:o,form:l,style:{transform:"translateX(-100%)"}})]})});nb.displayName=Ql;var rb="RadioIndicator",sb=A.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...s}=e,i=J1(rb,n);return x.jsx(Nr,{present:r||i.checked,children:x.jsx(Ie.span,{"data-state":ob(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:t})})});sb.displayName=rb;var K1="RadioBubbleInput",ib=A.forwardRef(({__scopeRadio:e,control:t,checked:n,bubbles:r=!0,...s},i)=>{const o=A.useRef(null),a=ze(o,i),c=q1(n),l=av(t);return A.useEffect(()=>{const u=o.current;if(!u)return;const f=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==n&&p){const g=new Event("click",{bubbles:r});p.call(u,n),u.dispatchEvent(g)}},[c,n,r]),x.jsx(Ie.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:a,style:{...s.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});ib.displayName=K1;function ob(e){return e?"checked":"unchecked"}var Y1=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],vo="RadioGroup",[X1,bR]=Hn(vo,[Yy,tb]),ab=Yy(),cb=tb(),[Q1,Z1]=X1(vo),lb=A.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:s,value:i,required:o=!1,disabled:a=!1,orientation:c,dir:l,loop:u=!0,onValueChange:f,...h}=e,p=ab(n),g=Jy(l),[y,b]=ro({prop:i,defaultProp:s??null,onChange:f,caller:vo});return x.jsx(Q1,{scope:n,name:r,required:o,disabled:a,value:y,onValueChange:b,children:x.jsx(z1,{asChild:!0,...p,orientation:c,dir:g,loop:u,children:x.jsx(Ie.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":a?"":void 0,dir:g,...h,ref:t})})})});lb.displayName=vo;var ub="RadioGroupItem",db=A.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...s}=e,i=Z1(ub,n),o=i.disabled||r,a=ab(n),c=cb(n),l=A.useRef(null),u=ze(t,l),f=i.value===s.value,h=A.useRef(!1);return A.useEffect(()=>{const p=y=>{Y1.includes(y.key)&&(h.current=!0)},g=()=>h.current=!1;return document.addEventListener("keydown",p),document.addEventListener("keyup",g),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",g)}},[]),x.jsx(W1,{asChild:!0,...a,focusable:!o,active:f,children:x.jsx(nb,{disabled:o,required:i.required,checked:f,...c,...s,name:i.name,ref:u,onCheck:()=>i.onValueChange(s.value),onKeyDown:Ce(p=>{p.key==="Enter"&&p.preventDefault()}),onFocus:Ce(s.onFocus,()=>{h.current&&l.current?.click()})})})});db.displayName=ub;var eR="RadioGroupIndicator",fb=A.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,s=cb(n);return x.jsx(sb,{...s,...r,ref:t})});fb.displayName=eR;var tR=lb,nR=db,rR=fb;function sR({className:e,...t}){return x.jsx(tR,{"data-slot":"radio-group",className:Ae("scxl:grid gap-3",e),...t})}function iR({className:e,...t}){return x.jsx(nR,{"data-slot":"radio-group-item",className:Ae("scxl:border-input scxl:text-primary scxl:focus-visible:border-ring scxl:focus-visible:ring-ring/50 scxl:aria-invalid:ring-destructive/20 scxl:dark:aria-invalid:ring-destructive/40 scxl:aria-invalid:border-destructive scxl:dark:bg-input/30 scxl:aspect-square scxl:size-4 scxl:shrink-0 scxl:rounded-full scxl:border scxl:shadow-xs scxl:transition-[color,box-shadow] scxl:outline-none scxl:focus-visible:ring-[3px] scxl:disabled:cursor-not-allowed scxl:disabled:opacity-50",e),...t,children:x.jsx(rR,{"data-slot":"radio-group-indicator",className:"scxl:relative scxl:flex scxl:items-center scxl:justify-center",children:x.jsx(aC,{className:"scxl:fill-white scxl:absolute scxl:top-1/2 scxl:left-1/2 scxl:size-2 scxl:-translate-x-1/2 scxl:-translate-y-1/2"})})})}var oR="Label",hb=A.forwardRef((e,t)=>x.jsx(Ie.label,{...e,ref:t,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(e.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));hb.displayName=oR;var aR=hb;function cR({className:e,...t}){return x.jsx(aR,{"data-slot":"label",className:Ae("scxl:flex scxl:items-center scxl:gap-2 scxl:text-sm scxl:leading-none scxl:font-medium scxl:select-none scxl:group-data-[disabled=true]:pointer-events-none scxl:group-data-[disabled=true]:opacity-50 scxl:peer-disabled:cursor-not-allowed scxl:peer-disabled:opacity-50",e),...t})}const lR=({buttonProps:e={},classNames:t={},dropdownButtonProps:n={},noDevicePicker:r=!1,noVisualizer:s=!1,visualizerProps:i={}})=>{const o=Ji(),{availableMics:a,selectedMic:c,updateMic:l}=kw(),u=o?._options?.enableMic;R.useEffect(()=>{o&&["idle","disconnected"].includes(o.state)&&o.initDevices()},[o]);const f=h=>{l(h)};return u?x.jsx("div",{className:Ae("scxl:flex scxl:flex-col scxl:gap-2 scxl:rounded-full",t.container),children:x.jsxs(bO,{className:Ae("scxl:w-full",t.buttongroup),children:[x.jsx(ww,{children:({isMicEnabled:h,onClick:p})=>x.jsxs(rc,{onClick:p,className:Ae("scxl:flex-1 scxl:justify-start",t.button),variant:"secondary",...e,children:[h?x.jsx(hC,{}):x.jsx(dC,{}),!s&&x.jsx(Qp,{participantType:"local",backgroundColor:"transparent",barColor:h?"#00bc7d":"#999999",barCount:10,barGap:2,barMaxHeight:20,barOrigin:"center",barWidth:3,...i})]})}),!r&&x.jsxs(M1,{children:[x.jsx(P1,{asChild:!0,children:x.jsx(rc,{className:Ae("scxl:p-2! scxl:flex-none",t.popoverTrigger),variant:"secondary",...n,children:x.jsx(iC,{})})}),x.jsx(A1,{align:"end",className:Ae("scxl:w-80 scxl:border-none scxl:bg-transparent scxl:shadow-none",t.popoverContent),children:x.jsxs("div",{className:"scxl:space-y-2",children:[x.jsx("h4",{className:"scxl:font-medium scxl:leading-none",children:"Select Microphone"}),x.jsx(sR,{value:c?.deviceId||"",onValueChange:f,className:Ae("scxl:space-y-2",t.radioGroup),children:a.map(h=>x.jsxs("div",{className:"scxl:flex scxl:cursor-pointer scxl:items-center scxl:space-x-2 scxl:bg-black scxl:text-white scxl:rounded-md scxl:p-2",children:[x.jsx(iR,{value:h.deviceId,id:h.deviceId,className:Ae(t.radioGroupItem)}),x.jsx(cR,{htmlFor:h.deviceId,className:Ae("scxl:text-sm scxl:font-normal scxl:cursor-pointer scxl:flex-1",t.label),children:h.label||`Mic ${h.deviceId.slice(0,8)}...`})]},h.deviceId))})]})})]})]})}):x.jsx("div",{className:Ae("scxl:flex scxl:items-center scxl:gap-2 scxl:bg-muted scxl:rounded-md scxl:p-2 scxl:text-muted-foreground scxl:font-mono scxl:text-sm",t.container),children:"Audio disabled"})},xp={MIN_ROWS:1,MAX_ROWS:10},uR=({theme:e,size:t,labels:n,isVoiceMode:r,isBotReady:s,isTogglingVoice:i,showConnectionStatus:o,showParticipantId:a,enableVoice:c,participantId:l,isAtMaxHeight:u,onTextSend:f,onVoiceModeToggle:h,onDisconnect:p,onHeightChange:g})=>x.jsxs("div",{className:_e("scxl:w-full scxl:flex scxl:flex-col scxl:border-[1.5px] scxl:rounded-2xl",e.inputBorder,e.inputBackground),children:[r?x.jsx("div",{className:"scxl:p-4 scxl:text-center",children:x.jsx("p",{className:_e(t.text,e.textSecondary),children:"🎤 Voice mode active - Speak to chat"})}):x.jsx(vO,{name:"user_input",title:"User input",placeholder:n.inputPlaceholder,minRows:xp.MIN_ROWS,maxRows:xp.MAX_ROWS,onHeightChange:g,onKeyDown:f,className:_e("scxl:font-medium scxl:outline-none scxl:border-none scxl:w-full scxl:resize-none scxl:transition-all scxl:duration-200 scxl:ease-in-out",t.input,e.textPrimary,u&&"scxl:overflow-y-auto")}),x.jsxs("div",{className:"scxl:w-full scxl:flex scxl:items-center scxl:justify-between scxl:px-2 scxl:h-fit",children:[o&&x.jsxs("div",{className:"scxl:flex scxl:flex-row scxl:items-center scxl:p-2",children:[x.jsxs("span",{className:"scxl:relative scxl:flex scxl:size-2 scxl:justify-center scxl:items-center",children:[x.jsx("span",{className:_e("scxl:absolute scxl:inline-flex scxl:h-full scxl:w-full scxl:animate-ping scxl:rounded-full scxl:opacity-75",s?e.ready:e.connecting)}),x.jsx("span",{className:_e("scxl:relative scxl:inline-flex scxl:size-2 scxl:rounded-full",s?e.ready:e.connecting)})]}),x.jsxs("div",{className:_e("scxl:ml-2 scxl:text-gray-800 scxl:font-medium scxl:text-sm"),children:[s?n.botReadyText:n.connectedText,a&&l&&x.jsxs("span",{className:_e("scxl:ml-1",e.textMuted),children:["(",l.slice(0,8),"...)"]})]})]}),x.jsxs("div",{className:"scxl:flex scxl:items-center scxl:gap-2 scxl:text-sm",children:[c&&x.jsxs(lr,{children:[x.jsx(ur,{asChild:!0,children:x.jsxs("button",{title:r?"Switch to text":"Switch to voice",onClick:h,disabled:i,className:_e("scxl:flex scxl:items-center scxl:justify-center scxl:gap-1.5 scxl:font-medium scxl:p-2 scxl:cursor-pointer hover:scxl:-translate-y-0.5 scxl:transition-all scxl:duration-200 scxl:ease-in-out scxl:rounded",r?"scxl:bg-blue-100":"scxl:bg-transparent",i&&"scxl:opacity-50 scxl:cursor-not-allowed"),type:"button",children:[x.jsx("span",{className:_e("scxl:text-sm",r?"scxl:text-blue-600":e.primary),children:i?"Switching...":r?"Switch to text":"Switch to voice"}),x.jsx(Wg,{className:"scxl:size-4"})]})}),x.jsx(dr,{sideOffset:5,children:n.voiceTooltip})]}),x.jsx(pb,{theme:e,size:t,label:n.disconnectButton,isVoiceMode:r,onDisconnect:p})]})]})]}),pb=({theme:e,size:t,label:n,isVoiceMode:r,onDisconnect:s})=>{const i=()=>{s?.()},o=a=>{(a.key===" "||a.key==="Enter")&&(a.preventDefault(),i())};return x.jsxs(lr,{children:[x.jsx(ur,{asChild:!0,children:x.jsx("button",{onClick:i,onKeyDown:o,className:_e("scxl:mb-1 scxl:cursor-pointer scxl:px-4 scxl:text-white scxl:p-2 scxl:rounded-full scxl:transition-colors scxl:flex scxl:items-center scxl:gap-1.5 scxl:text-sm",t.text,e.error,"scxl:bg-red-500 hover:scxl:bg-red-700"),type:"button",children:x.jsx("span",{children:n})})}),x.jsx(dr,{sideOffset:5,children:r?"Exit voice mode":"Disconnect from chat"})]})},dR=({theme:e,size:t,labels:n,isVoiceMode:r,onVoiceModeToggle:s,isTogglingVoice:i,handleDisconnect:o})=>x.jsxs("div",{className:"scxl:flex scxl:justify-between scxl:items-center scxl:w-full scxl:text-sm",children:[x.jsx(lR,{}),x.jsxs(lr,{children:[x.jsx(ur,{asChild:!0,children:x.jsxs("button",{title:r?"Switch to text":"Switch to voice",onClick:s,disabled:i,className:_e("scxl:flex scxl:items-center scxl:justify-center scxl:gap-1.5 scxl:font-medium scxl:p-2 scxl:border scxl:border-indigo-500 scxl:rounded-full scxl:cursor-pointer hover:scxl:-translate-y-0.5 scxl:transition-all scxl:duration-200 scxl:ease-in-out scxl:bg-transparent",i&&"scxl:opacity-50 scxl:cursor-not-allowed"),type:"button",children:[x.jsx("span",{className:_e("scxl:text-sm",r?"scxl:text-indigo-500":e.primary),children:i?"Switching...":r?"Switch to text":"Switch to voice"}),x.jsx(Wg,{className:"scxl:size-4"})]})}),x.jsx(dr,{sideOffset:5,children:n.textTooltip})]}),x.jsx(pb,{theme:e,size:t,label:n.disconnectButton,isVoiceMode:r,onDisconnect:o})]}),fR=({theme:e,labels:t,size:n})=>x.jsx("div",{className:"scxl:w-full scxl:h-screen scxl:p-5 scxl:font-poppins scxl:flex scxl:justify-center scxl:items-center",children:x.jsxs("div",{className:"scxl:flex scxl:flex-col scxl:items-center scxl:gap-6",children:[x.jsxs("div",{className:"scxl:text-center scxl:space-y-2",children:[x.jsx("h1",{className:_e(n.title,"scxl:font-bold",e.primary),children:t.title}),x.jsx("p",{className:e.textSecondary,children:t.loadingText})]}),x.jsx("div",{className:_e("scxl:animate-spin scxl:rounded-full scxl:h-8 scxl:w-8 scxl:border-b-2",e.inputBorder)})]})}),hR=({onConnect:e,error:t,participantId:n,theme:r,labels:s,size:i,showParticipantId:o=!0,trackHasStarted:a})=>x.jsx("div",{className:"scxl:w-full scxl:h-screen scxl:p-5 scxl:font-poppins scxl:flex scxl:justify-center scxl:items-center",children:x.jsxs("div",{className:"scxl:flex scxl:flex-col scxl:items-center scxl:gap-6",children:[x.jsxs("div",{className:"scxl:text-center scxl:space-y-2",children:[x.jsx("h1",{className:_e(i.title,"scxl:font-bold",r.primary),children:s.title}),x.jsx("p",{className:r.textSecondary,children:s.subtitle})]}),t&&x.jsx("div",{className:_e("scxl:border scxl:rounded-lg",i.padding,r.errorLight,r.border),children:x.jsx("p",{className:_e(i.text,r.error),children:t})}),x.jsx(IT,{onConnect:e,trackHasStarted:a}),o&&n&&x.jsxs("p",{className:_e(i.text,r.textMuted),children:["Participant ID: ",n]})]})}),pR=({isBotReady:e,participantId:t,onTextSend:n,onDisconnect:r,theme:s,labels:i,size:o,showParticipantId:a=!0,showConnectionStatus:c=!0,enableVoice:l=!0,client:u})=>{const[f,h]=R.useState(!1),[p,g]=R.useState(!1),[y,b]=R.useState(!1),w=S=>{g(S>=240)},M=async()=>{if(!y){console.log("Toggling voice mode to",!f);try{b(!0);const S=!f;u?.enableMic?.(S),h(S),u?.sendClientMessage("voice_mode",{isVoiceMode:S}),console.log("Switched to",S?"voice mode":"text mode")}catch(S){console.error("Failed to toggle voice mode:",S)}finally{b(!1)}}},C=()=>{f?M():r&&r()};return x.jsx("div",{className:"scxl:w-full scxl:h-screen scxl:p-5 scxl:font-poppins scxl:flex scxl:justify-center scxl:items-center",children:x.jsx("div",{className:"scxl:w-full scxl:h-full scxl:flex scxl:flex-1 scxl:flex-col scxl:justify-center scxl:items-center",children:x.jsxs("div",{className:_e("scxl:w-full scxl:h-full scxl:flex scxl:flex-col scxl:justify-center scxl:items-center",o.container),children:[x.jsx(jT,{}),f?x.jsx(dR,{theme:s,size:o,labels:i,isVoiceMode:f,handleDisconnect:C,onVoiceModeToggle:M,isTogglingVoice:y}):x.jsx(uR,{theme:s,size:o,labels:i,isVoiceMode:f,isBotReady:e,isTogglingVoice:y,showConnectionStatus:c,showParticipantId:a,enableVoice:l,participantId:t,isAtMaxHeight:p,onTextSend:n,onVoiceModeToggle:M,onDisconnect:r,onHeightChange:w})]})})})},mR=({systemPrompt:e="You are a helpful AI assistant.",connectionUrl:t,theme:n={},className:r="",callbacks:s={},labels:i={},size:o="md",typewriterSpeed:a=20,enableVoice:c=!0,enableTextInput:l=!0,enableMicrophone:u=!0,showParticipantId:f=!0,showConnectionStatus:h=!0,autoConnect:p=!1})=>{const[g,y]=R.useState(null),[b,w]=R.useState(!1),M=Cp(n),C=Ep(o),S={...Tp,...i},_=R.useMemo(()=>({enableMic:u,callbacks:{onParticipantJoined:I=>{console.log("Participant joined:",I),y(null),s.onParticipantJoined?.(I)},onTrackStarted:(I,ne)=>{console.log("Track started:",{kind:I.kind,enabled:I.enabled,muted:I.muted,readyState:I.readyState,participant:ne}),I.enabled=!1,s.onTrackStarted?.(I,ne),w(!0)},onDisconnected:()=>{console.log("Client disconnected"),s.onDisconnect?.()},onConnected:()=>{console.log("Client connected"),s.onConnect?.()},onError:I=>{console.error("Client error:",I);const ne=I.label||I.type||"An error occurred";y(ne),s.onError?.(ne)},onBotReady:()=>{s.onBotReady?.(),console.log("Bot is ready!")},onUserStartedSpeaking:()=>{console.log("User started speaking"),s.onUserStartedSpeaking?.()},onUserStoppedSpeaking:()=>{console.log("User stopped speaking"),s.onUserStoppedSpeaking?.()},onBotStartedSpeaking:()=>{console.log("Bot started speaking"),s.onBotStartedSpeaking?.()},onBotStoppedSpeaking:()=>{console.log("Bot stopped speaking"),s.onBotStoppedSpeaking?.()},onClientMessage:I=>{console.log("Client message:",I),s.onMessageReceived?.(I)}}}),[s,u]),O=R.useMemo(()=>({connectionUrl:t||"wss://localhost:8765"}),[t]),{client:k,isConnected:P,isClientReady:L,isBotReady:j,participantId:N,handleConnect:U,handleDisconnect:H}=eO({noUserAudio:!u,connectParams:O,clientOptions:_,systemPrompt:e}),V=async()=>{try{y(null),await U()}catch(I){console.error("Failed to connect:",I),y(I instanceof Error?I.message:"Failed to connect")}},G=async()=>{try{await H(),y(null)}catch(I){console.error("Failed to disconnect:",I),y(I instanceof Error?I.message:"Failed to disconnect")}},{addUserMessage:X}=Rg(),q=I=>{if(I.key==="Enter"&&!I.shiftKey){if(I.preventDefault(),!l)return;const ne=I.target.value.trim();if(ne&&k){console.log("Sending text message:",ne),me.markAllMessagesAsStale(),X(ne),k.sendClientMessage("llm",{action:"append_to_messages",arguments:{messages:[{role:"user",content:ne}],run_immediately:!0}}),I.target.value="";const F=new Event("input",{bubbles:!0});I.target.dispatchEvent(F),s.onMessageSent?.(ne)}}};return R.useEffect(()=>{p&&!P&&L&&V()},[p,P,L]),R.useEffect(()=>()=>{P&&G()},[]),t?x.jsx("div",{className:_e(M.background,r),children:x.jsxs(Kp,{client:k,children:[x.jsx(Yp,{}),!L||!k?x.jsx(fR,{theme:M,labels:S,size:C}):P?x.jsx(pR,{isBotReady:j,participantId:N,onTextSend:q,onDisconnect:G,client:k,theme:M,labels:S,size:C,showParticipantId:f,showConnectionStatus:h,enableVoice:c,typewriterSpeed:a}):x.jsx(hR,{onConnect:V,error:g,participantId:N,theme:M,labels:S,size:C,showParticipantId:f,trackHasStarted:b})]})}):x.jsx("div",{className:"scxl:w-full scxl:h-screen scxl:p-5 scxl:font-poppins scxl:flex scxl:justify-center scxl:items-center",children:x.jsx("div",{className:_e("scxl:border scxl:rounded-lg",C.padding,M.errorLight,M.border),children:x.jsx("p",{className:_e(C.text,M.error),children:"Error: connectionUrl prop is required"})})})};exports.ChatUI=mR;exports.TypeWriter=Sb;exports.defaultLabels=Tp;exports.defaultTheme=ge;exports.getSizeClasses=Ep;exports.getThemeClasses=Cp;
